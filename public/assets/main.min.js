function BookDetailFirstPrintInfoController(a,b,c,d,e){function f(){c.show(function(a){b.linkBook({id:a.id},{bookId:i.book.id},function(){i.book.firstPrintInfo=b.get({id:a.id},function(){},e.handleRestError),d.addSuccessMessage("Eerste druk gewijzigd")},e.handleRestError)})}function g(){a.path("/create-first-print-and-link-to-book/"+i.book.id)}function h(){a.path("/edit-first-print/"+i.book.firstPrintInfo.id)}var i=this;i.showSelectFirstPrintDialog=f,i.createFirstPrintInfo=g,i.editFirstPrintInfo=h}(function(){"use strict";var a=this,b=a.Chart,c=function(a){this.canvas=a.canvas,this.ctx=a;var b=function(a,b){return a["offset"+b]?a["offset"+b]:document.defaultView.getComputedStyle(a).getPropertyValue(b)},c=this.width=b(a.canvas,"Width"),e=this.height=b(a.canvas,"Height");a.canvas.width=c,a.canvas.height=e;var c=this.width=a.canvas.width,e=this.height=a.canvas.height;return this.aspectRatio=this.width/this.height,d.retinaScale(this),this};c.defaults={global:{animation:!0,animationSteps:60,animationEasing:"easeOutQuart",showScale:!0,scaleOverride:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:!0,scaleLabel:"<%=value%>",scaleIntegersOnly:!0,scaleBeginAtZero:!1,scaleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",responsive:!1,maintainAspectRatio:!0,showTooltips:!0,customTooltips:!1,tooltipEvents:["mousemove","touchstart","touchmove","mouseout"],tooltipFillColor:"rgba(0,0,0,0.8)",tooltipFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipFontSize:14,tooltipFontStyle:"normal",tooltipFontColor:"#fff",tooltipTitleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipTitleFontSize:14,tooltipTitleFontStyle:"bold",tooltipTitleFontColor:"#fff",tooltipYPadding:6,tooltipXPadding:6,tooltipCaretSize:8,tooltipCornerRadius:6,tooltipXOffset:10,tooltipTemplate:"<%if (label){%><%=label%>: <%}%><%= value %>",multiTooltipTemplate:"<%= value %>",multiTooltipKeyBackground:"#fff",onAnimationProgress:function(){},onAnimationComplete:function(){}}},c.types={};var d=c.helpers={},e=d.each=function(a,b,c){var d=Array.prototype.slice.call(arguments,3);if(a)if(a.length===+a.length){var e;for(e=0;e<a.length;e++)b.apply(c,[a[e],e].concat(d))}else for(var f in a)b.apply(c,[a[f],f].concat(d))},f=d.clone=function(a){var b={};return e(a,function(c,d){a.hasOwnProperty(d)&&(b[d]=c)}),b},g=d.extend=function(a){return e(Array.prototype.slice.call(arguments,1),function(b){e(b,function(c,d){b.hasOwnProperty(d)&&(a[d]=c)})}),a},h=d.merge=function(){var a=Array.prototype.slice.call(arguments,0);return a.unshift({}),g.apply(null,a)},i=d.indexOf=function(a,b){if(Array.prototype.indexOf)return a.indexOf(b);for(var c=0;c<a.length;c++)if(a[c]===b)return c;return-1},j=(d.where=function(a,b){var c=[];return d.each(a,function(a){b(a)&&c.push(a)}),c},d.findNextWhere=function(a,b,c){c||(c=-1);for(var d=c+1;d<a.length;d++){var e=a[d];if(b(e))return e}},d.findPreviousWhere=function(a,b,c){c||(c=a.length);for(var d=c-1;d>=0;d--){var e=a[d];if(b(e))return e}},d.inherits=function(a){var b=this,c=a&&a.hasOwnProperty("constructor")?a.constructor:function(){return b.apply(this,arguments)},d=function(){this.constructor=c};return d.prototype=b.prototype,c.prototype=new d,c.extend=j,a&&g(c.prototype,a),c.__super__=b.prototype,c}),k=d.noop=function(){},l=d.uid=function(){var a=0;return function(){return"chart-"+a++}}(),m=d.warn=function(a){window.console&&"function"==typeof window.console.warn&&console.warn(a)},n=d.amd="function"==typeof define&&define.amd,o=d.isNumber=function(a){return!isNaN(parseFloat(a))&&isFinite(a)},p=d.max=function(a){return Math.max.apply(Math,a)},q=d.min=function(a){return Math.min.apply(Math,a)},r=(d.cap=function(a,b,c){if(o(b)){if(a>b)return b}else if(o(c)&&c>a)return c;return a},d.getDecimalPlaces=function(a){return a%1!==0&&o(a)?a.toString().split(".")[1].length:0}),s=d.radians=function(a){return a*(Math.PI/180)},t=(d.getAngleFromPoint=function(a,b){var c=b.x-a.x,d=b.y-a.y,e=Math.sqrt(c*c+d*d),f=2*Math.PI+Math.atan2(d,c);return 0>c&&0>d&&(f+=2*Math.PI),{angle:f,distance:e}},d.aliasPixel=function(a){return a%2===0?0:.5}),u=(d.splineCurve=function(a,b,c,d){var e=Math.sqrt(Math.pow(b.x-a.x,2)+Math.pow(b.y-a.y,2)),f=Math.sqrt(Math.pow(c.x-b.x,2)+Math.pow(c.y-b.y,2)),g=d*e/(e+f),h=d*f/(e+f);return{inner:{x:b.x-g*(c.x-a.x),y:b.y-g*(c.y-a.y)},outer:{x:b.x+h*(c.x-a.x),y:b.y+h*(c.y-a.y)}}},d.calculateOrderOfMagnitude=function(a){return Math.floor(Math.log(a)/Math.LN10)}),v=(d.calculateScaleRange=function(a,b,c,d,e){var f=2,g=Math.floor(b/(1.5*c)),h=f>=g,i=p(a),j=q(a);i===j&&(i+=.5,j>=.5&&!d?j-=.5:i+=.5);for(var k=Math.abs(i-j),l=u(k),m=Math.ceil(i/(1*Math.pow(10,l)))*Math.pow(10,l),n=d?0:Math.floor(j/(1*Math.pow(10,l)))*Math.pow(10,l),o=m-n,r=Math.pow(10,l),s=Math.round(o/r);(s>g||g>2*s)&&!h;)if(s>g)r*=2,s=Math.round(o/r),s%1!==0&&(h=!0);else if(e&&l>=0){if(r/2%1!==0)break;r/=2,s=Math.round(o/r)}else r/=2,s=Math.round(o/r);return h&&(s=f,r=o/s),{steps:s,stepValue:r,min:n,max:n+s*r}},d.template=function(a,b){function c(a,b){var c=/\W/.test(a)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+a.replace(/[\r\t\n]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):d[a]=d[a];return b?c(b):c}if(a instanceof Function)return a(b);var d={};return c(a,b)}),w=(d.generateLabels=function(a,b,c,d){var f=new Array(b);return labelTemplateString&&e(f,function(b,e){f[e]=v(a,{value:c+d*(e+1)})}),f},d.easingEffects={linear:function(a){return a},easeInQuad:function(a){return a*a},easeOutQuad:function(a){return-1*a*(a-2)},easeInOutQuad:function(a){return(a/=.5)<1?.5*a*a:-.5*(--a*(a-2)-1)},easeInCubic:function(a){return a*a*a},easeOutCubic:function(a){return 1*((a=a/1-1)*a*a+1)},easeInOutCubic:function(a){return(a/=.5)<1?.5*a*a*a:.5*((a-=2)*a*a+2)},easeInQuart:function(a){return a*a*a*a},easeOutQuart:function(a){return-1*((a=a/1-1)*a*a*a-1)},easeInOutQuart:function(a){return(a/=.5)<1?.5*a*a*a*a:-.5*((a-=2)*a*a*a-2)},easeInQuint:function(a){return 1*(a/=1)*a*a*a*a},easeOutQuint:function(a){return 1*((a=a/1-1)*a*a*a*a+1)},easeInOutQuint:function(a){return(a/=.5)<1?.5*a*a*a*a*a:.5*((a-=2)*a*a*a*a+2)},easeInSine:function(a){return-1*Math.cos(a/1*(Math.PI/2))+1},easeOutSine:function(a){return 1*Math.sin(a/1*(Math.PI/2))},easeInOutSine:function(a){return-.5*(Math.cos(Math.PI*a/1)-1)},easeInExpo:function(a){return 0===a?1:1*Math.pow(2,10*(a/1-1))},easeOutExpo:function(a){return 1===a?1:1*(-Math.pow(2,-10*a/1)+1)},easeInOutExpo:function(a){return 0===a?0:1===a?1:(a/=.5)<1?.5*Math.pow(2,10*(a-1)):.5*(-Math.pow(2,-10*--a)+2)},easeInCirc:function(a){return a>=1?a:-1*(Math.sqrt(1-(a/=1)*a)-1)},easeOutCirc:function(a){return 1*Math.sqrt(1-(a=a/1-1)*a)},easeInOutCirc:function(a){return(a/=.5)<1?-.5*(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-(a-=2)*a)+1)},easeInElastic:function(a){var b=1.70158,c=0,d=1;return 0===a?0:1==(a/=1)?1:(c||(c=.3),d<Math.abs(1)?(d=1,b=c/4):b=c/(2*Math.PI)*Math.asin(1/d),-(d*Math.pow(2,10*(a-=1))*Math.sin(2*(1*a-b)*Math.PI/c)))},easeOutElastic:function(a){var b=1.70158,c=0,d=1;return 0===a?0:1==(a/=1)?1:(c||(c=.3),d<Math.abs(1)?(d=1,b=c/4):b=c/(2*Math.PI)*Math.asin(1/d),d*Math.pow(2,-10*a)*Math.sin(2*(1*a-b)*Math.PI/c)+1)},easeInOutElastic:function(a){var b=1.70158,c=0,d=1;return 0===a?0:2==(a/=.5)?1:(c||(c=.3*1.5),d<Math.abs(1)?(d=1,b=c/4):b=c/(2*Math.PI)*Math.asin(1/d),1>a?-.5*d*Math.pow(2,10*(a-=1))*Math.sin(2*(1*a-b)*Math.PI/c):d*Math.pow(2,-10*(a-=1))*Math.sin(2*(1*a-b)*Math.PI/c)*.5+1)},easeInBack:function(a){var b=1.70158;return 1*(a/=1)*a*((b+1)*a-b)},easeOutBack:function(a){var b=1.70158;return 1*((a=a/1-1)*a*((b+1)*a+b)+1)},easeInOutBack:function(a){var b=1.70158;return(a/=.5)<1?.5*a*a*(((b*=1.525)+1)*a-b):.5*((a-=2)*a*(((b*=1.525)+1)*a+b)+2)},easeInBounce:function(a){return 1-w.easeOutBounce(1-a)},easeOutBounce:function(a){return(a/=1)<1/2.75?7.5625*a*a:2/2.75>a?1*(7.5625*(a-=1.5/2.75)*a+.75):2.5/2.75>a?1*(7.5625*(a-=2.25/2.75)*a+.9375):1*(7.5625*(a-=2.625/2.75)*a+.984375)},easeInOutBounce:function(a){return.5>a?.5*w.easeInBounce(2*a):.5*w.easeOutBounce(2*a-1)+.5}}),x=d.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){return window.setTimeout(a,1e3/60)}}(),y=d.cancelAnimFrame=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(a){return window.clearTimeout(a,1e3/60)}}(),z=(d.animationLoop=function(a,b,c,d,e,f){var g=0,h=w[c]||w.linear,i=function(){g++;var c=g/b,j=h(c);a.call(f,j,c,g),d.call(f,j,c),b>g?f.animationFrame=x(i):e.apply(f)};x(i)},d.getRelativePosition=function(a){var b,c,d=a.originalEvent||a,e=a.currentTarget||a.srcElement,f=e.getBoundingClientRect();return d.touches?(b=d.touches[0].clientX-f.left,c=d.touches[0].clientY-f.top):(b=d.clientX-f.left,c=d.clientY-f.top),{x:b,y:c}},d.addEvent=function(a,b,c){a.addEventListener?a.addEventListener(b,c):a.attachEvent?a.attachEvent("on"+b,c):a["on"+b]=c}),A=d.removeEvent=function(a,b,c){a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent?a.detachEvent("on"+b,c):a["on"+b]=k},B=(d.bindEvents=function(a,b,c){a.events||(a.events={}),e(b,function(b){a.events[b]=function(){c.apply(a,arguments)},z(a.chart.canvas,b,a.events[b])})},d.unbindEvents=function(a,b){e(b,function(b,c){A(a.chart.canvas,c,b)})}),C=d.getMaximumWidth=function(a){var b=a.parentNode;return b.clientWidth},D=d.getMaximumHeight=function(a){var b=a.parentNode;return b.clientHeight},E=(d.getMaximumSize=d.getMaximumWidth,d.retinaScale=function(a){var b=a.ctx,c=a.canvas.width,d=a.canvas.height;window.devicePixelRatio&&(b.canvas.style.width=c+"px",b.canvas.style.height=d+"px",b.canvas.height=d*window.devicePixelRatio,b.canvas.width=c*window.devicePixelRatio,b.scale(window.devicePixelRatio,window.devicePixelRatio))}),F=d.clear=function(a){a.ctx.clearRect(0,0,a.width,a.height)},G=d.fontString=function(a,b,c){return b+" "+a+"px "+c},H=d.longestText=function(a,b,c){a.font=b;var d=0;return e(c,function(b){var c=a.measureText(b).width;d=c>d?c:d}),d},I=d.drawRoundedRectangle=function(a,b,c,d,e,f){a.beginPath(),a.moveTo(b+f,c),a.lineTo(b+d-f,c),a.quadraticCurveTo(b+d,c,b+d,c+f),a.lineTo(b+d,c+e-f),a.quadraticCurveTo(b+d,c+e,b+d-f,c+e),a.lineTo(b+f,c+e),a.quadraticCurveTo(b,c+e,b,c+e-f),a.lineTo(b,c+f),a.quadraticCurveTo(b,c,b+f,c),a.closePath()};c.instances={},c.Type=function(a,b,d){this.options=b,this.chart=d,this.id=l(),c.instances[this.id]=this,b.responsive&&this.resize(),this.initialize.call(this,a)},g(c.Type.prototype,{initialize:function(){return this},clear:function(){return F(this.chart),this},stop:function(){return y(this.animationFrame),this},resize:function(a){this.stop();var b=this.chart.canvas,c=C(this.chart.canvas),d=this.options.maintainAspectRatio?c/this.chart.aspectRatio:D(this.chart.canvas);return b.width=this.chart.width=c,b.height=this.chart.height=d,E(this.chart),"function"==typeof a&&a.apply(this,Array.prototype.slice.call(arguments,1)),this},reflow:k,render:function(a){return a&&this.reflow(),this.options.animation&&!a?d.animationLoop(this.draw,this.options.animationSteps,this.options.animationEasing,this.options.onAnimationProgress,this.options.onAnimationComplete,this):(this.draw(),this.options.onAnimationComplete.call(this)),this},generateLegend:function(){return v(this.options.legendTemplate,this)},destroy:function(){this.clear(),B(this,this.events);var a=this.chart.canvas;a.width=this.chart.width,a.height=this.chart.height,a.style.removeProperty?(a.style.removeProperty("width"),a.style.removeProperty("height")):(a.style.removeAttribute("width"),a.style.removeAttribute("height")),delete c.instances[this.id]},showTooltip:function(a,b){"undefined"==typeof this.activeElements&&(this.activeElements=[]);var f=function(a){var b=!1;return a.length!==this.activeElements.length?b=!0:(e(a,function(a,c){a!==this.activeElements[c]&&(b=!0)},this),b)}.call(this,a);if(f||b){if(this.activeElements=a,this.draw(),this.options.customTooltips&&this.options.customTooltips(!1),a.length>0)if(this.datasets&&this.datasets.length>1){for(var g,h,j=this.datasets.length-1;j>=0&&(g=this.datasets[j].points||this.datasets[j].bars||this.datasets[j].segments,h=i(g,a[0]),-1===h);j--);var k=[],l=[],m=function(){var a,b,c,e,f,g=[],i=[],j=[];return d.each(this.datasets,function(b){a=b.points||b.bars||b.segments,a[h]&&a[h].hasValue()&&g.push(a[h])}),d.each(g,function(a){i.push(a.x),j.push(a.y),k.push(d.template(this.options.multiTooltipTemplate,a)),l.push({fill:a._saved.fillColor||a.fillColor,stroke:a._saved.strokeColor||a.strokeColor})},this),f=q(j),c=p(j),e=q(i),b=p(i),{x:e>this.chart.width/2?e:b,y:(f+c)/2}}.call(this,h);new c.MultiTooltip({x:m.x,y:m.y,xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,xOffset:this.options.tooltipXOffset,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,titleTextColor:this.options.tooltipTitleFontColor,titleFontFamily:this.options.tooltipTitleFontFamily,titleFontStyle:this.options.tooltipTitleFontStyle,titleFontSize:this.options.tooltipTitleFontSize,cornerRadius:this.options.tooltipCornerRadius,labels:k,legendColors:l,legendColorBackground:this.options.multiTooltipKeyBackground,title:a[0].label,chart:this.chart,ctx:this.chart.ctx,custom:this.options.customTooltips}).draw()}else e(a,function(a){var b=a.tooltipPosition();new c.Tooltip({x:Math.round(b.x),y:Math.round(b.y),xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,caretHeight:this.options.tooltipCaretSize,cornerRadius:this.options.tooltipCornerRadius,text:v(this.options.tooltipTemplate,a),chart:this.chart,custom:this.options.customTooltips}).draw()},this);return this}},toBase64Image:function(){return this.chart.canvas.toDataURL.apply(this.chart.canvas,arguments)}}),c.Type.extend=function(a){var b=this,d=function(){return b.apply(this,arguments)};if(d.prototype=f(b.prototype),g(d.prototype,a),d.extend=c.Type.extend,a.name||b.prototype.name){var e=a.name||b.prototype.name,i=c.defaults[b.prototype.name]?f(c.defaults[b.prototype.name]):{};c.defaults[e]=g(i,a.defaults),c.types[e]=d,c.prototype[e]=function(a,b){var f=h(c.defaults.global,c.defaults[e],b||{});return new d(a,f,this)}}else m("Name not provided for this chart, so it hasn't been registered");return b},c.Element=function(a){g(this,a),this.initialize.apply(this,arguments),this.save()},g(c.Element.prototype,{initialize:function(){},restore:function(a){return a?e(a,function(a){this[a]=this._saved[a]},this):g(this,this._saved),this},save:function(){return this._saved=f(this),delete this._saved._saved,this},update:function(a){return e(a,function(a,b){this._saved[b]=this[b],this[b]=a},this),this},transition:function(a,b){return e(a,function(a,c){this[c]=(a-this._saved[c])*b+this._saved[c]},this),this},tooltipPosition:function(){return{x:this.x,y:this.y}},hasValue:function(){return o(this.value)}}),c.Element.extend=j,c.Point=c.Element.extend({display:!0,inRange:function(a,b){var c=this.hitDetectionRadius+this.radius;return Math.pow(a-this.x,2)+Math.pow(b-this.y,2)<Math.pow(c,2)},draw:function(){if(this.display){var a=this.ctx;a.beginPath(),a.arc(this.x,this.y,this.radius,0,2*Math.PI),a.closePath(),a.strokeStyle=this.strokeColor,a.lineWidth=this.strokeWidth,a.fillStyle=this.fillColor,a.fill(),a.stroke()}}}),c.Arc=c.Element.extend({inRange:function(a,b){var c=d.getAngleFromPoint(this,{x:a,y:b}),e=c.angle>=this.startAngle&&c.angle<=this.endAngle,f=c.distance>=this.innerRadius&&c.distance<=this.outerRadius;return e&&f},tooltipPosition:function(){var a=this.startAngle+(this.endAngle-this.startAngle)/2,b=(this.outerRadius-this.innerRadius)/2+this.innerRadius;return{x:this.x+Math.cos(a)*b,y:this.y+Math.sin(a)*b}},draw:function(a){var b=this.ctx;b.beginPath(),b.arc(this.x,this.y,this.outerRadius,this.startAngle,this.endAngle),b.arc(this.x,this.y,this.innerRadius,this.endAngle,this.startAngle,!0),b.closePath(),b.strokeStyle=this.strokeColor,b.lineWidth=this.strokeWidth,b.fillStyle=this.fillColor,b.fill(),b.lineJoin="bevel",this.showStroke&&b.stroke()}}),c.Rectangle=c.Element.extend({draw:function(){var a=this.ctx,b=this.width/2,c=this.x-b,d=this.x+b,e=this.base-(this.base-this.y),f=this.strokeWidth/2;this.showStroke&&(c+=f,d-=f,e+=f),a.beginPath(),a.fillStyle=this.fillColor,a.strokeStyle=this.strokeColor,a.lineWidth=this.strokeWidth,a.moveTo(c,this.base),a.lineTo(c,e),a.lineTo(d,e),a.lineTo(d,this.base),a.fill(),this.showStroke&&a.stroke()},height:function(){return this.base-this.y},inRange:function(a,b){return a>=this.x-this.width/2&&a<=this.x+this.width/2&&b>=this.y&&b<=this.base}}),c.Tooltip=c.Element.extend({draw:function(){var a=this.chart.ctx;a.font=G(this.fontSize,this.fontStyle,this.fontFamily),this.xAlign="center",this.yAlign="above";var b=this.caretPadding=2,c=a.measureText(this.text).width+2*this.xPadding,d=this.fontSize+2*this.yPadding,e=d+this.caretHeight+b;this.x+c/2>this.chart.width?this.xAlign="left":this.x-c/2<0&&(this.xAlign="right"),this.y-e<0&&(this.yAlign="below");var f=this.x-c/2,g=this.y-e;if(a.fillStyle=this.fillColor,this.custom)this.custom(this);else{switch(this.yAlign){case"above":a.beginPath(),a.moveTo(this.x,this.y-b),a.lineTo(this.x+this.caretHeight,this.y-(b+this.caretHeight)),a.lineTo(this.x-this.caretHeight,this.y-(b+this.caretHeight)),a.closePath(),a.fill();break;case"below":g=this.y+b+this.caretHeight,a.beginPath(),a.moveTo(this.x,this.y+b),a.lineTo(this.x+this.caretHeight,this.y+b+this.caretHeight),a.lineTo(this.x-this.caretHeight,this.y+b+this.caretHeight),a.closePath(),a.fill()}switch(this.xAlign){case"left":f=this.x-c+(this.cornerRadius+this.caretHeight);break;case"right":f=this.x-(this.cornerRadius+this.caretHeight)}I(a,f,g,c,d,this.cornerRadius),a.fill(),a.fillStyle=this.textColor,a.textAlign="center",a.textBaseline="middle",a.fillText(this.text,f+c/2,g+d/2)}}}),c.MultiTooltip=c.Element.extend({initialize:function(){this.font=G(this.fontSize,this.fontStyle,this.fontFamily),this.titleFont=G(this.titleFontSize,this.titleFontStyle,this.titleFontFamily),this.height=this.labels.length*this.fontSize+(this.labels.length-1)*(this.fontSize/2)+2*this.yPadding+1.5*this.titleFontSize,this.ctx.font=this.titleFont;var a=this.ctx.measureText(this.title).width,b=H(this.ctx,this.font,this.labels)+this.fontSize+3,c=p([b,a]);this.width=c+2*this.xPadding;var d=this.height/2;this.y-d<0?this.y=d:this.y+d>this.chart.height&&(this.y=this.chart.height-d),this.x>this.chart.width/2?this.x-=this.xOffset+this.width:this.x+=this.xOffset},getLineHeight:function(a){var b=this.y-this.height/2+this.yPadding,c=a-1;return 0===a?b+this.titleFontSize/2:b+(1.5*this.fontSize*c+this.fontSize/2)+1.5*this.titleFontSize},draw:function(){if(this.custom)this.custom(this);else{I(this.ctx,this.x,this.y-this.height/2,this.width,this.height,this.cornerRadius);var a=this.ctx;a.fillStyle=this.fillColor,a.fill(),a.closePath(),a.textAlign="left",a.textBaseline="middle",a.fillStyle=this.titleTextColor,a.font=this.titleFont,a.fillText(this.title,this.x+this.xPadding,this.getLineHeight(0)),a.font=this.font,d.each(this.labels,function(b,c){a.fillStyle=this.textColor,a.fillText(b,this.x+this.xPadding+this.fontSize+3,this.getLineHeight(c+1)),a.fillStyle=this.legendColorBackground,a.fillRect(this.x+this.xPadding,this.getLineHeight(c+1)-this.fontSize/2,this.fontSize,this.fontSize),a.fillStyle=this.legendColors[c].fill,a.fillRect(this.x+this.xPadding,this.getLineHeight(c+1)-this.fontSize/2,this.fontSize,this.fontSize)},this)}}}),c.Scale=c.Element.extend({initialize:function(){this.fit()},buildYLabels:function(){this.yLabels=[];for(var a=r(this.stepValue),b=0;b<=this.steps;b++)this.yLabels.push(v(this.templateString,{value:(this.min+b*this.stepValue).toFixed(a)}));this.yLabelWidth=this.display&&this.showLabels?H(this.ctx,this.font,this.yLabels):0},addXLabel:function(a){this.xLabels.push(a),this.valuesCount++,this.fit()},removeXLabel:function(){this.xLabels.shift(),this.valuesCount--,this.fit()},fit:function(){this.startPoint=this.display?this.fontSize:0,this.endPoint=this.display?this.height-1.5*this.fontSize-5:this.height,this.startPoint+=this.padding,this.endPoint-=this.padding;var a,b=this.endPoint-this.startPoint;for(this.calculateYRange(b),this.buildYLabels(),this.calculateXLabelRotation();b>this.endPoint-this.startPoint;)b=this.endPoint-this.startPoint,a=this.yLabelWidth,this.calculateYRange(b),this.buildYLabels(),a<this.yLabelWidth&&this.calculateXLabelRotation()},calculateXLabelRotation:function(){this.ctx.font=this.font;var a,b,c=this.ctx.measureText(this.xLabels[0]).width,d=this.ctx.measureText(this.xLabels[this.xLabels.length-1]).width;if(this.xScalePaddingRight=d/2+3,this.xScalePaddingLeft=c/2>this.yLabelWidth+10?c/2:this.yLabelWidth+10,this.xLabelRotation=0,this.display){var e,f=H(this.ctx,this.font,this.xLabels);this.xLabelWidth=f;for(var g=Math.floor(this.calculateX(1)-this.calculateX(0))-6;this.xLabelWidth>g&&0===this.xLabelRotation||this.xLabelWidth>g&&this.xLabelRotation<=90&&this.xLabelRotation>0;)e=Math.cos(s(this.xLabelRotation)),a=e*c,b=e*d,a+this.fontSize/2>this.yLabelWidth+8&&(this.xScalePaddingLeft=a+this.fontSize/2),this.xScalePaddingRight=this.fontSize/2,this.xLabelRotation++,this.xLabelWidth=e*f;this.xLabelRotation>0&&(this.endPoint-=Math.sin(s(this.xLabelRotation))*f+3)}else this.xLabelWidth=0,this.xScalePaddingRight=this.padding,this.xScalePaddingLeft=this.padding},calculateYRange:k,drawingArea:function(){return this.startPoint-this.endPoint},calculateY:function(a){var b=this.drawingArea()/(this.min-this.max);return this.endPoint-b*(a-this.min)},calculateX:function(a){var b=(this.xLabelRotation>0,this.width-(this.xScalePaddingLeft+this.xScalePaddingRight)),c=b/Math.max(this.valuesCount-(this.offsetGridLines?0:1),1),d=c*a+this.xScalePaddingLeft;return this.offsetGridLines&&(d+=c/2),Math.round(d)},update:function(a){d.extend(this,a),this.fit()},draw:function(){var a=this.ctx,b=(this.endPoint-this.startPoint)/this.steps,c=Math.round(this.xScalePaddingLeft);this.display&&(a.fillStyle=this.textColor,a.font=this.font,e(this.yLabels,function(e,f){var g=this.endPoint-b*f,h=Math.round(g),i=this.showHorizontalLines;a.textAlign="right",a.textBaseline="middle",this.showLabels&&a.fillText(e,c-10,g),0!==f||i||(i=!0),i&&a.beginPath(),f>0?(a.lineWidth=this.gridLineWidth,a.strokeStyle=this.gridLineColor):(a.lineWidth=this.lineWidth,a.strokeStyle=this.lineColor),h+=d.aliasPixel(a.lineWidth),i&&(a.moveTo(c,h),a.lineTo(this.width,h),a.stroke(),a.closePath()),a.lineWidth=this.lineWidth,a.strokeStyle=this.lineColor,a.beginPath(),a.moveTo(c-5,h),a.lineTo(c,h),a.stroke(),a.closePath()},this),e(this.xLabels,function(b,c){var d=this.calculateX(c)+t(this.lineWidth),e=this.calculateX(c-(this.offsetGridLines?.5:0))+t(this.lineWidth),f=this.xLabelRotation>0,g=this.showVerticalLines;0!==c||g||(g=!0),g&&a.beginPath(),c>0?(a.lineWidth=this.gridLineWidth,a.strokeStyle=this.gridLineColor):(a.lineWidth=this.lineWidth,a.strokeStyle=this.lineColor),g&&(a.moveTo(e,this.endPoint),a.lineTo(e,this.startPoint-3),a.stroke(),a.closePath()),a.lineWidth=this.lineWidth,a.strokeStyle=this.lineColor,a.beginPath(),a.moveTo(e,this.endPoint),a.lineTo(e,this.endPoint+5),a.stroke(),a.closePath(),a.save(),a.translate(d,f?this.endPoint+12:this.endPoint+8),a.rotate(-1*s(this.xLabelRotation)),a.font=this.font,a.textAlign=f?"right":"center",a.textBaseline=f?"middle":"top",a.fillText(b,0,0),a.restore()},this))}}),c.RadialScale=c.Element.extend({initialize:function(){this.size=q([this.height,this.width]),this.drawingArea=this.display?this.size/2-(this.fontSize/2+this.backdropPaddingY):this.size/2},calculateCenterOffset:function(a){var b=this.drawingArea/(this.max-this.min);return(a-this.min)*b},update:function(){this.lineArc?this.drawingArea=this.display?this.size/2-(this.fontSize/2+this.backdropPaddingY):this.size/2:this.setScaleSize(),this.buildYLabels()},buildYLabels:function(){this.yLabels=[];for(var a=r(this.stepValue),b=0;b<=this.steps;b++)this.yLabels.push(v(this.templateString,{value:(this.min+b*this.stepValue).toFixed(a)}))},getCircumference:function(){return 2*Math.PI/this.valuesCount},setScaleSize:function(){var a,b,c,d,e,f,g,h,i,j,k,l,m=q([this.height/2-this.pointLabelFontSize-5,this.width/2]),n=this.width,p=0;for(this.ctx.font=G(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily),b=0;b<this.valuesCount;b++)a=this.getPointPosition(b,m),c=this.ctx.measureText(v(this.templateString,{value:this.labels[b]})).width+5,0===b||b===this.valuesCount/2?(d=c/2,a.x+d>n&&(n=a.x+d,e=b),a.x-d<p&&(p=a.x-d,g=b)):b<this.valuesCount/2?a.x+c>n&&(n=a.x+c,e=b):b>this.valuesCount/2&&a.x-c<p&&(p=a.x-c,g=b);i=p,j=Math.ceil(n-this.width),f=this.getIndexAngle(e),h=this.getIndexAngle(g),k=j/Math.sin(f+Math.PI/2),l=i/Math.sin(h+Math.PI/2),k=o(k)?k:0,l=o(l)?l:0,this.drawingArea=m-(l+k)/2,this.setCenterPoint(l,k)},setCenterPoint:function(a,b){var c=this.width-b-this.drawingArea,d=a+this.drawingArea;this.xCenter=(d+c)/2,this.yCenter=this.height/2},getIndexAngle:function(a){var b=2*Math.PI/this.valuesCount;return a*b-Math.PI/2},getPointPosition:function(a,b){var c=this.getIndexAngle(a);return{x:Math.cos(c)*b+this.xCenter,y:Math.sin(c)*b+this.yCenter}},draw:function(){if(this.display){var a=this.ctx;if(e(this.yLabels,function(b,c){if(c>0){var d,e=c*(this.drawingArea/this.steps),f=this.yCenter-e;if(this.lineWidth>0)if(a.strokeStyle=this.lineColor,a.lineWidth=this.lineWidth,this.lineArc)a.beginPath(),a.arc(this.xCenter,this.yCenter,e,0,2*Math.PI),a.closePath(),a.stroke();else{a.beginPath();for(var g=0;g<this.valuesCount;g++)d=this.getPointPosition(g,this.calculateCenterOffset(this.min+c*this.stepValue)),0===g?a.moveTo(d.x,d.y):a.lineTo(d.x,d.y);a.closePath(),a.stroke()}if(this.showLabels){if(a.font=G(this.fontSize,this.fontStyle,this.fontFamily),this.showLabelBackdrop){var h=a.measureText(b).width;a.fillStyle=this.backdropColor,a.fillRect(this.xCenter-h/2-this.backdropPaddingX,f-this.fontSize/2-this.backdropPaddingY,h+2*this.backdropPaddingX,this.fontSize+2*this.backdropPaddingY)}a.textAlign="center",a.textBaseline="middle",a.fillStyle=this.fontColor,a.fillText(b,this.xCenter,f)}}},this),!this.lineArc){a.lineWidth=this.angleLineWidth,a.strokeStyle=this.angleLineColor;for(var b=this.valuesCount-1;b>=0;b--){if(this.angleLineWidth>0){var c=this.getPointPosition(b,this.calculateCenterOffset(this.max));a.beginPath(),a.moveTo(this.xCenter,this.yCenter),a.lineTo(c.x,c.y),a.stroke(),a.closePath()}var d=this.getPointPosition(b,this.calculateCenterOffset(this.max)+5);a.font=G(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily),a.fillStyle=this.pointLabelFontColor;var f=this.labels.length,g=this.labels.length/2,h=g/2,i=h>b||b>f-h,j=b===h||b===f-h;a.textAlign=0===b?"center":b===g?"center":g>b?"left":"right",a.textBaseline=j?"middle":i?"bottom":"top",a.fillText(this.labels[b],d.x,d.y)}}}}}),d.addEvent(window,"resize",function(){var a;return function(){clearTimeout(a),a=setTimeout(function(){e(c.instances,function(a){a.options.responsive&&a.resize(a.render,!0)})},50)}}()),n?define(function(){return c}):"object"==typeof module&&module.exports&&(module.exports=c),a.Chart=c,c.noConflict=function(){return a.Chart=b,c}}).call(this),function(){"use strict";var a=this,b=a.Chart,c=b.helpers,d={scaleBeginAtZero:!0,scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleShowHorizontalLines:!0,scaleShowVerticalLines:!0,barShowStroke:!0,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].fillColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'};b.Type.extend({name:"Bar",defaults:d,initialize:function(a){var d=this.options;this.ScaleClass=b.Scale.extend({offsetGridLines:!0,calculateBarX:function(a,b,c){var e=this.calculateBaseWidth(),f=this.calculateX(c)-e/2,g=this.calculateBarWidth(a);return f+g*b+b*d.barDatasetSpacing+g/2},calculateBaseWidth:function(){return this.calculateX(1)-this.calculateX(0)-2*d.barValueSpacing},calculateBarWidth:function(a){var b=this.calculateBaseWidth()-(a-1)*d.barDatasetSpacing;return b/a}}),this.datasets=[],this.options.showTooltips&&c.bindEvents(this,this.options.tooltipEvents,function(a){var b="mouseout"!==a.type?this.getBarsAtEvent(a):[];this.eachBars(function(a){a.restore(["fillColor","strokeColor"])}),c.each(b,function(a){a.fillColor=a.highlightFill,a.strokeColor=a.highlightStroke}),this.showTooltip(b)}),this.BarClass=b.Rectangle.extend({strokeWidth:this.options.barStrokeWidth,showStroke:this.options.barShowStroke,ctx:this.chart.ctx}),c.each(a.datasets,function(b){var d={label:b.label||null,fillColor:b.fillColor,strokeColor:b.strokeColor,bars:[]};this.datasets.push(d),c.each(b.data,function(c,e){d.bars.push(new this.BarClass({value:c,label:a.labels[e],datasetLabel:b.label,strokeColor:b.strokeColor,fillColor:b.fillColor,highlightFill:b.highlightFill||b.fillColor,highlightStroke:b.highlightStroke||b.strokeColor}))},this)},this),this.buildScale(a.labels),this.BarClass.prototype.base=this.scale.endPoint,this.eachBars(function(a,b,d){c.extend(a,{width:this.scale.calculateBarWidth(this.datasets.length),x:this.scale.calculateBarX(this.datasets.length,d,b),y:this.scale.endPoint}),a.save()},this),this.render()},update:function(){this.scale.update(),c.each(this.activeElements,function(a){a.restore(["fillColor","strokeColor"])}),this.eachBars(function(a){a.save()}),this.render()},eachBars:function(a){c.each(this.datasets,function(b,d){c.each(b.bars,a,this,d)},this)},getBarsAtEvent:function(a){for(var b,d=[],e=c.getRelativePosition(a),f=function(a){d.push(a.bars[b])},g=0;g<this.datasets.length;g++)for(b=0;b<this.datasets[g].bars.length;b++)if(this.datasets[g].bars[b].inRange(e.x,e.y))return c.each(this.datasets,f),d;return d},buildScale:function(a){var b=this,d=function(){var a=[];return b.eachBars(function(b){a.push(b.value)}),a},e={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,valuesCount:a.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(a){var b=c.calculateScaleRange(d(),a,this.fontSize,this.beginAtZero,this.integersOnly);c.extend(this,b)},xLabels:a,font:c.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,showHorizontalLines:this.options.scaleShowHorizontalLines,showVerticalLines:this.options.scaleShowVerticalLines,gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:this.options.showScale?0:this.options.barShowStroke?this.options.barStrokeWidth:0,showLabels:this.options.scaleShowLabels,display:this.options.showScale};this.options.scaleOverride&&c.extend(e,{calculateYRange:c.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,
max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}),this.scale=new this.ScaleClass(e)},addData:function(a,b){c.each(a,function(a,c){this.datasets[c].bars.push(new this.BarClass({value:a,label:b,x:this.scale.calculateBarX(this.datasets.length,c,this.scale.valuesCount+1),y:this.scale.endPoint,width:this.scale.calculateBarWidth(this.datasets.length),base:this.scale.endPoint,strokeColor:this.datasets[c].strokeColor,fillColor:this.datasets[c].fillColor}))},this),this.scale.addXLabel(b),this.update()},removeData:function(){this.scale.removeXLabel(),c.each(this.datasets,function(a){a.bars.shift()},this),this.update()},reflow:function(){c.extend(this.BarClass.prototype,{y:this.scale.endPoint,base:this.scale.endPoint});var a=c.extend({height:this.chart.height,width:this.chart.width});this.scale.update(a)},draw:function(a){var b=a||1;this.clear(),this.chart.ctx,this.scale.draw(b),c.each(this.datasets,function(a,d){c.each(a.bars,function(a,c){a.hasValue()&&(a.base=this.scale.endPoint,a.transition({x:this.scale.calculateBarX(this.datasets.length,d,c),y:this.scale.calculateY(a.value),width:this.scale.calculateBarWidth(this.datasets.length)},b).draw())},this)},this)}})}.call(this),function(){"use strict";var a=this,b=a.Chart,c=b.helpers,d={segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,percentageInnerCutout:50,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>'};b.Type.extend({name:"Doughnut",defaults:d,initialize:function(a){this.segments=[],this.outerRadius=(c.min([this.chart.width,this.chart.height])-this.options.segmentStrokeWidth/2)/2,this.SegmentArc=b.Arc.extend({ctx:this.chart.ctx,x:this.chart.width/2,y:this.chart.height/2}),this.options.showTooltips&&c.bindEvents(this,this.options.tooltipEvents,function(a){var b="mouseout"!==a.type?this.getSegmentsAtEvent(a):[];c.each(this.segments,function(a){a.restore(["fillColor"])}),c.each(b,function(a){a.fillColor=a.highlightColor}),this.showTooltip(b)}),this.calculateTotal(a),c.each(a,function(a,b){this.addData(a,b,!0)},this),this.render()},getSegmentsAtEvent:function(a){var b=[],d=c.getRelativePosition(a);return c.each(this.segments,function(a){a.inRange(d.x,d.y)&&b.push(a)},this),b},addData:function(a,b,c){var d=b||this.segments.length;this.segments.splice(d,0,new this.SegmentArc({value:a.value,outerRadius:this.options.animateScale?0:this.outerRadius,innerRadius:this.options.animateScale?0:this.outerRadius/100*this.options.percentageInnerCutout,fillColor:a.color,highlightColor:a.highlight||a.color,showStroke:this.options.segmentShowStroke,strokeWidth:this.options.segmentStrokeWidth,strokeColor:this.options.segmentStrokeColor,startAngle:1.5*Math.PI,circumference:this.options.animateRotate?0:this.calculateCircumference(a.value),label:a.label})),c||(this.reflow(),this.update())},calculateCircumference:function(a){return 2*Math.PI*(Math.abs(a)/this.total)},calculateTotal:function(a){this.total=0,c.each(a,function(a){this.total+=Math.abs(a.value)},this)},update:function(){this.calculateTotal(this.segments),c.each(this.activeElements,function(a){a.restore(["fillColor"])}),c.each(this.segments,function(a){a.save()}),this.render()},removeData:function(a){var b=c.isNumber(a)?a:this.segments.length-1;this.segments.splice(b,1),this.reflow(),this.update()},reflow:function(){c.extend(this.SegmentArc.prototype,{x:this.chart.width/2,y:this.chart.height/2}),this.outerRadius=(c.min([this.chart.width,this.chart.height])-this.options.segmentStrokeWidth/2)/2,c.each(this.segments,function(a){a.update({outerRadius:this.outerRadius,innerRadius:this.outerRadius/100*this.options.percentageInnerCutout})},this)},draw:function(a){var b=a?a:1;this.clear(),c.each(this.segments,function(a,c){a.transition({circumference:this.calculateCircumference(a.value),outerRadius:this.outerRadius,innerRadius:this.outerRadius/100*this.options.percentageInnerCutout},b),a.endAngle=a.startAngle+a.circumference,a.draw(),0===c&&(a.startAngle=1.5*Math.PI),c<this.segments.length-1&&(this.segments[c+1].startAngle=a.endAngle)},this)}}),b.types.Doughnut.extend({name:"Pie",defaults:c.merge(d,{percentageInnerCutout:0})})}.call(this),function(){"use strict";var a=this,b=a.Chart,c=b.helpers,d={scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleShowHorizontalLines:!0,scaleShowVerticalLines:!0,bezierCurve:!0,bezierCurveTension:.4,pointDot:!0,pointDotRadius:4,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'};b.Type.extend({name:"Line",defaults:d,initialize:function(a){this.PointClass=b.Point.extend({strokeWidth:this.options.pointDotStrokeWidth,radius:this.options.pointDotRadius,display:this.options.pointDot,hitDetectionRadius:this.options.pointHitDetectionRadius,ctx:this.chart.ctx,inRange:function(a){return Math.pow(a-this.x,2)<Math.pow(this.radius+this.hitDetectionRadius,2)}}),this.datasets=[],this.options.showTooltips&&c.bindEvents(this,this.options.tooltipEvents,function(a){var b="mouseout"!==a.type?this.getPointsAtEvent(a):[];this.eachPoints(function(a){a.restore(["fillColor","strokeColor"])}),c.each(b,function(a){a.fillColor=a.highlightFill,a.strokeColor=a.highlightStroke}),this.showTooltip(b)}),c.each(a.datasets,function(b){var d={label:b.label||null,fillColor:b.fillColor,strokeColor:b.strokeColor,pointColor:b.pointColor,pointStrokeColor:b.pointStrokeColor,points:[]};this.datasets.push(d),c.each(b.data,function(c,e){d.points.push(new this.PointClass({value:c,label:a.labels[e],datasetLabel:b.label,strokeColor:b.pointStrokeColor,fillColor:b.pointColor,highlightFill:b.pointHighlightFill||b.pointColor,highlightStroke:b.pointHighlightStroke||b.pointStrokeColor}))},this),this.buildScale(a.labels),this.eachPoints(function(a,b){c.extend(a,{x:this.scale.calculateX(b),y:this.scale.endPoint}),a.save()},this)},this),this.render()},update:function(){this.scale.update(),c.each(this.activeElements,function(a){a.restore(["fillColor","strokeColor"])}),this.eachPoints(function(a){a.save()}),this.render()},eachPoints:function(a){c.each(this.datasets,function(b){c.each(b.points,a,this)},this)},getPointsAtEvent:function(a){var b=[],d=c.getRelativePosition(a);return c.each(this.datasets,function(a){c.each(a.points,function(a){a.inRange(d.x,d.y)&&b.push(a)})},this),b},buildScale:function(a){var d=this,e=function(){var a=[];return d.eachPoints(function(b){a.push(b.value)}),a},f={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,valuesCount:a.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(a){var b=c.calculateScaleRange(e(),a,this.fontSize,this.beginAtZero,this.integersOnly);c.extend(this,b)},xLabels:a,font:c.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,showHorizontalLines:this.options.scaleShowHorizontalLines,showVerticalLines:this.options.scaleShowVerticalLines,gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:this.options.showScale?0:this.options.pointDotRadius+this.options.pointDotStrokeWidth,showLabels:this.options.scaleShowLabels,display:this.options.showScale};this.options.scaleOverride&&c.extend(f,{calculateYRange:c.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}),this.scale=new b.Scale(f)},addData:function(a,b){c.each(a,function(a,c){this.datasets[c].points.push(new this.PointClass({value:a,label:b,x:this.scale.calculateX(this.scale.valuesCount+1),y:this.scale.endPoint,strokeColor:this.datasets[c].pointStrokeColor,fillColor:this.datasets[c].pointColor}))},this),this.scale.addXLabel(b),this.update()},removeData:function(){this.scale.removeXLabel(),c.each(this.datasets,function(a){a.points.shift()},this),this.update()},reflow:function(){var a=c.extend({height:this.chart.height,width:this.chart.width});this.scale.update(a)},draw:function(a){var b=a||1;this.clear();var d=this.chart.ctx,e=function(a){return null!==a.value},f=function(a,b,d){return c.findNextWhere(b,e,d)||a},g=function(a,b,d){return c.findPreviousWhere(b,e,d)||a};this.scale.draw(b),c.each(this.datasets,function(a){var h=c.where(a.points,e);c.each(a.points,function(a,c){a.hasValue()&&a.transition({y:this.scale.calculateY(a.value),x:this.scale.calculateX(c)},b)},this),this.options.bezierCurve&&c.each(h,function(a,b){var d=b>0&&b<h.length-1?this.options.bezierCurveTension:0;a.controlPoints=c.splineCurve(g(a,h,b),a,f(a,h,b),d),a.controlPoints.outer.y>this.scale.endPoint?a.controlPoints.outer.y=this.scale.endPoint:a.controlPoints.outer.y<this.scale.startPoint&&(a.controlPoints.outer.y=this.scale.startPoint),a.controlPoints.inner.y>this.scale.endPoint?a.controlPoints.inner.y=this.scale.endPoint:a.controlPoints.inner.y<this.scale.startPoint&&(a.controlPoints.inner.y=this.scale.startPoint)},this),d.lineWidth=this.options.datasetStrokeWidth,d.strokeStyle=a.strokeColor,d.beginPath(),c.each(h,function(a,b){if(0===b)d.moveTo(a.x,a.y);else if(this.options.bezierCurve){var c=g(a,h,b);d.bezierCurveTo(c.controlPoints.outer.x,c.controlPoints.outer.y,a.controlPoints.inner.x,a.controlPoints.inner.y,a.x,a.y)}else d.lineTo(a.x,a.y)},this),d.stroke(),this.options.datasetFill&&h.length>0&&(d.lineTo(h[h.length-1].x,this.scale.endPoint),d.lineTo(h[0].x,this.scale.endPoint),d.fillStyle=a.fillColor,d.closePath(),d.fill()),c.each(h,function(a){a.draw()})},this)}})}.call(this),function(){"use strict";var a=this,b=a.Chart,c=b.helpers,d={scaleShowLabelBackdrop:!0,scaleBackdropColor:"rgba(255,255,255,0.75)",scaleBeginAtZero:!0,scaleBackdropPaddingY:2,scaleBackdropPaddingX:2,scaleShowLine:!0,segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>'};b.Type.extend({name:"PolarArea",defaults:d,initialize:function(a){this.segments=[],this.SegmentArc=b.Arc.extend({showStroke:this.options.segmentShowStroke,strokeWidth:this.options.segmentStrokeWidth,strokeColor:this.options.segmentStrokeColor,ctx:this.chart.ctx,innerRadius:0,x:this.chart.width/2,y:this.chart.height/2}),this.scale=new b.RadialScale({display:this.options.showScale,fontStyle:this.options.scaleFontStyle,fontSize:this.options.scaleFontSize,fontFamily:this.options.scaleFontFamily,fontColor:this.options.scaleFontColor,showLabels:this.options.scaleShowLabels,showLabelBackdrop:this.options.scaleShowLabelBackdrop,backdropColor:this.options.scaleBackdropColor,backdropPaddingY:this.options.scaleBackdropPaddingY,backdropPaddingX:this.options.scaleBackdropPaddingX,lineWidth:this.options.scaleShowLine?this.options.scaleLineWidth:0,lineColor:this.options.scaleLineColor,lineArc:!0,width:this.chart.width,height:this.chart.height,xCenter:this.chart.width/2,yCenter:this.chart.height/2,ctx:this.chart.ctx,templateString:this.options.scaleLabel,valuesCount:a.length}),this.updateScaleRange(a),this.scale.update(),c.each(a,function(a,b){this.addData(a,b,!0)},this),this.options.showTooltips&&c.bindEvents(this,this.options.tooltipEvents,function(a){var b="mouseout"!==a.type?this.getSegmentsAtEvent(a):[];c.each(this.segments,function(a){a.restore(["fillColor"])}),c.each(b,function(a){a.fillColor=a.highlightColor}),this.showTooltip(b)}),this.render()},getSegmentsAtEvent:function(a){var b=[],d=c.getRelativePosition(a);return c.each(this.segments,function(a){a.inRange(d.x,d.y)&&b.push(a)},this),b},addData:function(a,b,c){var d=b||this.segments.length;this.segments.splice(d,0,new this.SegmentArc({fillColor:a.color,highlightColor:a.highlight||a.color,label:a.label,value:a.value,outerRadius:this.options.animateScale?0:this.scale.calculateCenterOffset(a.value),circumference:this.options.animateRotate?0:this.scale.getCircumference(),startAngle:1.5*Math.PI})),c||(this.reflow(),this.update())},removeData:function(a){var b=c.isNumber(a)?a:this.segments.length-1;this.segments.splice(b,1),this.reflow(),this.update()},calculateTotal:function(a){this.total=0,c.each(a,function(a){this.total+=a.value},this),this.scale.valuesCount=this.segments.length},updateScaleRange:function(a){var b=[];c.each(a,function(a){b.push(a.value)});var d=this.options.scaleOverride?{steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}:c.calculateScaleRange(b,c.min([this.chart.width,this.chart.height])/2,this.options.scaleFontSize,this.options.scaleBeginAtZero,this.options.scaleIntegersOnly);c.extend(this.scale,d,{size:c.min([this.chart.width,this.chart.height]),xCenter:this.chart.width/2,yCenter:this.chart.height/2})},update:function(){this.calculateTotal(this.segments),c.each(this.segments,function(a){a.save()}),this.reflow(),this.render()},reflow:function(){c.extend(this.SegmentArc.prototype,{x:this.chart.width/2,y:this.chart.height/2}),this.updateScaleRange(this.segments),this.scale.update(),c.extend(this.scale,{xCenter:this.chart.width/2,yCenter:this.chart.height/2}),c.each(this.segments,function(a){a.update({outerRadius:this.scale.calculateCenterOffset(a.value)})},this)},draw:function(a){var b=a||1;this.clear(),c.each(this.segments,function(a,c){a.transition({circumference:this.scale.getCircumference(),outerRadius:this.scale.calculateCenterOffset(a.value)},b),a.endAngle=a.startAngle+a.circumference,0===c&&(a.startAngle=1.5*Math.PI),c<this.segments.length-1&&(this.segments[c+1].startAngle=a.endAngle),a.draw()},this),this.scale.draw()}})}.call(this),function(){"use strict";var a=this,b=a.Chart,c=b.helpers;b.Type.extend({name:"Radar",defaults:{scaleShowLine:!0,angleShowLineOut:!0,scaleShowLabels:!1,scaleBeginAtZero:!0,angleLineColor:"rgba(0,0,0,.1)",angleLineWidth:1,pointLabelFontFamily:"'Arial'",pointLabelFontStyle:"normal",pointLabelFontSize:10,pointLabelFontColor:"#666",pointDot:!0,pointDotRadius:3,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'},initialize:function(a){this.PointClass=b.Point.extend({strokeWidth:this.options.pointDotStrokeWidth,radius:this.options.pointDotRadius,display:this.options.pointDot,hitDetectionRadius:this.options.pointHitDetectionRadius,ctx:this.chart.ctx}),this.datasets=[],this.buildScale(a),this.options.showTooltips&&c.bindEvents(this,this.options.tooltipEvents,function(a){var b="mouseout"!==a.type?this.getPointsAtEvent(a):[];this.eachPoints(function(a){a.restore(["fillColor","strokeColor"])}),c.each(b,function(a){a.fillColor=a.highlightFill,a.strokeColor=a.highlightStroke}),this.showTooltip(b)}),c.each(a.datasets,function(b){var d={label:b.label||null,fillColor:b.fillColor,strokeColor:b.strokeColor,pointColor:b.pointColor,pointStrokeColor:b.pointStrokeColor,points:[]};this.datasets.push(d),c.each(b.data,function(c,e){var f;this.scale.animation||(f=this.scale.getPointPosition(e,this.scale.calculateCenterOffset(c))),d.points.push(new this.PointClass({value:c,label:a.labels[e],datasetLabel:b.label,x:this.options.animation?this.scale.xCenter:f.x,y:this.options.animation?this.scale.yCenter:f.y,strokeColor:b.pointStrokeColor,fillColor:b.pointColor,highlightFill:b.pointHighlightFill||b.pointColor,highlightStroke:b.pointHighlightStroke||b.pointStrokeColor}))},this)},this),this.render()},eachPoints:function(a){c.each(this.datasets,function(b){c.each(b.points,a,this)},this)},getPointsAtEvent:function(a){var b=c.getRelativePosition(a),d=c.getAngleFromPoint({x:this.scale.xCenter,y:this.scale.yCenter},b),e=2*Math.PI/this.scale.valuesCount,f=Math.round((d.angle-1.5*Math.PI)/e),g=[];return(f>=this.scale.valuesCount||0>f)&&(f=0),d.distance<=this.scale.drawingArea&&c.each(this.datasets,function(a){g.push(a.points[f])}),g},buildScale:function(a){this.scale=new b.RadialScale({display:this.options.showScale,fontStyle:this.options.scaleFontStyle,fontSize:this.options.scaleFontSize,fontFamily:this.options.scaleFontFamily,fontColor:this.options.scaleFontColor,showLabels:this.options.scaleShowLabels,showLabelBackdrop:this.options.scaleShowLabelBackdrop,backdropColor:this.options.scaleBackdropColor,backdropPaddingY:this.options.scaleBackdropPaddingY,backdropPaddingX:this.options.scaleBackdropPaddingX,lineWidth:this.options.scaleShowLine?this.options.scaleLineWidth:0,lineColor:this.options.scaleLineColor,angleLineColor:this.options.angleLineColor,angleLineWidth:this.options.angleShowLineOut?this.options.angleLineWidth:0,pointLabelFontColor:this.options.pointLabelFontColor,pointLabelFontSize:this.options.pointLabelFontSize,pointLabelFontFamily:this.options.pointLabelFontFamily,pointLabelFontStyle:this.options.pointLabelFontStyle,height:this.chart.height,width:this.chart.width,xCenter:this.chart.width/2,yCenter:this.chart.height/2,ctx:this.chart.ctx,templateString:this.options.scaleLabel,labels:a.labels,valuesCount:a.datasets[0].data.length}),this.scale.setScaleSize(),this.updateScaleRange(a.datasets),this.scale.buildYLabels()},updateScaleRange:function(a){var b=function(){var b=[];return c.each(a,function(a){a.data?b=b.concat(a.data):c.each(a.points,function(a){b.push(a.value)})}),b}(),d=this.options.scaleOverride?{steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}:c.calculateScaleRange(b,c.min([this.chart.width,this.chart.height])/2,this.options.scaleFontSize,this.options.scaleBeginAtZero,this.options.scaleIntegersOnly);c.extend(this.scale,d)},addData:function(a,b){this.scale.valuesCount++,c.each(a,function(a,c){var d=this.scale.getPointPosition(this.scale.valuesCount,this.scale.calculateCenterOffset(a));this.datasets[c].points.push(new this.PointClass({value:a,label:b,x:d.x,y:d.y,strokeColor:this.datasets[c].pointStrokeColor,fillColor:this.datasets[c].pointColor}))},this),this.scale.labels.push(b),this.reflow(),this.update()},removeData:function(){this.scale.valuesCount--,this.scale.labels.shift(),c.each(this.datasets,function(a){a.points.shift()},this),this.reflow(),this.update()},update:function(){this.eachPoints(function(a){a.save()}),this.reflow(),this.render()},reflow:function(){c.extend(this.scale,{width:this.chart.width,height:this.chart.height,size:c.min([this.chart.width,this.chart.height]),xCenter:this.chart.width/2,yCenter:this.chart.height/2}),this.updateScaleRange(this.datasets),this.scale.setScaleSize(),this.scale.buildYLabels()},draw:function(a){var b=a||1,d=this.chart.ctx;this.clear(),this.scale.draw(),c.each(this.datasets,function(a){c.each(a.points,function(a,c){a.hasValue()&&a.transition(this.scale.getPointPosition(c,this.scale.calculateCenterOffset(a.value)),b)},this),d.lineWidth=this.options.datasetStrokeWidth,d.strokeStyle=a.strokeColor,d.beginPath(),c.each(a.points,function(a,b){0===b?d.moveTo(a.x,a.y):d.lineTo(a.x,a.y)},this),d.closePath(),d.stroke(),d.fillStyle=a.fillColor,d.fill(),c.each(a.points,function(a){a.hasValue()&&a.draw()})},this)}})}.call(this),function(a,b){"function"==typeof define&&define.amd?define(["Chart"],b):b("object"==typeof exports?require("Chart"):a.Chart)}(this,function(a){"use strict";var b=a.helpers,c={formatDateValue:function(a,b,c,e){a=new Date(+a);var f=e?a.getUTCMilliseconds():a.getMilliseconds();if(f)return("000"+f).slice(-3);var g=e?a.getUTCHours()+a.getUTCMinutes()+a.getUTCSeconds():a.getHours()+a.getMinutes()+a.getSeconds();return g?d(a,b||"h:MM",e):d(a,c||"mmm d",e)},getElementOrDefault:function(a,b,c){return b>=0&&b<a.length?a[b]:c},applyRange:function(a,b,c){return a>c?c:b>a?b:a},calculateFixedScaleRange:function(a,b,c){return{steps:b,stepValue:c,min:a,max:a+b*c}},ScatterPoint:a.Point.extend({inRange:function(a,b){var c=this.hitDetectionRadius+this.radius*this.size;return Math.pow(a-this.x,2)+Math.pow(b-this.y,2)<Math.pow(c,2)},draw:function(){if(this.display&&this.size>0){var a=this.ctx;a.beginPath(),a.arc(this.x,this.y,this.size*this.radius,0,2*Math.PI),a.closePath(),a.strokeStyle=this.strokeColor,a.lineWidth=this.strokeWidth,a.fillStyle=this.fillColor,a.fill(),a.stroke()}}})},d=function(){var a=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,b=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,c=/[^-+\dA-Z]/g,d=function(a,b){for(a=String(a),b=b||2;a.length<b;)a="0"+a;return a},e={"default":"ddd mmm dd yyyy HH:MM:ss"},f={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]};return function(g,h,i){if(1!=arguments.length||"[object String]"!=Object.prototype.toString.call(g)||/\d/.test(g)||(h=g,g=void 0),g=g?new Date(g):new Date,isNaN(g))throw SyntaxError("invalid date");h=String(e[h]||h||e["default"]),"UTC:"==h.slice(0,4)&&(h=h.slice(4),i=!0);var j=i?"getUTC":"get",k=g[j+"Date"](),l=g[j+"Day"](),m=g[j+"Month"](),n=g[j+"FullYear"](),o=g[j+"Hours"](),p=g[j+"Minutes"](),q=g[j+"Seconds"](),r=g[j+"Milliseconds"](),s=i?0:g.getTimezoneOffset(),t={d:k,dd:d(k),ddd:f.dayNames[l],dddd:f.dayNames[l+7],m:m+1,mm:d(m+1),mmm:f.monthNames[m],mmmm:f.monthNames[m+12],yy:String(n).slice(2),yyyy:n,h:o%12||12,hh:d(o%12||12),H:o,HH:d(o),M:p,MM:d(p),s:q,ss:d(q),l:d(r,3),L:d(r>99?Math.round(r/10):r),t:12>o?"a":"p",tt:12>o?"am":"pm",T:12>o?"A":"P",TT:12>o?"AM":"PM",Z:i?"UTC":(String(g).match(b)||[""]).pop().replace(c,""),o:(s>0?"-":"+")+d(100*Math.floor(Math.abs(s)/60)+Math.abs(s)%60,4),S:["th","st","nd","rd"][k%10>3?0:(k%100-k%10!=10)*k%10]};return h.replace(a,function(a){return a in t?t[a]:a.slice(1,a.length-1)})}}(),e={scaleArgLabel:"<%=value%>",scaleSizeLabel:"<%=value%>",emptyDataMessage:"chart has no data",scaleShowGridLines:!0,scaleGridLineWidth:1,scaleGridLineColor:"rgba(0,0,0,.05)",scaleShowHorizontalLines:!0,scaleShowVerticalLines:!0,scaleType:"number",useUtc:!0,scaleDateFormat:"mmm d",scaleTimeFormat:"h:MM",scaleDateTimeFormat:"mmm d, yyyy, hh:MM",datasetStroke:!0,datasetStrokeWidth:2,datasetStrokeColor:"#007ACC",datasetPointStrokeColor:"white",bezierCurve:!0,bezierCurveTension:.4,pointDot:!0,pointDotStrokeWidth:1,pointDotRadius:4,pointHitDetectionRadius:4,multiTooltipTemplate:"<%=argLabel%>; <%=valueLabel%>",tooltipTemplate:"<%if (datasetLabel){%><%=datasetLabel%>: <%}%><%=argLabel%>; <%=valueLabel%>",legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><%for(var i=0;i<datasets.length;i++){%><li><span class="<%=name.toLowerCase()%>-legend-marker" style="background-color:<%=datasets[i].strokeColor%>"></span><%=datasets[i].label%></li><%}%></ul>'};a.ScatterNumberScale=a.Element.extend({initialize:function(){this.font=b.fontString(this.fontSize,this.fontStyle,this.fontFamily),this.padding=this.fontSize/2},setDataRange:function(a){this.dataRange=a},api:{calculateControlPoints:function(a,b,d,e,f){var g=a?f:0,h=d?f:0,i=b,j=a?a:b,k=d?d:b,l={xx:i.arg-j.arg,yy:i.value-j.value},m={xx:k.arg-j.arg,yy:k.value-j.value},n=l.xx*m.xx+l.yy*m.yy,o=Math.sqrt(m.xx*m.xx+m.yy*m.yy),p=Math.min(Math.max(n/(o*o),.3),.7),q={before:{x:i.arg-m.xx*p*g,y:i.value-m.yy*p*g},after:{x:i.arg+m.xx*(1-p)*h,y:i.value+m.yy*(1-p)*h}};return q.before.y=c.applyRange(q.before.y,e.ymin,e.ymax),q.after.y=c.applyRange(q.after.y,e.ymin,e.ymax),q},generateLabels:function(a,c,d,e){var f=new Array(c+1),g=b.getDecimalPlaces(e);return a&&b.each(f,function(c,h){f[h]=b.template(a,{value:(d+e*h).toFixed(g)})}),f}},calculateYscaleRange:function(){this.scaleOverride?this.yScaleRange=c.calculateFixedScaleRange(this.scaleStartValue,this.scaleSteps,this.scaleStepWidth):this.yScaleRange=b.calculateScaleRange([this.dataRange.ymin,this.dataRange.ymax],this.chart.height,this.fontSize,this.beginAtZero,this.integersOnly)},calculateXscaleRange:function(){this.xScaleOverride?this.xScaleRange=c.calculateFixedScaleRange(this.xScaleStartValue,this.xScaleSteps,this.xScaleStepWidth):this.xScaleRange=b.calculateScaleRange([this.dataRange.xmin,this.dataRange.xmax],this.chart.width,this.fontSize,!1,!0)},generateYLabels:function(){this.yLabels=this.api.generateLabels(this.labelTemplate,this.yScaleRange.steps,this.yScaleRange.min,this.yScaleRange.stepValue)},generateXLabels:function(){this.xLabels=this.api.generateLabels(this.argLabelTemplate,this.xScaleRange.steps,this.xScaleRange.min,this.xScaleRange.stepValue)},argToString:function(a){return+a+""},fit:function(){this.calculateYscaleRange(),this.calculateXscaleRange(),this.generateYLabels(),this.generateXLabels();var a=b.longestText(this.chart.ctx,this.font,this.xLabels),c=b.longestText(this.chart.ctx,this.font,this.yLabels);this.xPadding=this.display&&this.showLabels?c+2*this.padding:this.padding;var d=Math.floor((this.chart.width-this.xPadding)/this.xScaleRange.steps),e=1.5*this.fontSize;this.xLabelRotation=a>d,this.xPaddingRight=this.display&&this.showLabels&&!this.xLabelRotation?a/2:this.padding,this.yPadding=this.display&&this.showLabels?(this.xLabelRotation?a:e)+2*this.padding:this.padding},updateBezierControlPoints:function(a,b,d){for(var e=0;e<a.length;e++){var f=c.getElementOrDefault(a,e),g=c.getElementOrDefault(a,e-1),h=c.getElementOrDefault(a,e+1),i=this.api.calculateControlPoints(g,f,h,this.dataRange,d);f.controlPoints={x1:this.calculateX(i.before.x),y1:this.calculateY(i.before.y,b),x2:this.calculateX(i.after.x),y2:this.calculateY(i.after.y,b)}}},updatePoints:function(a,b){for(var c=0;c<a.length;c++){var d=a[c];d.x=this.calculateX(d.arg),d.y=this.calculateY(d.value,b)}},calculateX:function(a){return this.xPadding+(a-this.xScaleRange.min)*(this.chart.width-this.xPadding-this.xPaddingRight)/(this.xScaleRange.max-this.xScaleRange.min)},calculateY:function(a,b){return this.chart.height-this.yPadding-(a-this.yScaleRange.min)*(this.chart.height-this.yPadding-this.padding)/(this.yScaleRange.max-this.yScaleRange.min)*(b||1)},draw:function(){var a,b,c=this.chart.ctx;if(this.display){var d=this.calculateX(this.xScaleRange.min),e=this.chart.width,f=this.calculateY(this.yScaleRange.min),g=0;for(b=0,a=this.yScaleRange.min;b<=this.yScaleRange.steps;b++,a+=this.yScaleRange.stepValue){var h=this.calculateY(a);(this.showLabels||this.showHorizontalLines)&&(c.lineWidth=0==b?this.lineWidth:this.gridLineWidth,c.strokeStyle=0==b?this.lineColor:this.gridLineColor,c.beginPath(),c.moveTo(d-this.padding,h),c.lineTo(this.showHorizontalLines||0==b?e:d,h),c.stroke()),this.showLabels&&(c.lineWidth=this.lineWidth,c.strokeStyle=this.lineColor,c.textAlign="right",c.textBaseline="middle",c.font=this.font,c.fillStyle=this.textColor,c.fillText(this.yLabels[b],d-1.4*this.padding,h))}for(b=0,a=this.xScaleRange.min;b<=this.xScaleRange.steps;b++,a+=this.xScaleRange.stepValue){var i=this.calculateX(a);(this.showLabels||this.showVerticalLines)&&(c.lineWidth=0==b?this.lineWidth:this.gridLineWidth,c.strokeStyle=0==b?this.lineColor:this.gridLineColor,c.beginPath(),c.moveTo(i,f+this.padding),c.lineTo(i,this.showVerticalLines||0==b?g:f),c.stroke()),this.showLabels&&(c.lineWidth=this.lineWidth,c.strokeStyle=this.lineColor,c.save(),c.translate(i,f+1.4*this.padding),c.rotate(this.xLabelRotation?-Math.PI/2:0),c.textAlign=this.xLabelRotation?"right":"center",c.textBaseline=this.xLabelRotation?"middle":"top",c.font=this.font,c.fillStyle=this.textColor,c.fillText(this.xLabels[b],0,0),c.restore())}}}}),a.ScatterDateScale=a.ScatterNumberScale.extend({_calculateDateScaleRange:function(a,b,c,d){var e=[{u:1,c:1,t:1,n:"ms"},{u:1,c:2,t:2,n:"ms"},{u:1,c:5,t:5,n:"ms"},{u:1,c:10,t:10,n:"ms"},{u:1,c:20,t:20,n:"ms"},{u:1,c:50,t:50,n:"ms"},{u:1,c:100,t:100,n:"ms"},{u:1,c:200,t:200,n:"ms"},{u:1,c:500,t:500,n:"ms"},{u:1e3,c:1,t:1e3,n:"s"},{u:1e3,c:2,t:2e3,n:"s"},{u:1e3,c:5,t:5e3,n:"s"},{u:1e3,c:10,t:1e4,n:"s"},{u:1e3,c:15,t:15e3,n:"s"},{u:1e3,c:20,t:2e4,n:"s"},{u:1e3,c:30,t:3e4,n:"s"},{u:6e4,c:1,t:6e4,n:"m"},{u:6e4,c:2,t:12e4,n:"m"},{u:6e4,c:5,t:3e5,n:"m"},{u:6e4,c:10,t:6e5,n:"m"},{u:6e4,c:15,t:9e5,n:"m"},{u:6e4,c:20,t:12e5,n:"m"},{u:6e4,c:30,t:18e5,n:"m"},{u:36e5,c:1,t:36e5,n:"h"},{u:36e5,c:2,t:72e5,n:"h"},{u:36e5,c:3,t:108e5,n:"h"},{u:36e5,c:4,t:144e5,n:"h"},{u:36e5,c:6,t:216e5,n:"h"},{u:36e5,c:8,t:288e5,n:"h"},{u:36e5,c:12,t:432e5,n:"h"},{u:864e5,c:1,t:864e5,n:"d"},{u:864e5,c:2,t:1728e5,n:"d"},{u:864e5,c:4,t:3456e5,n:"d"},{u:864e5,c:5,t:432e6,n:"d"},{u:6048e5,c:1,t:6048e5,n:"w"}],f=c/(3.3*d);b===a&&b++;for(var g=+b-a,h=this.useUtc?0:6e4*(new Date).getTimezoneOffset(),i=+a-h,j=+b-h,k=0,l=[2,3,5,7,10];g/e[k].t>f;)if(k++,k==e.length)for(var m=e[e.length-1],n=0;n<l.length;n++)e.push({u:m.u,c:m.c*l[n],t:m.c*l[n]*m.u,n:m.n});var o=e[k].t,p=Math.floor(i/o)*o,q=Math.ceil((j-p)/o),r=p+o*q;return{min:p+h,max:r+h,steps:q,stepValue:o}},calculateXscaleRange:function(){this.xScaleOverride?this.xScaleRange=c.calculateFixedScaleRange(this.xScaleStartValue,this.xScaleSteps,this.xScaleStepWidth):this.xScaleRange=this._calculateDateScaleRange(this.dataRange.xmin,this.dataRange.xmax,this.chart.width,this.fontSize)},argToString:function(a){return d(+a,this.dateTimeFormat,this.useUtc)},generateXLabels:function(){var a=this.xScaleRange.min,d=this.xScaleRange.stepValue,e=new Array(this.xScaleRange.steps+1);b.each(e,function(b,f){var g=a+d*f;e[f]=c.formatDateValue(g,this.timeFormat,this.dateFormat,this.useUtc)},this),this.xLabels=e}}),a.ScatterDataSet=function(){var a=function(a,b,c,d){this.chart=c,this.scale=d,this.label=a.label||null,this.strokeColor=a.strokeColor||b.datasetStrokeColor,this.pointColor=a.pointColor||a.strokeColor||b.datasetStrokeColor,this.pointStrokeColor=a.pointStrokeColor||b.datasetPointStrokeColor,this.pointDot=b.pointDot,this.pointDotRadius=b.pointDotRadius,this.pointHitDetectionRadius=b.pointHitDetectionRadius,this.pointDotStrokeWidth=b.pointDotStrokeWidth,this.scaleArgLabel=b.scaleArgLabel,this.scaleLabel=b.scaleLabel,this.scaleSizeLabel=b.scaleSizeLabel,this.points=[]};return a.prototype.addPoint=function(a,b,c){c=arguments.length<3?1:c;var d=this._createNewPoint();this._setPointData(d,a,b,c),this.points.push(d)},a.prototype.setPointData=function(a,b,d,e){e=arguments.length<4?1:e;var f=c.getElementOrDefault(this.points,a);f&&this._setPointData(f,b,d,e)},a.prototype.removePoint=function(a){a>=0&&a<this.points.length&&this.points.splice(a,1)},a.prototype._createNewPoint=function(){return new c.ScatterPoint({ctx:this.chart.ctx,datasetLabel:this.label,display:this.pointDot,radius:this.pointDotRadius,hitDetectionRadius:this.pointHitDetectionRadius,strokeWidth:this.pointDotStrokeWidth,strokeColor:this.pointStrokeColor,highlightStroke:this.pointColor,fillColor:this.pointColor,
highlightFill:this.pointStrokeColor})},a.prototype._setPointData=function(a,c,d,e){var f=this.scale.argToString(+c),g=+d+"",h=+e+"";a.arg=+c||0,a.value=+d||0,a.size=+e||0,a.argLabel=b.template(this.scaleArgLabel,{value:f}),a.valueLabel=b.template(this.scaleLabel,{value:g}),a.sizeLabel=b.template(this.scaleSizeLabel,{value:h})},a}(),a.Type.extend({name:"Scatter",defaults:e,initialize:function(c){this.datasets=[],this.scale=this._initScale(),c.datasets&&(c=c.datasets),b.each(c,function(c){var d=new a.ScatterDataSet(c,this.options,this.chart,this.scale);this.datasets.push(d),b.each(c.data,function(a){d.addPoint(a.x,a.y,a.r||1)})},this),this.options.showTooltips&&b.bindEvents(this,this.options.tooltipEvents,function(a){var c="mouseout"!==a.type?this.getPointsAtEvent(a):[];this._forEachPoint(function(a){a.restore(["fillColor","strokeColor"])}),b.each(c,function(a){a.fillColor=a.highlightFill,a.strokeColor=a.highlightStroke}),this.showTooltip(c)});var d=this._calculateRange();this.scale.setDataRange(d),this.update()},_initScale:function(){var b={chart:this.chart,textColor:this.options.scaleFontColor,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,labelTemplate:this.options.scaleLabel,argLabelTemplate:this.options.scaleArgLabel,showLabels:this.options.scaleShowLabels,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?this.options.scaleGridLineColor:"rgba(0,0,0,0)",showHorizontalLines:this.options.scaleShowHorizontalLines,showVerticalLines:this.options.scaleShowVerticalLines,lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,display:this.options.showScale,xScaleOverride:this.options.xScaleOverride,xScaleSteps:this.options.xScaleSteps,xScaleStepWidth:this.options.xScaleStepWidth,xScaleStartValue:this.options.xScaleStartValue,scaleOverride:this.options.scaleOverride,scaleSteps:this.options.scaleSteps,scaleStepWidth:this.options.scaleStepWidth,scaleStartValue:this.options.scaleStartValue,useUtc:this.options.useUtc,dateFormat:this.options.scaleDateFormat,timeFormat:this.options.scaleTimeFormat,dateTimeFormat:this.options.scaleDateTimeFormat};return"date"===this.options.scaleType?new a.ScatterDateScale(b):new a.ScatterNumberScale(b)},getPointsAtEvent:function(a){var c=[],d=b.getRelativePosition(a);return b.each(this.datasets,function(a){b.each(a.points,function(a){a.inRange(d.x,d.y)&&c.push(a)})},this),c},showTooltip:function(c){if(this.draw(),c.length>0){var d=c[0],e=d.tooltipPosition();if(1==c.length)new a.Tooltip({x:Math.round(e.x),y:Math.round(e.y),xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,caretHeight:this.options.tooltipCaretSize,cornerRadius:this.options.tooltipCornerRadius,text:b.template(this.options.tooltipTemplate,d),chart:this.chart,custom:this.options.customTooltips}).draw();else{var f=[],g=[];b.each(c,function(a){f.push(b.template(this.options.multiTooltipTemplate,a)),g.push({fill:a._saved.fillColor||a.fillColor,stroke:a._saved.strokeColor||a.strokeColor})},this),new a.MultiTooltip({x:Math.round(e.x),y:Math.round(e.y),xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,xOffset:this.options.tooltipXOffset,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,titleTextColor:this.options.tooltipTitleFontColor,titleFontFamily:this.options.tooltipTitleFontFamily,titleFontStyle:this.options.tooltipTitleFontStyle,titleFontSize:this.options.tooltipTitleFontSize,cornerRadius:this.options.tooltipCornerRadius,labels:f,legendColors:g,legendColorBackground:this.options.multiTooltipKeyBackground,title:"",chart:this.chart,ctx:this.chart.ctx,custom:this.options.customTooltips}).draw()}}return this},_forEachPoint:function(a){b.each(this.datasets,function(c){b.each(c.points,a,this)},this)},_forEachDataset:function(a){b.each(this.datasets,a,this)},_hasData:function(){var a=!1;return this._forEachDataset(function(b){a|=!!b.points.length}),a},_calculateRange:function(){var a=void 0,b=void 0,c=void 0,d=void 0;return this._forEachPoint(function(e){(void 0===a||e.arg<a)&&(a=e.arg),(void 0===b||e.arg>b)&&(b=e.arg),(void 0===c||e.value<c)&&(c=e.value),(void 0===d||e.value>d)&&(d=e.value)}),{xmin:a,xmax:b,ymin:c,ymax:d}},_drawMessage:function(a){var c=this.chart.ctx,d=this.chart.width,e=this.chart.height,f=this.options.scaleFontSize,g=this.options.scaleFontStyle,h=this.options.scaleFontFamily,i=b.fontString(f,g,h);c.save(),c.translate(d/2,e/2),c.textAlign="center",c.textBaseline="middle",c.font=i,c.fillStyle=this.options.scaleFontColor,c.fillText(a,0,0),c.restore()},_drawLine:function(a){var c=this.chart.ctx,d=void 0;c.lineJoin="round",c.lineWidth=this.options.datasetStrokeWidth,c.strokeStyle=a.strokeColor||this.options.datasetStrokeColor,c.beginPath(),b.each(a.points,function(a,b){0===b?c.moveTo(a.x,a.y):this.options.bezierCurve?c.bezierCurveTo(d.controlPoints.x2,d.controlPoints.y2,a.controlPoints.x1,a.controlPoints.y1,a.x,a.y):c.lineTo(a.x,a.y),d=a},this),c.stroke()},update:function(){var a=this._calculateRange();this.scale.setDataRange(a),this.render()},draw:function(a){this._hasData()?(this.scale.fit(),this._forEachDataset(function(b){this.scale.updatePoints(b.points,a),this.options.bezierCurve&&this.scale.updateBezierControlPoints(b.points,a,this.options.bezierCurveTension)}),this.clear(),this.scale.draw(),this.options.datasetStroke&&b.each(this.datasets,this._drawLine,this),this.options.pointDot&&this._forEachPoint(function(a){a.draw()})):(this.clear(),this._drawMessage(this.options.emptyDataMessage))}})}),function(a){"use strict";"object"==typeof exports?module.exports=a("undefined"!=typeof angular?angular:require("angular"),"undefined"!=typeof Chart?Chart:require("chart.js")):"function"==typeof define&&define.amd?define(["angular","chart"],a):a(angular,Chart)}(function(a,b){"use strict";function c(){var c={},d={Chart:b,getOptions:function(b){var d=b&&c[b]||{};return a.extend({},c,d)}};this.setOptions=function(b,d){return d?void(c[b]=a.extend(c[b]||{},d)):(d=b,void(c=a.extend(c,d)))},this.$get=function(){return d}}function d(c,d){function f(a,b){return a&&b&&a.length&&b.length?Array.isArray(a[0])?a.length===b.length&&a.every(function(a,c){return a.length===b[c].length}):b.reduce(g,0)>0?a.length===b.length:!1:!1}function g(a,b){return a+b}function h(b,c,d,e){var f=null;return function(g){var h=c.getPointsAtEvent||c.getBarsAtEvent||c.getSegmentsAtEvent;if(h){var i=h.call(c,g);(e===!1||a.equals(f,i)===!1)&&(f=i,b[d](i,g),b.$apply())}}}function i(d,e){for(var f=!1,g=a.copy(e.colours||c.getOptions(d).colours||b.defaults.global.colours);g.length<e.data.length;)g.push(e.getColour()),f=!0;return f&&(e.colours=g),g.map(j)}function j(a){return"object"==typeof a&&null!==a?a:"string"==typeof a&&"#"===a[0]?l(o(a.substr(1))):k()}function k(){var a=[m(0,255),m(0,255),m(0,255)];return l(a)}function l(a){return{fillColor:n(a,.2),strokeColor:n(a,1),pointColor:n(a,1),pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:n(a,.8)}}function m(a,b){return Math.floor(Math.random()*(b-a+1))+a}function n(a,b){return e?"rgb("+a.join(",")+")":"rgba("+a.concat(b).join(",")+")"}function o(a){var b=parseInt(a,16),c=b>>16&255,d=b>>8&255,e=255&b;return[c,d,e]}function p(b,c,d,e){return{labels:b,datasets:c.map(function(b,c){return a.extend({},e[c],{label:d[c],data:b})})}}function q(b,c,d){return b.map(function(b,e){return a.extend({},d[e],{label:b,value:c[e],color:d[e].strokeColor,highlight:d[e].pointHighlightStroke})})}function r(a,b){var c=a.parent(),d=c.find("chart-legend"),e="<chart-legend>"+b.generateLegend()+"</chart-legend>";d.length?d.replaceWith(e):c.append(e)}function s(a,b,c,d){Array.isArray(c.data[0])?a.datasets.forEach(function(a,c){(a.points||a.bars).forEach(function(a,d){a.value=b[c][d]})}):a.segments.forEach(function(a,c){a.value=b[c]}),a.update(),c.$emit("update",a),c.legend&&"false"!==c.legend&&r(d,a)}function t(a){return!a||Array.isArray(a)&&!a.length||"object"==typeof a&&!Object.keys(a).length}function u(d,e){var f=a.extend({},b.defaults.global,c.getOptions(d),e.options);return f.responsive}return function(b){return{restrict:"CA",scope:{data:"=?",labels:"=?",options:"=?",series:"=?",colours:"=?",getColour:"=?",chartType:"=",legend:"@",click:"=?",hover:"=?",chartData:"=?",chartLabels:"=?",chartOptions:"=?",chartSeries:"=?",chartColours:"=?",chartLegend:"@",chartClick:"=?",chartHover:"=?"},link:function(g,j){function l(a,b){g.$watch(a,function(a){"undefined"!=typeof a&&(g[b]=a)})}function m(c,d){if(!t(c)&&!a.equals(c,d)){var e=b||g.chartType;e&&(v&&v.destroy(),n(e))}}function n(b){if(u(b,g)&&0===j[0].clientHeight&&0===w.clientHeight)return d(function(){n(b)},50,!1);if(g.data&&g.data.length){g.getColour="function"==typeof g.getColour?g.getColour:k;var e=i(b,g),f=j[0],l=f.getContext("2d"),m=Array.isArray(g.data[0])?p(g.labels,g.data,g.series||[],e):q(g.labels,g.data,e),o=a.extend({},c.getOptions(b),g.options);v=new c.Chart(l)[b](m,o),g.$emit("create",v),f.onclick=g.click?h(g,v,"click",!1):a.noop,f.onmousemove=g.hover?h(g,v,"hover",!0):a.noop,g.legend&&"false"!==g.legend&&r(j,v)}}function o(a){if("undefined"!=typeof console&&"test"!==c.getOptions().env){var b="function"==typeof console.warn?console.warn:console.log;g[a]&&b.call(console,'"%s" is deprecated and will be removed in a future version. Please use "chart-%s" instead.',a,a)}}var v,w=document.createElement("div");w.className="chart-container",j.replaceWith(w),w.appendChild(j[0]),e&&window.G_vmlCanvasManager.initElement(j[0]),["data","labels","options","series","colours","legend","click","hover"].forEach(o),l("chartData","data"),l("chartLabels","labels"),l("chartOptions","options"),l("chartSeries","series"),l("chartColours","colours"),l("chartLegend","legend"),l("chartClick","click"),l("chartHover","hover"),g.$watch("data",function(a,c){if(a&&a.length&&(!Array.isArray(a[0])||a[0].length)){var d=b||g.chartType;if(d){if(v){if(f(a,c))return s(v,a,g,j);v.destroy()}n(d)}}},!0),g.$watch("series",m,!0),g.$watch("labels",m,!0),g.$watch("options",m,!0),g.$watch("colours",m,!0),g.$watch("chartType",function(b,c){t(b)||a.equals(b,c)||(v&&v.destroy(),n(b))}),g.$on("$destroy",function(){v&&v.destroy()})}}}}b.defaults.global.responsive=!0,b.defaults.global.multiTooltipTemplate="<%if (datasetLabel){%><%=datasetLabel%>: <%}%><%= value %>",b.defaults.global.colours=["#97BBCD","#DCDCDC","#F7464A","#46BFBD","#FDB45C","#949FB1","#4D5360"];var e="object"==typeof window.G_vmlCanvasManager&&null!==window.G_vmlCanvasManager&&"function"==typeof window.G_vmlCanvasManager.initElement;return e&&(b.defaults.global.animation=!1),a.module("chart.js",[]).provider("ChartJs",c).factory("ChartJsFactory",["ChartJs","$timeout",d]).directive("chartBase",["ChartJsFactory",function(a){return new a}]).directive("chartLine",["ChartJsFactory",function(a){return new a("Line")}]).directive("chartBar",["ChartJsFactory",function(a){return new a("Bar")}]).directive("chartScatter",["ChartJsFactory",function(a){return new a("Scatter")}]).directive("chartRadar",["ChartJsFactory",function(a){return new a("Radar")}]).directive("chartDoughnut",["ChartJsFactory",function(a){return new a("Doughnut")}]).directive("chartPie",["ChartJsFactory",function(a){return new a("Pie")}]).directive("chartPolarArea",["ChartJsFactory",function(a){return new a("PolarArea")}])}),angular.module("com.bendani.bibliomania.author.creation.modal.service",["com.bendani.bibliomania.create.author.directive"]).provider("AuthorCreationModalService",function(){function a(a){var b={show:function(b){var c=a.open({templateUrl:"../BiblioMania/views/partials/author/create-author-modal.html",windowClass:"create-author-dialog"});c.result.then(b)}};return b}this.$get=["$uibModal",function(b){return new a(b)}]}).controller("AuthorCreationModalController",["$scope","Author","ErrorContainer",function(a,b,c){function d(){a.data={},a.data.onSaveAuthor=function(d){b.get({id:d},function(b){a.$close(b)},c.handleRestError)}}d()}]),angular.module("com.bendani.bibliomania.author.model",["ngResource"]).factory("Author",["$resource",function(a){return a("../BiblioMania/authors/:id",{},{getByBook:{method:"GET",url:"../BiblioMania/authors/by-book/:id"},books:{method:"GET",url:"../BiblioMania/authors/:id/books",isArray:!0},oeuvre:{method:"GET",url:"../BiblioMania/authors/:id/oeuvre",isArray:!0},update:{method:"PUT"}})}]),function(){"use strict";function a(a,b,c,d,e,f,g){function h(){d.setTitle("translation.authors"),d.setShowPreviousButton(!1),n(),o.searchAuthorsQuery="",o.predicate="name.lastname",o.reverseOrder=!1,o.orderValues=[{key:"Voornaam",predicate:"name.firstname",width:"50"},{key:"Naam",predicate:"name.lastname",width:"50"}],m()}function i(a){return-1!==a.name.firstname.toLowerCase().indexOf(o.searchAuthorsQuery)||-1!==a.name.lastname.toLowerCase().indexOf(o.searchAuthorsQuery)?!0:!1}function j(a){e.path("/edit-author/"+a.id)}function k(){g.show(function(){m()})}function l(a){o.listView=a}function m(){o.loading=!0,o.authors=b.query(function(){o.loading=!1},c.handleRestError)}function n(){var b=angular.element('<button class="btn btn-success no-round-corners" ng-click="vm.showCreateAuthorDialog()">Nieuwe auteur</button>');f(b)(a),d.setRightPanel(b)}var o=this;o.search=i,o.goToAuthorDetails=j,o.showCreateAuthorDialog=k,o.setListView=l,h()}angular.module("com.bendani.bibliomania.author.overview.ui",["com.bendani.bibliomania.author.model","com.bendani.bibliomania.author.creation.modal.service","com.bendani.bibliomania.image.card.directive","com.bendani.bibliomania.title.panel"]).config(["$routeProvider",function(a){a.when("/authors",{templateUrl:"../BiblioMania/views/partials/author/authors-overview.html",controller:"AuthorsOverviewController",controllerAs:"vm"})}]).controller("AuthorsOverviewController",["$scope","Author","ErrorContainer","TitlePanelService","$location","$compile","AuthorCreationModalService",a])}(),angular.module("com.bendani.bibliomania.author.selection.modal.service",["com.bendani.bibliomania.author.model"]).provider("AuthorSelectionModalService",function(){function a(a){var b={show:function(b){var c=a.open({templateUrl:"../BiblioMania/views/partials/author/select-author-modal.html"});c.result.then(b)}};return b}this.$get=["$uibModal",function(b){return new a(b)}]}).controller("AuthorSelectionController",["$scope","Author","ErrorContainer",function(a,b,c){function d(){a.authorSelectionModal={},a.authorSelectionModal.data={},a.authorSelectionModal.data.authors=b.query(function(){},c.handleRestError),a.authorSelectionModal.searchAuthorsQuery="",a.authorSelectionModal.predicate="name.lastname",a.authorSelectionModal.reverse=!1}a.selectAuthor=function(b){a.$close(b)},a.search=function(b){return-1!==b.name.firstname.toLowerCase().indexOf(a.authorSelectionModal.searchAuthorsQuery)||-1!==b.name.lastname.toLowerCase().indexOf(a.authorSelectionModal.searchAuthorsQuery)?!0:!1},a.order=function(b){a.authorSelectionModal.reverse=a.authorSelectionModal.predicate===b?!a.authorSelectionModal.reverse:!1,a.authorSelectionModal.predicate=b},d()}]),function(){"use strict";function a(a,b,c,d,e){function f(){e.setTitle("translation.author"),k.submitAttempted=!1,k.authors=a.query(function(){},b.handleRestError),k.model||(k.model={}),k.showAuthorExistsWarning=!!k.showAuthorExistsWarning}function g(a){return!!(k.model.name&&k.model.name.lastname&&!k.model.name.lastname.$error&&k.model.name.lastname.length>2&&-1!==a.name.lastname.toLowerCase().indexOf(k.model.name.lastname.toLowerCase()))}function h(){void 0!==k.model&&void 0!==k.model.name&&(k.authorImageQuery=k.model.name.firstname+" "+k.model.name.lastname)}function i(){var a="";k.model.name&&(a=k.model.name.firstname+" "+k.model.name.lastname),d.show(a,function(a){k.model.imageUrl=a,k.model.image=a})}function j(d){k.submitAttempted=!0,d?k.model.id?a.update(k.model,function(a){c.addSuccessMessage("Auteur opgeslagen"),k.onSave({authorId:a.id})},b.handleRestError):a.save(k.model,function(a){c.addSuccessMessage("Auteur opgeslagen"),k.onSave({authorId:a.id})},b.handleRestError):b.setErrorCode("translation.not.all.fields.have.been.filled.in")}var k=this;k.searchAuthorImage=h,k.submitForm=j,k.openSelectImageDialog=i,k.searchAuthors=g,f()}angular.module("com.bendani.bibliomania.create.author.directive",["com.bendani.bibliomania.author.model","com.bendani.bibliomania.image.selection.modal.service","com.bendani.bibliomania.name.directive","com.bendani.bibliomania.title.panel"]).directive("createAuthor",function(){return{scope:{onSave:"&",model:"=authorModel",showAuthorExistsWarning:"="},restrict:"E",templateUrl:"../BiblioMania/views/partials/author/create-author-directive.html",controller:["Author","ErrorContainer","growl","ImageSelectionModalService","TitlePanelService",a],controllerAs:"vm",bindToController:!0}})}(),function(){"use strict";function a(a){a.when("/edit-author/:id",{templateUrl:"../BiblioMania/views/partials/author/edit-author.html",controller:"EditAuthorController",controllerAs:"vm"})}function b(a,b,c,d,e,f,g,h,i,j){function k(){a.$parent.title="Auteur",c.get({id:g.id}).$promise.then(function(a){s.model=a})["catch"](e.handleRestError),c.books({id:g.id}).$promise.then(function(a){s.books=a})["catch"](e.handleRestError),c.oeuvre({id:g.id}).$promise.then(function(a){s.oeuvre=a})["catch"](e.handleRestError),s.oeuvreConfig={orderValues:[{key:"Titel",predicate:"title",width:"70"},{key:"Jaar",predicate:"publicationYear",width:"10"},{key:"Status",predicate:"state",width:"10"}],predicate:"publicationYear",reverseOrder:!1}}function l(){void 0!==s.model&&void 0!==s.model.name&&(s.authorImageQuery=s.model.name.firstname+" "+s.model.name.lastname)}function m(){return j.hasAllowedPermissions(["UPDATE_AUTHOR"])}function n(a){return a.linkedBooks.length>0?"label-success":"label-danger"}function o(a){b.path("/edit-oeuvre-item/"+a.id)}function p(a){b.path("/book-details/"+a.id)}function q(a){i.show("Bent u zeker dat u dit item wilt verwijderen: "+a.title,function(){d["delete"]({id:a.id},function(){s.oeuvre=c.oeuvre({id:g.id}),f.addSuccessMessage("Verwijderen van oeuvre item voltooid")},e.handleRestError)})}function r(){h.show(s.model.id,function(){s.oeuvre=c.oeuvre({id:g.id})})}var s=this;s.searchAuthorImage=l,s.userCanEditAuthor=m,s.linkLabel=n,s.goToOeuvreItem=o,s.goToBook=p,s.deleteOeuvreItem=q,s.showAddOeuvreItemsDialog=r,k()}angular.module("com.bendani.bibliomania.edit.author.ui",["com.bendani.bibliomania.author.model","com.bendani.bibliomania.oeuvre.model","com.bendani.bibliomania.name.directive","com.bendani.bibliomania.add.oeuvre.items.modal.service","com.bendani.bibliomania.confirmation.modal.service","com.bendani.bibliomania.book.list.directive"]).config(["$routeProvider",a]).controller("EditAuthorController",["$scope","$location","Author","Oeuvre","ErrorContainer","growl","$routeParams","AddOeuvreItemsModalService","ConfirmationModalService","PermissionService",b])}(),function(){"use strict";function a(a,b,c,d,e,f,g){function h(a){var b="Wilt u auteur "+a.name.firstname+" "+a.name.lastname+" verwijderen van het boek?";d.show(b,function(){e.unlinkAuthor({id:m.book.id},{authorId:a.id},function(){var b=m.book.authors.indexOf(a);m.book.authors.splice(b,1),f.addSuccessMessage("Auteur verwijderd")},g.handleRestError)})}function i(){c.show(function(a){l(a)})}function j(){b.show(function(a){l(a)})}function k(b){a.path("/edit-author/"+b.id)}function l(a){e.linkAuthor({id:m.book.id},{authorId:a.id},function(){m.book.authors.push(a),f.addSuccessMessage("Auteur toegevoegd")},g.handleRestError)}var m=this;m.unlinkAuthorFromBook=h,m.showCreateAuthorDialog=i,m.showSelectAuthorDialog=j,m.goToEditAuthor=k}angular.module("com.bendani.bibliomania.book.detail.authors.directive",["com.bendani.bibliomania.book.model","com.bendani.bibliomania.author.selection.modal.service","com.bendani.bibliomania.confirmation.modal.service","com.bendani.bibliomania.author.creation.modal.service"]).directive("bookDetailAuthors",function(){return{scope:{book:"="},restrict:"E",templateUrl:"../BiblioMania/views/partials/book/book-detail-authors-directive.html",controller:["$location","AuthorSelectionModalService","AuthorCreationModalService","ConfirmationModalService","Book","growl","ErrorContainer",a],controllerAs:"vm",bindToController:!0}})}(),angular.module("com.bendani.bibliomania.book.detail.directive",["com.bendani.bibliomania.book.model","com.bendani.bibliomania.book.overview.service","com.bendani.bibliomania.personal.book.info.detail.directive","com.bendani.bibliomania.currency"]).directive("bookDetail",function(){return{scope:{},restrict:"E",templateUrl:"../BiblioMania/views/partials/book/book-detail-directive.html",controller:["$scope","$location","BookOverviewService","Book","ErrorContainer",function(a,b,c,d,e){function f(){c.registerHandler(j),a.$on("$destroy",function(){c.deregisterHandler(j)})}function g(){i.bookDetailPanelOpen=!1}function h(){b.path("/book-details/"+i.selectedBook.id)}var i=this;i.closeBookDetailPanel=g,i.goToEditBook=h;var j=function(a){i.bookDetailPanelOpen&&i.selectedBook.id===a.id?i.bookDetailPanelOpen=!1:(i.loading=!0,d.get({id:a.id}).$promise.then(function(a){i.selectedBook=a,i.loading=!1})["catch"](e.handleRestError),i.bookDetailPanelOpen=!0)};f()}],controllerAs:"vm"}}),angular.module("com.bendani.bibliomania.book.detail.first.print.info.directive",["com.bendani.bibliomania.first.print.info.model","com.bendani.bibliomania.first.print.selection.modal.service"]).directive("bookDetailFirstPrintInfo",function(){return{scope:{book:"="},restrict:"E",templateUrl:"../BiblioMania/views/partials/book/book-detail-first-print-info-directive.html",controller:["$location","FirstPrintInfo","FirstPrintSelectionModalService","growl","ErrorContainer",BookDetailFirstPrintInfoController],controllerAs:"vm",bindToController:!0}}),angular.module("com.bendani.bibliomania.book.detail.oeuvre.items.directive",["com.bendani.bibliomania.book.model","com.bendani.bibliomania.oeuvre.model","com.bendani.bibliomania.confirmation.modal.service","com.bendani.bibliomania.oeuvre.item.selection.modal.service"]).directive("bookDetailOeuvreItems",function(){return{scope:{book:"="},restrict:"E",templateUrl:"../BiblioMania/views/partials/book/book-detail-oeuvre-items-directive.html",controller:["$scope","$location","OeuvreItemSelectionModalService","ConfirmationModalService","Oeuvre","Book","growl","ErrorContainer",function(a,b,c,d,e,f,g,h){function i(){a.book=f.get({id:a.book.id},function(){},h.handleRestError)}a.goToEditOeuvreItem=function(a){b.path("/edit-oeuvre-item/"+a.id)},a.openSelectOeuvreItemDialog=function(){c.show(a.book.authors,function(b){for(var c=!0,d=0;d<a.book.oeuvreItems.length;d++)a.book.oeuvreItems[d].id===b.id&&(c=!1);c&&e.linkBook({id:b.id},{bookId:a.book.id},function(){i(),g.addSuccessMessage("Oeuvre gewijzigd")},h.handleRestError)})},a.removeBookFromOeuvreItem=function(b){var c="Zeker dat je deze link wilt verwijderen: "+b.title;d.show(c,function(){e.unlinkBook({id:b.id},{bookId:a.book.id},function(){i(),g.addSuccessMessage("Oeuvre gewijzigd")},h.handleRestError)})}}]}}),angular.module("com.bendani.bibliomania.book.detail.reading.dates.directive",["com.bendani.bibliomania.book.model","com.bendani.bibliomania.personal.book.info.model","com.bendani.bibliomania.confirmation.modal.service","com.bendani.bibliomania.reading.date.modal.service","com.bendani.bibliomania.reading.date.model"]).directive("bookDetailReadingDates",function(){return{scope:{book:"="},restrict:"E",templateUrl:"../BiblioMania/views/partials/book/book-detail-reading-dates-directive.html",controller:["$scope","$location","ReadingDate","ReadingDateModalService","ConfirmationModalService","DateService","Book","PersonalBookInfo","growl","ErrorContainer",function(a,b,c,d,e,f,g,h,i,j){function k(){a.book.personalBookInfo.readingDates=h.readingDates({id:a.book.personalBookInfo.id},function(){},j.handleRestError)}a.addTodayAsReadingDate=function(){var b={date:f.dateToJsonDate(new Date)};d.show(a.book.personalBookInfo.id,function(){k()},b)},a.openEditReadingDateModal=function(b){b||(b={}),d.show(a.book.personalBookInfo.id,function(){k()},b)},a.removeReadingDate=function(b){var d="Wilt u deze datum verwijderen: "+a.convertDate(b.date);e.show(d,function(){c["delete"]({id:b.id},function(){k(),i.addSuccessMessage("LeesDatum verwijderd")},j.handleRestError)})},a.convertDate=function(a){return f.dateToString(a)}}]}}),angular.module("com.bendani.bibliomania.book.details.ui",["com.bendani.bibliomania.book.model","com.bendani.bibliomania.title.panel","com.bendani.bibliomania.currency","com.bendani.bibliomania.date.selection.modal.service","com.bendani.bibliomania.personal.book.info.model","com.bendani.bibliomania.personal.book.info.detail.directive","com.bendani.bibliomania.book.detail.authors.directive","com.bendani.bibliomania.book.detail.first.print.info.directive","com.bendani.bibliomania.book.detail.reading.dates.directive","com.bendani.bibliomania.book.detail.oeuvre.items.directive","com.bendani.bibliomania.confirmation.modal.service","com.bendani.bibliomania.wishlist.model","angular-growl"]).config(["$routeProvider",function(a){a.when("/book-details/:id",{templateUrl:"../BiblioMania/views/partials/book/book-detail.html",controller:"BookDetailsController"})}]).controller("BookDetailsController",["$scope","$rootScope","$routeParams","Book","PersonalBookInfo","ErrorContainer","DateService","CurrencyService","DateSelectionModalService","TitlePanelService","ConfirmationModalService","growl","$compile","$location","Wishlist",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){function p(){j.setTitle("Boek detail"),j.setPreviousUrl("#/books"),q()}function q(){a.book=d.get({id:c.id},function(a){j.setTitle(a.title),r()},f.handleRestError)}function r(){var b=angular.element('<div class="book-detail-title-panel"><div class="float-right"><i ng-show="book.onWishlist" class="fa fa-heart margin-right-10"></i><label id="book-genre-label" class="label label-warning">{{ book.genre }}</label><button permission="DELETE_BOOK" ng-click="deleteBook()" class="margin-left-15 btn btn-danger btn-sm round-corners">DELETE</button></div></div>');m(b)(a),j.setRightPanel(b)}a.convertDate=function(a){return g.dateToString(a)},a.getCurrencyViewValue=function(a){return h.getCurrencyViewValue(a)},a.editPersonalBookInfo=function(){n.path("/edit-personal-book-info/"+a.book.personalBookInfo.id)},a.editBookInformation=function(){n.path("/edit-book/"+a.book.id)},a.createPersonalBookInfo=function(){n.path("/create-personal-book-info/"+a.book.id)},a.addToWishlist=function(){o.addBook({bookId:a.book.id},function(){l.addSuccessMessage("Toegevoegd aan wishlist"),a.book.onWishlist=!0},f.handleRestError)},a.removeFromWishlist=function(){o.removeBook({bookId:a.book.id},function(){l.addSuccessMessage("Verwijderd van wishlist"),a.book.onWishlist=!1},f.handleRestError)},a.deleteBook=function(){var b="Zeker dat je dit boek wilt verwijderen?";k.show(b,function(){d["delete"]({id:a.book.id},function(){n.path("/books"),l.addSuccessMessage("Boek verwijderd")},f.handleRestError)})},p()}]),angular.module("com.bendani.bibliomania.book.list.directive",[]).directive("bookList",function(){return{scope:{books:"="},templateUrl:"../BiblioMania/views/partials/book/book-list-directive.html",controller:["$scope","$location",function(a,b){a.searchBooksQuery="",a.goToBookDetails=function(a){b.path("/book-details/"+a.id)},a.orderValues=[{key:"Titel",predicate:"title",width:"30"},{key:"Ondertitel",predicate:"subtitle",width:"30"}],a.predicate="title",a.reverseOrder=!1,a.search=function(b){return-1!==b.title.toLowerCase().indexOf(a.searchBooksQuery)||b.subtitle&&-1!==b.subtitle.toLowerCase().indexOf(a.searchBooksQuery)}}]}}),angular.module("com.bendani.bibliomania.book.model",["ngResource"]).factory("Book",["$resource",function(a){return a("../BiblioMania/books/:id",{},{update:{method:"PUT"},"delete":{method:"DELETE"},searchAllBooks:{method:"POST",url:"../BiblioMania/books/search-all-books",isArray:!0},searchOtherBooks:{method:"POST",url:"../BiblioMania/books/search-other-books",isArray:!0},searchMyBooks:{method:"POST",url:"../BiblioMania/books/search-my-books",isArray:!0},searchWishlist:{method:"POST",url:"../BiblioMania/books/search-wishlist",isArray:!0},linkAuthor:{method:"PUT",url:"../BiblioMania/books/:id/authors"},unlinkAuthor:{method:"PUT",url:"../BiblioMania/books/:id/unlink-author"}})}]),angular.module("com.bendani.bibliomania.book.overview.service",["com.bendani.bibliomania.reading.date.modal.service"]).factory("BookOverviewService",["DateService","ReadingDateModalService","growl",function(a,b,c){function d(d){var e={date:a.dateToJsonDate(new Date)};b.show(d.personalBookInfoId,function(){d.read=!0,c.addSuccessMessage("Leesdatum opgeslagen")},e)}var e,f=[],g=function(a){e=a,_.each(f,function(b){b(a)})},h=function(){return e},i=function(a){f.push(a)},j=function(a){var b=f.indexOf(a);b>-1&&f.splice(b,1)},k=function(a){var b=[];return a.personalBookInfoId&&(a.read?b.push({id:"bookread",message:"Dit boek is gelezen",icon:"images/check-circle-success.png",handle:function(){d(a)}}):b.push({id:"bookread",message:"Dit boek is niet gelezen",icon:"images/check-circle-fail.png",handle:function(){d(a)}})),a.isLinkedToOeuvre||b.push({id:"bookIsNotLinkedToOeuvre",message:"Dit boek is niet gelinked aan een oeuvre",icon:"images/linked_warning.png"}),a.onWishlist&&b.push({id:"bookIsOnWishlist",message:"Dit boek staat op je wishlist",icon:"images/heart.png"}),b};return{selectBook:g,getSelectedBook:h,registerHandler:i,deregisterHandler:j,getBookWarnings:k}}]),angular.module("com.bendani.bibliomania.book.row.directive",["com.bendani.bibliomania.reading.date.modal.service","com.bendani.bibliomania.book.overview.service"]).directive("bookRow",function(){return{scope:{book:"="},templateUrl:"../BiblioMania/views/partials/book/book-row-directive.html",controller:["$scope","$location","BookOverviewService",function(a,b,c){a.warnings=c.getBookWarnings(a.book),a.goToBookDetails=function(){b.path("/book-details/"+a.book.id)},a.openDetails=function(){c.selectBook(a.book)}}],link:function(a,b){$(b).find('[data-toggle="tooltip"]').tooltip()}}}),angular.module("com.bendani.bibliomania.book.selection.modal.service",[]).provider("BookSelectionModalService",function(){function a(a){var b={show:function(b,c){var d=a.open({templateUrl:"../BiblioMania/views/partials/book/select-book-modal.html",controller:"BookSelectionController",resolve:{filters:function(){return b}}});d.result.then(c)}};return b}this.$get=["$uibModal",function(b){return new a(b)}]}).controller("BookSelectionController",["$scope","Book","ErrorContainer","filters",function(a,b,c,d){function e(){a.data={},b.searchAllBooks(d,function(b){a.data.books=b},c.handleRestError),a.searchBooksQuery=""}a.selectBook=function(b){a.$close(b)},a.search=function(b){return-1!==b.title.toLowerCase().indexOf(a.searchBooksQuery)||-1!==b.subtitle.toLowerCase().indexOf(a.searchBooksQuery)?!0:!1},e()}]),angular.module("com.bendani.bibliomania.book.controller",["com.bendani.bibliomania.book.model","com.bendani.bibliomania.title.panel","com.bendani.bibliomania.book.filter.model","com.bendani.php.common.filterservice","com.bendani.bibliomania.book.overview.service","com.bendani.bibliomania.image.card.directive","com.bendani.bibliomania.book.row.directive","com.bendani.bibliomania.currency","com.bendani.bibliomania.book.detail.directive","pageslide-directive"]).config(["$routeProvider",function(a){a.when("/books",{templateUrl:"../BiblioMania/views/partials/books.html",controller:"BookController"
})}]).controller("BookController",["$scope","Book","BookFilter","ErrorContainer","TitlePanelService","$location","$compile","BookOverviewService","ScrollingService","$timeout","FilterService",function(a,b,c,d,e,f,g,h,i,j,k){function l(){a.filterServiceId="bookOverviewFilters",k.registerFilterService(a.filterServiceId),e.setTitle("Boeken"),e.setShowPreviousButton(!1),m(),a.libraryInformationTemplate="../BiblioMania/views/partials/book/library-information-template.html",a.filterViewableBooksTemplate="../BiblioMania/views/partials/book/filter-viewable-books-template.html",a.loading=!0,a.searchBooksQuery="",a.predicate="mainAuthor",a.reverseOrder=!1,a.setListView(!1),a.viewableFilters={selected:s,all:[u,v,s,t,w]},a.selectViewableFilter=function(){k.filter(a.filterServiceId,a.filterBooks)},a.$watch("viewableBooks",function(){a.viewableBooks&&p(a.viewableBooks)}),n(),k.filter(a.filterServiceId,a.filterBooks)}function m(){var b=angular.element('<button permission="CREATE_BOOK" class="btn btn-success round-corners" ng-click="goToCreateBook()">Nieuw boek</button>');g(b)(a),e.setRightPanel(b)}function n(){c.query(function(b){for(var c=0;c<b.length;c++){var d=b[c];d.supportedOperators&&(d.selectedOperator=d.supportedOperators[0]),d.value=""}k.setAllFilters(a.filterServiceId,b)},d.handleRestError)}function o(b){a.books=b,_.each(a.books,function(a){a.warnings=h.getBookWarnings(a)}),r(),a.loading=!1}function p(b){a.libraryInformation={value:q(b),amountOfBooks:b.length}}function q(a){var b=0;return _.each(a,function(a){a.retailPrice&&a.retailPrice.amount&&(b+=parseFloat(a.retailPrice.amount))}),b.toFixed(2)}function r(){j(function(){i.scrollToLastSavedPosition("/books")},0)}var s={key:"Mijn boeken in collectie",value:"personalBooks",searchBooks:b.searchMyBooks},t={key:"Mijn boeken niet in collectie",value:"personalBooksNotInCollection",searchBooks:b.searchMyBooks},u={key:"Alle boeken",value:"all",searchBooks:b.searchAllBooks},v={key:"Andere boeken",value:"otherBooks",searchBooks:b.searchOtherBooks},w={key:"Wishlist",value:"wishlist",searchBooks:b.searchWishlist};a.search=function(b){return(void 0===b.subtitle||null===b.subtitle)&&(b.subtitle=""),-1!==b.title.toLowerCase().indexOf(a.searchBooksQuery)||-1!==b.subtitle.toLowerCase().indexOf(a.searchBooksQuery)||-1!==b.mainAuthor.toLowerCase().indexOf(a.searchBooksQuery)?a.viewableFilters.selected===s?b.inCollection:a.viewableFilters.selected===t?!b.inCollection:!0:!1},a.clearSearch=function(){a.searchBooksQuery=""},a.setListView=function(b){a.listView=b,a.listView?a.orderValues=[{key:"Titel",predicate:"title",width:"30"},{key:"Ondertitel",predicate:"subtitle",width:"30"},{key:"Auteur",predicate:"mainAuthor",width:"30"},{key:"Gelezen",predicate:"read",width:"30"},{key:"Editeer",predicate:"",width:"10"}]:a.orderValues=[{key:"Titel",predicate:"title",width:"50"},{key:"Auteur",predicate:"mainAuthor",width:"50"}]},a.filterBooks=function(b){a.loading=!0,a.viewableFilters.selected.searchBooks(b,function(a){o(a)},d.handleRestError)},a.goToCreateBook=function(){f.path("/create-book")},a.onImageClickBook=function(a){h.selectBook(a)},a.onEditBook=function(a){f.path("/book-details/"+a.id)},l()}]),angular.module("com.bendani.bibliomania.date.selection.modal.service",[]).provider("DateSelectionModalService",function(){function a(a){var b={show:function(b){var c=a.open({templateUrl:"../BiblioMania/views/partials/book/select-date-modal.html"});c.result.then(b)}};return b}this.$get=["$uibModal",function(b){return new a(b)}]}).controller("DateSelectionController",["$scope",function(a){function b(){a.model={},a.model.readingDate=new Date}a.selectDate=function(){a.$close(a.model.readingDate)},b()}]),angular.module("com.bendani.bibliomania.edit.book.ui",["ngTagsInput","angularBootstrapNavTree","com.bendani.bibliomania.image.fallback","com.bendani.bibliomania.genre.model","com.bendani.bibliomania.tag.model","com.bendani.bibliomania.title.panel","com.bendani.bibliomania.country.model","com.bendani.bibliomania.google.api.book.model","com.bendani.bibliomania.publisher.model","com.bendani.bibliomania.serie.model","com.bendani.bibliomania.publisher.serie.model","com.bendani.bibliomania.book.model","com.bendani.bibliomania.author.model","com.bendani.bibliomania.image.selection.modal.service","com.bendani.bibliomania.language.model"]).config(["$routeProvider",function(a){a.when("/edit-book/:id",{templateUrl:"../BiblioMania/views/partials/book/edit-book.html",controller:"CreateBookController",resolve:{bookModel:["Book","$route","ErrorContainer",function(a,b,c){return a.get({id:b.current.params.id},function(){},c.handleRestError)}],onSave:["Book","$route","ErrorContainer","growl","$location",function(a,b,c,d,e){return function(b){a.update(b,function(){e.path("/book-details/"+b.id),d.addSuccessMessage("Boek opgeslagen")},c.handleRestError)}}],initFunction:function(){return function(){}}}}),a.when("/create-book",{templateUrl:"../BiblioMania/views/partials/book/edit-book.html",controller:"CreateBookController",resolve:{bookModel:["CurrencyService",function(a){return{retailPrice:{amount:0,currency:a.getCurrencies()[0].value}}}],onSave:["Book","$route","ErrorContainer","growl","$location",function(a,b,c,d,e){return function(b){a.save(b,function(a){e.path("/book-details/"+a.id),d.addSuccessMessage("Boek opgeslagen")},c.handleRestError)}}],initFunction:function(){return function(){}}}})}]).controller("CreateBookController",["$scope","Genre","Tag","Country","Publisher","Language","Book","Author","Serie","PublisherSerie","ErrorContainer","$uibModal","ImageSelectionModalService","$location","TitlePanelService","bookModel","onSave","initFunction","GoogleApiBook","CurrencyService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){function u(){o.setTitle("Boek"),a.model=p,r(),a.model.$promise&&a.model.$promise.then(function(){a.model.publicationDate||(a.model.publicationDate={});var b=_.findWhere(a.model.authors,{preferred:!0});b&&h.get({id:b.id},function(a){w(a)},k.handleRestError)}),a.genreTree={},a.data={},a.data.genres=b.query(function(){},k.handleRestError),a.data.tags=c.query(function(){},k.handleRestError),a.data.countries=d.query(function(){},k.handleRestError),a.data.publishers=e.query(function(){},k.handleRestError),a.data.languages=f.query(function(){},k.handleRestError),a.data.series=i.query(function(){},k.handleRestError),a.data.publisherSeries=j.query(function(){},k.handleRestError),a.data.currencies=t.getCurrencies(),a.submitAttempted=!1,a.$watch("model.title",function(a,b){a!==b&&x()}),a.$watch("model.isbn",function(a,b){a!==b&&x()})}function v(b){var c=!0;return b||(k.setErrorCode("Niet alle velden zijn correct ingevuld."),c=!1),void 0===a.model.preferredAuthorId&&(k.setErrorCode("Geen auteur geselecteerd"),c=!1),c}function w(b){a.data.selectedAuthor=b,a.data.selectedAuthorImage=b.image,a.model.preferredAuthorId=b.id}function x(){return s.get({q:"isbn:"+a.model.isbn},function(b){b&&b.items&&b.items.length>0?a.googleBook=b.items[0].volumeInfo:y()},k.handleRestError)}function y(){s.get({q:"intitle:"+a.model.title},function(b){b&&b.items&&b.items.length>0&&(a.googleBook=b.items[0].volumeInfo)},k.handleRestError)}a.selectGenre=function(b){a.model.genre=b.label},a.searchTags=function(b){return a.data.tags.filter(function(a){return-1!==a.text.toLowerCase().indexOf(b)})},a.searchBookImage=function(){void 0!==a.model&&(a.bookImageQuery=a.model.title+" "+a.model.isbn)},a.openSelectImageDialog=function(){var b="";a.model.title&&(b=b+" "+a.model.title),a.model.isbn&&(b=b+" "+a.model.isbn),a.data.selectedAuthor&&(b=b+" "+a.data.selectedAuthor.name.lastname),m.show(b,function(b){a.model.imageUrl=b,a.model.image=b})},a.showSelectAuthorDialog=function(){var b=l.open({templateUrl:"../BiblioMania/views/partials/author/select-author-modal.html",scope:a});b.result.then(function(b){a.data.selectedAuthor=b,a.data.selectedAuthorImage=b.image,a.model.preferredAuthorId=b.id})},a.showCreateAuthorDialog=function(){var b=l.open({templateUrl:"../BiblioMania/views/partials/author/create-author-modal.html",scope:a,windowClass:"create-author-dialog"});b.result.then(function(a){w(a)})},a.submitForm=function(b){a.submitAttempted=!0,v(b)&&q(a.model)},a.copyGoogleBookTitleToModel=function(){a.model.title=a.googleBook.title},a.copyGoogleBookSubtitleToModel=function(){a.model.subtitle=a.googleBook.subtitle},a.copyGoogleBookIsbnToModel=function(){if(a.googleBook&&a.googleBook.industryIdentifiers.length>0){var b=a.getGoogleBookIsbn();b&&(a.model.isbn=b)}},a.getGoogleBookIsbn=function(){if(a.googleBook&&a.googleBook.industryIdentifiers.length>0){var b=a.googleBook.industryIdentifiers.filter(function(a){return"ISBN_13"===a.type});if(b.length>0)return b[0].identifier}},a.copyGoogleBookDescriptionToModel=function(){a.model.summary=a.googleBook.description},a.copyGoogleBookPagesToModel=function(){a.model.pages=a.googleBook.pageCount},a.copyGoogleBookPublicationDateToModel=function(){if(a.googleBook.publishedDate){var b=a.googleBook.publishedDate.split("-");a.model.publicationDate.year=void 0,a.model.publicationDate.month=void 0,a.model.publicationDate.day=void 0,b.length>=1&&(a.model.publicationDate.year=parseInt(b[0])),b.length>=2&&(a.model.publicationDate.month=parseInt(b[1])),b.length>=3&&(a.model.publicationDate.day=parseInt(b[2]))}},u()}]),angular.module("com.bendani.bibliomania.edit.serie.modal.service",["com.bendani.bibliomania.serie.model","com.bendani.bibliomania.book.model"]).provider("EditSerieModalService",function(){function a(a){var b={show:function(b,c,d,e){var f=a.open({templateUrl:"../BiblioMania/views/partials/book/edit-serie-modal.html",controller:"EditSerieModalController",windowClass:"edit-book-serie-dialog",resolve:{serieModel:function(){return b},client:function(){return d},filters:function(){return c}}});f.result.then(e)}};return b}this.$get=["$uibModal",function(b){return new a(b)}]}).controller("EditSerieModalController",["$scope","ErrorContainer","serieModel","growl","Book","client","filters",function(a,b,c,d,e,f,g){function h(){a.model=c,a.data={},a.submitAttempted=!1,a.searchAllBooksQuery="",a.searchModelBooksQuery="",e.searchAllBooks(g,function(b){a.data.books=b},b.handleRestError)}a.submit=function(c){a.submitAttempted=!0,c&&f.update(a.model,function(){d.addSuccessMessage("Serie opgeslagen")},b.handleRestError)},a.searchAllBooks=function(b){(void 0===b.subtitle||null===b.subtitle)&&(b.subtitle="");var c=a.searchAllBooksQuery.toLowerCase();return-1!==b.title.toLowerCase().indexOf(c)||-1!==b.subtitle.toLowerCase().indexOf(c)||-1!==b.mainAuthor.toLowerCase().indexOf(c)?!0:!1},a.searchModelBooks=function(b){(void 0===b.subtitle||null===b.subtitle)&&(b.subtitle="");var c=a.searchModelBooksQuery.toLowerCase();return-1!==b.title.toLowerCase().indexOf(c)||-1!==b.subtitle.toLowerCase().indexOf(c)?!0:!1},a.removeBookFromSerie=function(c){f.removeBook({id:a.model.id},{bookId:c.id},function(){d.addSuccessMessage("Boek verwijderd");var b=a.model.books.indexOf(c);b>-1&&a.model.books.splice(b,1)},b.handleRestError)},a.addBookToSerie=function(c){f.addBook({id:a.model.id},{bookId:c.id},function(){d.addSuccessMessage("Boek toegevoegd"),a.model.books.push(c)},b.handleRestError)},h()}]),angular.module("com.bendani.bibliomania.book.filter.model",["ngResource"]).factory("BookFilter",["$resource",function(a){return a("../BiblioMania/bookFilters",{},{mostUsed:{method:"GET",url:"../BiblioMania/mostUsedBookFilters",isArray:!0}})}]),angular.module("com.bendani.bibliomania.chart.filter.model",["ngResource"]).factory("ChartFilter",["$resource",function(a){return a("../BiblioMania/chartFilters",{},{})}]),angular.module("com.bendani.bibliomania.google.api.book.model",["ngResource"]).factory("GoogleApiBook",["$resource",function(a){return a("https://www.googleapis.com/books/v1/volumes",{key:"AIzaSyBPkSNgxg9ZjRgYnS0Fj6fZ9xw-Xn5l_pw"})}]),angular.module("BiblioMania",["ngRoute","ui.bootstrap","ui.bootstrap.tpls","ui.validate","pascalprecht.translate","ngSanitize","chart.js","angular-growl","com.bendani.bibliomania.permission","com.bendani.bibliomania.book.controller","com.bendani.bibliomania.login.controller","com.bendani.bibliomania.main.controller","com.bendani.bibliomania.book.detail.directive","com.bendani.php.common.loginservice.login.directive","com.bendani.php.common.loginservice.authentication.model","com.bendani.php.common.uiframework","com.bendani.bibliomania.edit.book.ui","com.bendani.bibliomania.edit.author.ui","com.bendani.bibliomania.edit.oeuvre.ui","com.bendani.bibliomania.book.details.ui","com.bendani.bibliomania.edit.first.print.ui","com.bendani.bibliomania.edit.personal.book.info.ui","com.bendani.bibliomania.author.overview.ui","com.bendani.bibliomania.publisher.overview.ui","com.bendani.bibliomania.series.overview.ui","com.bendani.bibliomania.header.controller","com.bendani.bibliomania.statistics.ui","com.bendani.bibliomania.create.chart.ui","com.bendani.bibliomania.title.panel","com.bendani.bibliomania.create.user.ui"]).config(["$routeProvider","growlProvider",function(a,b){a.when("/login",{templateUrl:"../BiblioMania/views/partials/login.html",controller:"LoginController",controllerAs:"vm"}).otherwise({redirectTo:"/books"}),b.globalTimeToLive(5e3)}]).run(["$rootScope","$location","ScrollingService","User","ErrorContainer",function(a,b,c,d,e){var f=[];a.baseUrl="../BiblioMania/",a.$on("$routeChangeSuccess",function(){f.push(b.$$path)}),a.back=function(){var a=f.length>1?f.splice(-2)[0]:"/";b.path(a)},d.loggedInUser(function(b){a.loggedInUser=b},e.handleRestError),c.registerPathForScrollPosition("/books")}]),angular.module("com.bendani.bibliomania.confirmation.modal.service",[]).provider("ConfirmationModalService",function(){function a(a){var b={show:function(b,c){var d=a.open({templateUrl:"../BiblioMania/views/partials/confirmation-modal.html",controller:"ConfirmationModalController",resolve:{message:function(){return b}}});d.result.then(c)}};return b}this.$get=["$uibModal",function(b){return new a(b)}]}).controller("ConfirmationModalController",["$scope","message",function(a,b){a.message=b}]),function(){"use strict";function a(a){a.when("/create-user",{templateUrl:"../BiblioMania/views/partials/create-user.html",controller:"CreateUserController",controllerAs:"vm"})}function b(a,b,c,d,e){function f(){h.model={},e.setTitle("Create user")}function g(e){h.submitAttempted=!0,e&&a.save(h.model,function(a){c.addSuccessMessage("User aangemaakt"),d.path("/login")},b.handleRestError)}var h=this;h.submitForm=g,f()}angular.module("com.bendani.bibliomania.create.user.ui",["com.bendani.bibliomania.user.model"]).config(["$routeProvider",a]).controller("CreateUserController",["User","ErrorContainer","growl","$location","TitlePanelService",b])}(),function(){"use strict";function a(a){var b=this;b.formattedCurrency=a.getCurrencyViewValue(b.currencyValue)}function b(){function a(){var a=[{name:"",value:"EUR"},{name:"$",value:"USD"},{name:"",value:"PND"}],b={getCurrencies:function(){return a},getCurrencyViewValue:function(b){var c=_.where(a,{value:b});return c.length>0?c[0].name:void 0},getCurrencyModelValue:function(b){var c=_.where(a,{name:b});return c.length>0?c[0].value:void 0}};return b}this.$get=function(){return new a}}angular.module("com.bendani.bibliomania.currency",[]).provider("CurrencyService",b).directive("currency",function(){return{scope:{currencyValue:"="},template:"<span>{{ vm.formattedCurrency }}</span>",controller:["CurrencyService",a],controllerAs:"vm",bindToController:!0}})}(),angular.module("com.bendani.bibliomania.dynamic.controller.directive",[]).directive("dynamicController",["$controller",function(a){return{restrict:"A",scope:!0,link:function(b,c,d){var e={$scope:b,$element:c,$attrs:d};c.data("$Controller",a(b.$eval(d.dynamicController),e))}}}]),angular.module("com.bendani.bibliomania.header.controller",[]).controller("HeaderController",["$scope","$location",function(a,b){a.isActive=function(a){return a===b.path()}}]),angular.module("com.bendani.bibliomania.image.card.directive",[]).directive("imageCard",["$timeout",function(a){return{scope:{model:"=",options:"=",backupText:"@",warnings:"=",onEditClick:"&",onImageClick:"&",useSpriteImage:"=?",showEditButton:"@"},restrict:"E",templateUrl:"../BiblioMania/views/partials/image-card-directive.html",link:function(b,c){function d(){return b.useSpriteImage&&b.model.spriteImage}if(b.overlayVisible=!1,b.onClick=function(){b.overlayVisible=!0,a(function(){b.overlayVisible=!1},500),b.onImageClick(b.model)},b.showOverlayButton=function(){return b.showEditButton&&b.overlayVisible},b.wrapperStyle="width: 142px; height: 226px;",b.imageStyle="width: 142px; height: 226px; background-position:  0px -0px; margin-bottom: 0px;",b.overlayStyle="width: 142px; height: 226px;",d()||b.model.image){var e=b.model.spriteImage.imageWidth,f=b.model.spriteImage.imageHeight;b.wrapperStyle="width: "+e+"px; height: "+f+"px;",b.overlayStyle=b.wrapperStyle,b.imageStyle=b.wrapperStyle+"background: url('"+b.model.image+"');",d()&&(b.imageStyle=b.wrapperStyle+"background: url('"+b.model.spriteImage.image+"'); background-position:  0px -"+b.model.spriteImage.spritePointer+"px; margin-bottom: 0px;",b.overlayStyle=b.wrapperStyle+"margin-bottom: 0px;")}$(c).find('[data-toggle="tooltip"]').tooltip()}}}]),angular.module("com.bendani.bibliomania.image.fallback",[]).directive("srcWithFallback",function(){return{link:function(a,b,c){var d="/BiblioMania/images/questionCover.png";c.$observe("srcWithFallback",function(a,e){var f=new Image;void 0!==a&&""!==a?(f.src=c.srcWithFallback,angular.element(f).bind("load",function(){b.attr("src",c.srcWithFallback)})):(f.src=d,angular.element(f).bind("load",function(){b.attr("src",d)}))}),b.bind("error",function(){angular.element(this).attr("src",d)})}}}),angular.module("com.bendani.bibliomania.image.selection.modal.service",[]).provider("ImageSelectionModalService",function(){function a(a){var b={show:function(b,c){var d=a.open({templateUrl:"../BiblioMania/views/partials/select-image-modal.html",windowClass:"select-image-modal",controller:"ImageSelectionController",resolve:{searchQuery:function(){return b}}});d.result.then(c)}};return b}this.$get=["$uibModal",function(b){return new a(b)}]}).controller("ImageSelectionController",["$scope","searchQuery",function(a,b){function c(){a.imageSelectModal={},a.imageSelectModal.searchQuery=b}a.selectImage=function(){a.$close(a.imageSelectModal.imageUrl)},c()}]),angular.module("BiblioMania").config(["$translateProvider",function(a){a.translations("nl",{"translation.author":"Auteur","translation.authors":"Auteurs","translation.publishers":"Uitgevers","translation.add.author":"Auteur toevoegen","translation.author.saved":"Auteur opgeslagen","translation.existing.authors.found":"Opgelet! Volgende auteurs bestaan reeds:","translation.in.collection":"In collectie","translation.no":"Nee","translation.yes":"Ja","translation.edit":"Wijzig","translation.reason":"Reden","translation.details":"Detail","translation.not.all.fields.have.been.filled.in":"Niet all velden zijn ingevuld",BORROWED:"Geleend",SOLD:"Verkocht",LOST:"Verloren","user.with.username.exists":"User met deze username bestaat reeds"}),a.translations("en",{"translation.author":"Author","translation.authors":"Authors","translation.publishers":"Publishers","translation.add.author":"Add author","translation.author.saved":"Author saved","translation.existing.authors.found":"Warning! Following authors already exist:","translation.in.collection":"In collection","translation.no":"No","translation.yes":"Yes","translation.edit":"Edit","translation.reason":"Reason","translation.details":"Details","translation.not.all.fields.have.been.filled.in":"Not all fields have been filled in",BORROWED:"Borrowed",SOLD:"Sold",LOST:"Lost","user.with.username.exists":"User with username already exists"}),a.preferredLanguage("nl"),a.useSanitizeValueStrategy("sanitize")}]),angular.module("com.bendani.bibliomania.main.controller",["com.bendani.bibliomania.user.model","com.bendani.bibliomania.log.out.model"]).controller("MainController",["$scope","$rootScope","ErrorContainer","InfoContainer","TitlePanelService","LogOut","$location",function(a,b,c,d,e,f,g){b.errorContainer=c,b.infoContainer=d,b.titlePanelService=e,a.logOut=function(){f.logOut(function(){g.path("#/login")},c.handleRestError)}}]),angular.module("com.bendani.bibliomania.name.directive",[]).directive("name",function(){return{scope:{nameModel:"=ngModel",submitAttempted:"="},restrict:"E",templateUrl:"../BiblioMania/views/partials/name-directive.html"}}),function(){"use strict";function a(a){function b(){return a.loggedInUser?a.loggedInUser.permissions:[]}function c(a){return void 0===a?!1:1===a.length&&"ANY"===a[0]?!0:_.any(a,function(a){return b().indexOf(a)>-1})}function d(a){var c=b();if(void 0===a||void 0===c)return!1;for(var d=0;d<c.length;d++)if(c[d]===a.trim())return!0;return!1}return{getUserPermissions:b,hasAllowedPermissions:c,hasPermission:d}}function b(a,b){function c(a,c,d){function e(){return a.$eval(j)&&g()}function g(){var c=f(a,d.permission);return b.hasAllowedPermissions(c)}function i(){return!!j}var j=d.ngIf;d.ngIf=i()?e:g,h.link.apply(h,arguments)}function d(a){return void 0!==a&&!e(a)}function e(a){return a.match(/^[A-Z0-9_]+([ ]*,[ ]*[A-Z0-9_]+)*$/)}function f(a,b){var c=d(b)?a.$eval(b):b;return void 0===c?[]:g(c)}function g(a){return Array.isArray(a)?a:a.split(",")}var h=a[0];return{transclude:h.transclude,priority:h.priority-1,terminal:h.terminal,restrict:h.restrict,link:c}}angular.module("com.bendani.bibliomania.permission",["com.bendani.bibliomania.user.model"]).factory("PermissionService",["$rootScope",a]).directive("permission",["ngIfDirective","PermissionService",b])}(),angular.module("com.bendani.bibliomania.price.formatter",[]).directive("priceFormatter",[function(){return{restrict:"A",require:"?ngModel",link:function(a,b,c,d){return d?(d.$formatters.push(function(a){return a?a.toString().replace(".",","):a}),void d.$parsers.push(function(a){return a?a.toString().replace(",","."):a})):null}}}]),angular.module("com.bendani.bibliomania.title.panel",[]).provider("TitlePanelService",function(){function a(a,b){var c,d,e,f=!0,g=function(){c=void 0,angular.element("#titlePanelRightPanel").empty(),e=void 0,f=!0},h=function(){return c},i=function(a){c=a},j=function(){return e},k=function(){void 0!==e?b.path(e):a.back()},l=function(a){e=a},m=function(){return f},n=function(a){f=a},o=function(a){angular.element("#titlePanelRightPanel").empty(),angular.element("#titlePanelRightPanel").append(a),d=a},p=function(){return d},q={getTitle:h,setTitle:i,getRightPanel:p,setRightPanel:o,resetPanel:g,getPreviousUrl:j,setPreviousUrl:l,goToPreviousUrl:k,shouldShowPreviousButton:m,setShowPreviousButton:n};return a.$on("$routeChangeSuccess",q.resetPanel),q}this.$get=["$rootScope","$location",function(b,c){return new a(b,c)}]}).directive("titlePanel",["TitlePanelService",function(a){return{restrict:"E",templateUrl:"../BiblioMania/views/partials/title-panel.html",replace:!0}}]),function(){angular.module("com.bendani.bibliomania.tree.directive",[]).directive("treeView",[function(){return{restrict:"E",templateUrl:"../BiblioMania/views/partials/tree-view.html",replace:!0,scope:{treeData:"=",onSelect:"&",initialSelection:"@",treeControl:"="},link:function(a,b,c){function d(a){var b=[];b.push(a);for(var c=0;c<a.children.length;c++){var e=a.children[c];b.push.apply(b,d(e))}return b}return a.treeRows=[],a.$watch("treeData",function(b){if(void 0!==a.treeData){a.treeRows=[];for(var c=0;c<a.treeData.length;c++){var e=a.treeData[c];a.treeRows.push.apply(a.treeRows,d(e))}}},!0),a.clickBranch=function(a){console.log("branch selected: "+a)},null!=a.treeControl&&angular.isObject(a.treeControl)?(tree=a.treeControl,tree.expand_all=function(){return for_each_branch(function(a,b){return a.expanded=!0})},tree.collapse_all=function(){return for_each_branch(function(a,b){return a.expanded=!1})},tree.get_first_branch=function(){return treeDataLength=a.treeData.length,treeDataLength>0?a.treeData[0]:void 0},tree.select_first_branch=function(){var a;return a=tree.get_first_branch(),tree.select_branch(a)},tree.get_selected_branch=function(){return selected_branch},tree.get_parent_branch=function(a){return get_parent(a)},tree.select_branch=function(a){return select_branch(a),a},tree.get_children=function(a){return a.children},tree.select_parent_branch=function(a){var b;return null==a&&(a=tree.get_selected_branch()),null!=a&&(b=tree.get_parent_branch(a),null!=b)?(tree.select_branch(b),b):void 0},tree.add_branch=function(b,c){return null!=b?(b.children.push(c),b.expanded=!0):a.treeData.push(c),c},tree.add_root_branch=function(a){return tree.add_branch(null,a),a},tree.expand_branch=function(a){return null==a&&(a=tree.get_selected_branch()),null!=a?(a.expanded=!0,a):void 0},tree.collapse_branch=function(a){return null==a&&(a=selected_branch),null!=a?(a.expanded=!1,a):void 0},tree.get_siblings=function(b){var c,d;return null==b&&(b=selected_branch),null!=b?(c=tree.get_parent_branch(b),d=c?c.children:a.treeData):void 0},tree.get_next_sibling=function(a){var b,c;return null==a&&(a=selected_branch),null!=a&&(c=tree.get_siblings(a),treeDataLength=c.length,b=c.indexOf(a),b<treeDataLength)?c[b+1]:void 0},tree.get_prev_sibling=function(a){var b,c;return null==a&&(a=selected_branch),c=tree.get_siblings(a),treeDataLength=c.length,b=c.indexOf(a),b>0?c[b-1]:void 0},tree.select_next_sibling=function(a){var b;return null==a&&(a=selected_branch),null!=a&&(b=tree.get_next_sibling(a),null!=b)?tree.select_branch(b):void 0},tree.select_prev_sibling=function(a){var b;return null==a&&(a=selected_branch),null!=a&&(b=tree.get_prev_sibling(a),null!=b)?tree.select_branch(b):void 0},tree.get_first_child=function(a){var b;return null==a&&(a=selected_branch),null!=a&&(null!=(b=a.children)?b.length:void 0)>0?a.children[0]:void 0},tree.get_closest_ancestor_next_sibling=function(a){var b,c;return b=tree.get_next_sibling(a),null!=b?b:(c=tree.get_parent_branch(a),tree.get_closest_ancestor_next_sibling(c))},tree.get_next_branch=function(a){var b;return null==a&&(a=selected_branch),null!=a?(b=tree.get_first_child(a),null!=b?b:b=tree.get_closest_ancestor_next_sibling(a)):void 0},tree.select_next_branch=function(a){var b;return null==a&&(a=selected_branch),null!=a&&(b=tree.get_next_branch(a),null!=b)?(tree.select_branch(b),b):void 0},tree.last_descendant=function(a){var b;return treeDataLength=a.children.length,0===treeDataLength?a:(b=a.children[treeDataLength-1],tree.last_descendant(b))},tree.get_prev_branch=function(a){var b,c;return null==a&&(a=selected_branch),null!=a?(c=tree.get_prev_sibling(a),null!=c?tree.last_descendant(c):b=tree.get_parent_branch(a)):void 0},tree.select_prev_branch=function(a){var b;return null==a&&(a=selected_branch),null!=a&&(b=tree.get_prev_branch(a),null!=b)?(tree.select_branch(b),b):void 0}):void 0}}}])}.call(this),angular.module("com.bendani.bibliomania.country.model",["ngResource"]).factory("Country",["$resource",function(a){return a("../BiblioMania/countries",{})}]),angular.module("com.bendani.bibliomania.edit.first.print.ui",["angular-growl","com.bendani.bibliomania.first.print.info.model","com.bendani.bibliomania.country.model","com.bendani.bibliomania.publisher.model","com.bendani.bibliomania.language.model","com.bendani.bibliomania.title.panel"]).config(["$routeProvider",function(a){a.when("/edit-first-print/:id",{templateUrl:"../BiblioMania/views/partials/firstprint/edit-first-print.html",controller:"FirstPrintController",resolve:{firstPrintInfoModel:["FirstPrintInfo","$route","ErrorContainer",function(a,b,c){return a.get({id:b.current.params.id},function(){},c.handleRestError)}],onSave:["FirstPrintInfo","$route","ErrorContainer","growl","TitlePanelService",function(a,b,c,d,e){return function(b){a.update(b,function(){e.goToPreviousUrl(),d.addSuccessMessage("Eerste druk opgeslagen")},c.handleRestError)}}],init:function(){return function(){}}}}),a.when("/create-first-print-and-link-to-book/:bookId",{templateUrl:"../BiblioMania/views/partials/firstprint/edit-first-print.html",controller:"FirstPrintController",resolve:{firstPrintInfoModel:function(){return{}},onSave:["FirstPrintInfo","$route","ErrorContainer","growl","$location",function(a,b,c,d,e){return function(f){f.bookIdToLink=b.current.params.bookId,a.save(f,function(){d.addSuccessMessage("Eerste druk opgeslagen"),e.path("/book-details/"+b.current.params.bookId)},c.handleRestError)}}],init:["InfoContainer","Book","ErrorContainer","$route",function(a,b,c,d){return function(){b.get({id:d.current.params.bookId},function(b){a.setInfoCode("Deze eerste druk zal gelinked worden met het boek: "+b.title)},c.handleRestError)}}]}})}]).controller("FirstPrintController",["$scope","ErrorContainer","Country","Language","Publisher","TitlePanelService","firstPrintInfoModel","onSave","init",function(a,b,c,d,e,f,g,h,i){function j(){f.setTitle("Eerste druk"),a.model=g,a.data={},a.data.countries=c.query(function(){},b.handleRestError),a.data.publishers=e.query(function(){},b.handleRestError),a.data.languages=d.query(function(){},b.handleRestError),a.submitForm=h}i(),j()}]),angular.module("com.bendani.bibliomania.first.print.info.model",["ngResource"]).factory("FirstPrintInfo",["$resource",function(a){return a("../BiblioMania/firstprints/:id",{},{update:{method:"PUT"},linkBook:{method:"POST",url:"../BiblioMania/firstprints/:id/books"}})}]),angular.module("com.bendani.bibliomania.first.print.selection.modal.service",["com.bendani.bibliomania.first.print.info.model"]).provider("FirstPrintSelectionModalService",function(){function a(a){var b={show:function(b){var c=a.open({templateUrl:"../BiblioMania/views/partials/firstprint/select-first-print-modal.html"});c.result.then(b)}};return b}this.$get=["$uibModal",function(b){return new a(b)}]}).controller("FirstPrintSelectionController",["$scope","FirstPrintInfo","ErrorContainer",function(a,b,c){function d(){a.firstPrintSelectionModal={},a.firstPrintSelectionModal.data={},a.firstPrintSelectionModal.data.firstPrints=b.query(function(){},c.handleRestError),a.firstPrintSelectionModal.searchFirstPrintQuery="",a.firstPrintSelectionModal.predicate="title",a.firstPrintSelectionModal.reverse=!1}a.selectFirstPrint=function(b){a.$close(b)},a.search=function(b){return b.title&&-1!==b.title.toLowerCase().indexOf(a.firstPrintSelectionModal.searchFirstPrintQuery)?!0:!1},a.order=function(b){a.firstPrintSelectionModal.reverse=a.firstPrintSelectionModal.predicate===b?!a.firstPrintSelectionModal.reverse:!1,a.firstPrintSelectionModal.predicate=b},d()}]),angular.module("com.bendani.bibliomania.genre.model",["ngResource"]).factory("Genre",["$resource",function(a){return a("../BiblioMania/genres",{})}]),angular.module("com.bendani.bibliomania.language.model",["ngResource"]).factory("Language",["$resource",function(a){return a("../BiblioMania/languages",{})}]),function(){var a,b=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};a=angular.module("angularBootstrapNavTree",[]),a.directive("abnTree",["$timeout",function(a){return{restrict:"E",template:'<ul class="nav nav-list nav-pills nav-stacked abn-tree">\n  <li id="{{row.label}}" ng-repeat="row in tree_rows | filter:{visible:true} track by row.branch.uid" ng-animate="\'abn-tree-animate\'" ng-class="\'level-\' + {{ row.level }} + (row.branch.selected ? \' active\':\'\') + \' \' +row.classes.join(\' \')" class="abn-tree-row"><a ng-click="user_clicks_branch(row.branch)"><i id="branch-click-{{row.label}}" ng-class="row.tree_icon" ng-click="row.branch.expanded = !row.branch.expanded" class="indented tree-icon"> </i><span class="indented tree-label">{{ row.label }} </span></a></li>\n</ul>',replace:!0,scope:{treeData:"=",onSelect:"&",initialSelection:"@",treeControl:"="},link:function(c,d,e){var f,g,h,i,j,k,l,m,n,o,p;if(f=function(a){return void console.log("ERROR:"+a)},null==e.iconExpand&&(e.iconExpand="icon-plus  glyphicon glyphicon-plus  fa fa-plus"),null==e.iconCollapse&&(e.iconCollapse="icon-minus glyphicon glyphicon-minus fa fa-minus"),
null==e.iconLeaf&&(e.iconLeaf="icon-file  glyphicon glyphicon-file  fa fa-file"),null==e.expandLevel&&(e.expandLevel="3"),h=parseInt(e.expandLevel,10),!c.treeData)return void alert("no treeData defined for the tree!");if(null==c.treeData.length){if(null==treeData.label)return void alert("treeData should be an array of root branches");c.treeData=[treeData]}return j=function(a){var b,d,e,f,g,h;for(b=function(c,d){var e,f,g,h,i;if(a(c,d),null!=c.children){for(h=c.children,i=[],f=0,g=h.length;g>f;f++)e=h[f],i.push(b(e,d+1));return i}},g=c.treeData,h=[],e=0,f=g.length;f>e;e++)d=g[e],h.push(b(d,1));return h},o=null,n=function(b){if(!b)return null!=o&&(o.selected=!1),void(o=null);if(b!==o){if(null!=o&&(o.selected=!1),b.selected=!0,o=b,g(b),null!=b.onSelect)return a(function(){return b.onSelect(b)});if(null!=c.onSelect)return a(function(){return c.onSelect({branch:b})})}},c.user_clicks_branch=function(a){return a!==o?n(a):void 0},k=function(a){var b;return b=void 0,a.parent_uid&&j(function(c){return c.uid===a.parent_uid?b=c:void 0}),b},i=function(a,b){var c;return c=k(a),null!=c?(b(c),i(c,b)):void 0},g=function(a){return i(a,function(a){return a.expanded=!0})},c.tree_rows=[],m=function(){var a,d,f,g,h,i;for(j(function(a,b){return a.uid?void 0:a.uid=""+Math.random()}),console.log("UIDs are set."),j(function(a){var b,c,d,e,f;if(angular.isArray(a.children)){for(e=a.children,f=[],c=0,d=e.length;d>c;c++)b=e[c],f.push(b.parent_uid=a.uid);return f}}),c.tree_rows=[],j(function(a){var b,c;return a.children?a.children.length>0?(c=function(a){return"string"==typeof a?{label:a,children:[]}:a},a.children=function(){var d,e,f,g;for(f=a.children,g=[],d=0,e=f.length;e>d;d++)b=f[d],g.push(c(b));return g}()):void 0:a.children=[]}),a=function(d,f,g){var h,i,j,k,l,m,n;if(null==f.expanded&&(f.expanded=!1),null==f.classes&&(f.classes=[]),f.noLeaf||f.children&&0!==f.children.length?j=f.expanded?e.iconCollapse:e.iconExpand:(j=e.iconLeaf,b.call(f.classes,"leaf")<0&&f.classes.push("leaf")),c.tree_rows.push({level:d,branch:f,label:f.label,classes:f.classes,tree_icon:j,visible:g}),null!=f.children){for(m=f.children,n=[],k=0,l=m.length;l>k;k++)h=m[k],i=g&&f.expanded,n.push(a(d+1,h,i));return n}},h=c.treeData,i=[],f=0,g=h.length;g>f;f++)d=h[f],i.push(a(1,d,!0));return i},c.$watch("treeData",m,!0),null!=e.initialSelection&&j(function(b){return b.label===e.initialSelection?a(function(){return n(b)}):void 0}),l=c.treeData.length,console.log("num root branches = "+l),j(function(a,b){return a.level=b,a.expanded=a.level<h}),null!=c.treeControl&&angular.isObject(c.treeControl)?(p=c.treeControl,p.expand_all=function(){return j(function(a,b){return a.expanded=!0})},p.collapse_all=function(){return j(function(a,b){return a.expanded=!1})},p.get_first_branch=function(){return l=c.treeData.length,l>0?c.treeData[0]:void 0},p.select_first_branch=function(){var a;return a=p.get_first_branch(),p.select_branch(a)},p.get_selected_branch=function(){return o},p.get_parent_branch=function(a){return k(a)},p.select_branch=function(a){return n(a),a},p.get_children=function(a){return a.children},p.select_parent_branch=function(a){var b;return null==a&&(a=p.get_selected_branch()),null!=a&&(b=p.get_parent_branch(a),null!=b)?(p.select_branch(b),b):void 0},p.add_branch=function(a,b){return null!=a?(a.children.push(b),a.expanded=!0):c.treeData.push(b),b},p.add_root_branch=function(a){return p.add_branch(null,a),a},p.expand_branch=function(a){return null==a&&(a=p.get_selected_branch()),null!=a?(a.expanded=!0,a):void 0},p.collapse_branch=function(a){return null==a&&(a=o),null!=a?(a.expanded=!1,a):void 0},p.get_siblings=function(a){var b,d;return null==a&&(a=o),null!=a?(b=p.get_parent_branch(a),d=b?b.children:c.treeData):void 0},p.get_next_sibling=function(a){var b,c;return null==a&&(a=o),null!=a&&(c=p.get_siblings(a),l=c.length,b=c.indexOf(a),l>b)?c[b+1]:void 0},p.get_prev_sibling=function(a){var b,c;return null==a&&(a=o),c=p.get_siblings(a),l=c.length,b=c.indexOf(a),b>0?c[b-1]:void 0},p.select_next_sibling=function(a){var b;return null==a&&(a=o),null!=a&&(b=p.get_next_sibling(a),null!=b)?p.select_branch(b):void 0},p.select_prev_sibling=function(a){var b;return null==a&&(a=o),null!=a&&(b=p.get_prev_sibling(a),null!=b)?p.select_branch(b):void 0},p.get_first_child=function(a){var b;return null==a&&(a=o),null!=a&&(null!=(b=a.children)?b.length:void 0)>0?a.children[0]:void 0},p.get_closest_ancestor_next_sibling=function(a){var b,c;return b=p.get_next_sibling(a),null!=b?b:(c=p.get_parent_branch(a),p.get_closest_ancestor_next_sibling(c))},p.get_next_branch=function(a){var b;return null==a&&(a=o),null!=a?(b=p.get_first_child(a),null!=b?b:b=p.get_closest_ancestor_next_sibling(a)):void 0},p.select_next_branch=function(a){var b;return null==a&&(a=o),null!=a&&(b=p.get_next_branch(a),null!=b)?(p.select_branch(b),b):void 0},p.last_descendant=function(a){var b;return l=a.children.length,0===l?a:(b=a.children[l-1],p.last_descendant(b))},p.get_prev_branch=function(a){var b,c;return null==a&&(a=o),null!=a?(c=p.get_prev_sibling(a),null!=c?p.last_descendant(c):b=p.get_parent_branch(a)):void 0},p.select_prev_branch=function(a){var b;return null==a&&(a=o),null!=a&&(b=p.get_prev_branch(a),null!=b)?(p.select_branch(b),b):void 0}):void 0}}}])}.call(this),function(a,b){"use strict";function c(a){var c=[];return h(c,b.noop).chars(a),c.join("")}function d(a,c){var d,e={},f=a.split(",");for(d=0;d<f.length;d++)e[c?b.lowercase(f[d]):f[d]]=!0;return e}function e(b,c){null===b||void 0===b?b="":"string"!=typeof b&&(b=""+b),j.innerHTML=b;var d=5;do{if(0===d)throw k("uinput");d--,a.document.documentMode&&i(j),b=j.innerHTML,j.innerHTML=b}while(b!==j.innerHTML);for(d=j.firstChild;d;){switch(d.nodeType){case 1:c.start(d.nodeName.toLowerCase(),f(d.attributes));break;case 3:c.chars(d.textContent)}var e;if(!(e=d.firstChild)&&(1==d.nodeType&&c.end(d.nodeName.toLowerCase()),e=d.nextSibling,!e))for(;null==e&&(d=d.parentNode,d!==j);)e=d.nextSibling,1==d.nodeType&&c.end(d.nodeName.toLowerCase());d=e}for(;d=j.firstChild;)j.removeChild(d)}function f(a){for(var b={},c=0,d=a.length;d>c;c++){var e=a[c];b[e.name]=e.value}return b}function g(a){return a.replace(/&/g,"&amp;").replace(l,function(a){var b=a.charCodeAt(0);return a=a.charCodeAt(1),"&#"+(1024*(b-55296)+(a-56320)+65536)+";"}).replace(m,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function h(a,c){var d=!1,e=b.bind(a,a.push);return{start:function(a,f){a=b.lowercase(a),!d&&s[a]&&(d=a),d||!0!==t[a]||(e("<"),e(a),b.forEach(f,function(d,f){var h=b.lowercase(f),i="img"===a&&"src"===h||"background"===h;!0!==v[h]||!0===u[h]&&!c(d,i)||(e(" "),e(f),e('="'),e(g(d)),e('"'))}),e(">"))},end:function(a){a=b.lowercase(a),d||!0!==t[a]||!0===n[a]||(e("</"),e(a),e(">")),a==d&&(d=!1)},chars:function(a){d||e(g(a))}}}function i(b){if(b.nodeType===a.Node.ELEMENT_NODE)for(var c=b.attributes,d=0,e=c.length;e>d;d++){var f=c[d],g=f.name.toLowerCase();("xmlns:ns1"===g||0===g.indexOf("ns1:"))&&(b.removeAttributeNode(f),d--,e--)}(c=b.firstChild)&&i(c),(c=b.nextSibling)&&i(c)}var j,k=b.$$minErr("$sanitize"),l=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,m=/([^\#-~ |!])/g,n=d("area,br,col,hr,img,wbr"),o=d("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),p=d("rp,rt"),q=b.extend({},p,o),o=b.extend({},o,d("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,section,table,ul")),p=b.extend({},p,d("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),r=d("circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,stop,svg,switch,text,title,tspan"),s=d("script,style"),t=b.extend({},n,o,p,q),u=d("background,cite,href,longdesc,src,xlink:href"),q=d("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,tabindex,target,title,type,valign,value,vspace,width"),p=d("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan",!0),v=b.extend({},u,p,q);!function(a){if(!a.document||!a.document.implementation)throw k("noinert");a=a.document.implementation.createHTMLDocument("inert");var b=(a.documentElement||a.getDocumentElement()).getElementsByTagName("body");1===b.length?j=b[0]:(b=a.createElement("html"),j=a.createElement("body"),b.appendChild(j),a.appendChild(b))}(a),b.module("ngSanitize",[]).provider("$sanitize",function(){var a=!1;this.$get=["$$sanitizeUri",function(c){return a&&b.extend(t,r),function(a){var b=[];return e(a,h(b,function(a,b){return!/^unsafe:/.test(c(a,b))})),b.join("")}}],this.enableSvg=function(c){return b.isDefined(c)?(a=c,this):a}}),b.module("ngSanitize").filter("linky",["$sanitize",function(a){var d=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"\u201d\u2019]/i,e=/^mailto:/i,f=b.$$minErr("linky"),g=b.isString;return function(h,i,j){function k(a){a&&p.push(c(a))}function l(a,c){var d;if(p.push("<a "),b.isFunction(j)&&(j=j(a)),b.isObject(j))for(d in j)p.push(d+'="'+j[d]+'" ');else j={};!b.isDefined(i)||"target"in j||p.push('target="',i,'" '),p.push('href="',a.replace(/"/g,"&quot;"),'">'),k(c),p.push("</a>")}if(null==h||""===h)return h;if(!g(h))throw f("notstring",h);for(var m,n,o=h,p=[];h=o.match(d);)m=h[0],h[2]||h[4]||(m=(h[3]?"http://":"mailto:")+m),n=h.index,k(o.substr(0,n)),l(m,h[0].replace(e,"")),o=o.substring(n+h[0].length);return k(o),a(p.join(""))}}])}(window,window.angular),!function(a,b){"function"==typeof define&&define.amd?define([],function(){return b()}):"object"==typeof exports?module.exports=b():b()}(this,function(){function a(a){"use strict";var b=a.storageKey(),c=a.storage(),d=function(){var d=a.preferredLanguage();angular.isString(d)?a.use(d):c.put(b,a.use())};d.displayName="fallbackFromIncorrectStorageValue",c?c.get(b)?a.use(c.get(b))["catch"](d):d():angular.isString(a.preferredLanguage())&&a.use(a.preferredLanguage())}function b(){"use strict";var a,b,c=null,d=!1,e=!1;b={sanitize:function(a,b){return"text"===b&&(a=g(a)),a},escape:function(a,b){return"text"===b&&(a=f(a)),a},sanitizeParameters:function(a,b){return"params"===b&&(a=h(a,g)),a},escapeParameters:function(a,b){return"params"===b&&(a=h(a,f)),a}},b.escaped=b.escapeParameters,this.addStrategy=function(a,c){return b[a]=c,this},this.removeStrategy=function(a){return delete b[a],this},this.useStrategy=function(a){return d=!0,c=a,this},this.$get=["$injector","$log",function(f,g){var h={},i=function(a,c,d){return angular.forEach(d,function(d){if(angular.isFunction(d))a=d(a,c);else if(angular.isFunction(b[d]))a=b[d](a,c);else{if(!angular.isString(b[d]))throw new Error("pascalprecht.translate.$translateSanitization: Unknown sanitization strategy: '"+d+"'");if(!h[b[d]])try{h[b[d]]=f.get(b[d])}catch(e){throw h[b[d]]=function(){},new Error("pascalprecht.translate.$translateSanitization: Unknown sanitization strategy: '"+d+"'")}a=h[b[d]](a,c)}}),a},j=function(){d||e||(g.warn("pascalprecht.translate.$translateSanitization: No sanitization strategy has been configured. This can have serious security implications. See http://angular-translate.github.io/docs/#/guide/19_security for details."),e=!0)};return f.has("$sanitize")&&(a=f.get("$sanitize")),{useStrategy:function(a){return function(b){a.useStrategy(b)}}(this),sanitize:function(a,b,d){if(c||j(),arguments.length<3&&(d=c),!d)return a;var e=angular.isArray(d)?d:[d];return i(a,b,e)}}}];var f=function(a){var b=angular.element("<div></div>");return b.text(a),b.html()},g=function(b){if(!a)throw new Error("pascalprecht.translate.$translateSanitization: Error cannot find $sanitize service. Either include the ngSanitize module (https://docs.angularjs.org/api/ngSanitize) or use a sanitization strategy which does not depend on $sanitize, such as 'escape'.");return a(b)},h=function(a,b){if(angular.isObject(a)){var c=angular.isArray(a)?[]:{};return angular.forEach(a,function(a,d){c[d]=h(a,b)}),c}return angular.isNumber(a)?a:b(a)}}function c(a,b,c,d){"use strict";var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t={},u=[],v=a,w=[],x="translate-cloak",y=!1,z=!1,A=".",B=!1,C=0,D=!0,E="default",F={"default":function(a){return(a||"").split("-").join("_")},java:function(a){var b=(a||"").split("-").join("_"),c=b.split("_");return c.length>1?c[0].toLowerCase()+"_"+c[1].toUpperCase():b},bcp47:function(a){var b=(a||"").split("_").join("-"),c=b.split("-");return c.length>1?c[0].toLowerCase()+"-"+c[1].toUpperCase():b}},G="2.9.0",H=function(){if(angular.isFunction(d.getLocale))return d.getLocale();var a,c,e=b.$get().navigator,f=["language","browserLanguage","systemLanguage","userLanguage"];if(angular.isArray(e.languages))for(a=0;a<e.languages.length;a++)if(c=e.languages[a],c&&c.length)return c;for(a=0;a<f.length;a++)if(c=e[f[a]],c&&c.length)return c;return null};H.displayName="angular-translate/service: getFirstBrowserLanguage";var I=function(){var a=H()||"";return F[E]&&(a=F[E](a)),a};I.displayName="angular-translate/service: getLocale";var J=function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},K=function(){return this.toString().replace(/^\s+|\s+$/g,"")},L=function(a){if(a){for(var b=[],c=angular.lowercase(a),d=0,e=u.length;e>d;d++)b.push(angular.lowercase(u[d]));if(J(b,c)>-1)return a;if(f){var g;for(var h in f){var i=!1,j=Object.prototype.hasOwnProperty.call(f,h)&&angular.lowercase(h)===angular.lowercase(a);if("*"===h.slice(-1)&&(i=h.slice(0,-1)===a.slice(0,h.length-1)),(j||i)&&(g=f[h],J(b,angular.lowercase(g))>-1))return g}}var k=a.split("_");return k.length>1&&J(b,angular.lowercase(k[0]))>-1?k[0]:void 0}},M=function(a,b){if(!a&&!b)return t;if(a&&!b){if(angular.isString(a))return t[a]}else angular.isObject(t[a])||(t[a]={}),angular.extend(t[a],N(b));return this};this.translations=M,this.cloakClassName=function(a){return a?(x=a,this):x},this.nestedObjectDelimeter=function(a){return a?(A=a,this):A};var N=function(a,b,c,d){var e,f,g,h;b||(b=[]),c||(c={});for(e in a)Object.prototype.hasOwnProperty.call(a,e)&&(h=a[e],angular.isObject(h)?N(h,b.concat(e),c,e):(f=b.length?""+b.join(A)+A+e:e,b.length&&e===d&&(g=""+b.join(A),c[g]="@:"+f),c[f]=h));return c};N.displayName="flatObject",this.addInterpolation=function(a){return w.push(a),this},this.useMessageFormatInterpolation=function(){return this.useInterpolation("$translateMessageFormatInterpolation")},this.useInterpolation=function(a){return n=a,this},this.useSanitizeValueStrategy=function(a){return c.useStrategy(a),this},this.preferredLanguage=function(a){return a?(O(a),this):e};var O=function(a){return a&&(e=a),e};this.translationNotFoundIndicator=function(a){return this.translationNotFoundIndicatorLeft(a),this.translationNotFoundIndicatorRight(a),this},this.translationNotFoundIndicatorLeft=function(a){return a?(q=a,this):q},this.translationNotFoundIndicatorRight=function(a){return a?(r=a,this):r},this.fallbackLanguage=function(a){return P(a),this};var P=function(a){return a?(angular.isString(a)?(h=!0,g=[a]):angular.isArray(a)&&(h=!1,g=a),angular.isString(e)&&J(g,e)<0&&g.push(e),this):h?g[0]:g};this.use=function(a){if(a){if(!t[a]&&!o)throw new Error("$translateProvider couldn't find translationTable for langKey: '"+a+"'");return i=a,this}return i};var Q=function(a){return a?(v=a,this):l?l+v:v};this.storageKey=Q,this.useUrlLoader=function(a,b){return this.useLoader("$translateUrlLoader",angular.extend({url:a},b))},this.useStaticFilesLoader=function(a){return this.useLoader("$translateStaticFilesLoader",a)},this.useLoader=function(a,b){return o=a,p=b||{},this},this.useLocalStorage=function(){return this.useStorage("$translateLocalStorage")},this.useCookieStorage=function(){return this.useStorage("$translateCookieStorage")},this.useStorage=function(a){return k=a,this},this.storagePrefix=function(a){return a?(l=a,this):a},this.useMissingTranslationHandlerLog=function(){return this.useMissingTranslationHandler("$translateMissingTranslationHandlerLog")},this.useMissingTranslationHandler=function(a){return m=a,this},this.usePostCompiling=function(a){return y=!!a,this},this.forceAsyncReload=function(a){return z=!!a,this},this.uniformLanguageTag=function(a){return a?angular.isString(a)&&(a={standard:a}):a={},E=a.standard,this},this.determinePreferredLanguage=function(a){var b=a&&angular.isFunction(a)?a():I();return e=u.length?L(b)||b:b,this},this.registerAvailableLanguageKeys=function(a,b){return a?(u=a,b&&(f=b),this):u},this.useLoaderCache=function(a){return a===!1?s=void 0:a===!0?s=!0:"undefined"==typeof a?s="$translationCache":a&&(s=a),this},this.directivePriority=function(a){return void 0===a?C:(C=a,this)},this.statefulFilter=function(a){return void 0===a?D:(D=a,this)},this.$get=["$log","$injector","$rootScope","$q",function(a,b,c,d){var f,l,u,E=b.get(n||"$translateDefaultInterpolation"),F=!1,H={},I={},R=function(a,b,c,h,j){var m=j&&j!==i?L(j)||j:i;if(angular.isArray(a)){var n=function(a){for(var e={},f=[],g=function(a){var f=d.defer(),g=function(b){e[a]=b,f.resolve([a,b])};return R(a,b,c,h,j).then(g,g),f.promise},i=0,k=a.length;k>i;i++)f.push(g(a[i]));return d.all(f).then(function(){return e})};return n(a)}var o=d.defer();a&&(a=K.apply(a));var p=function(){var a=e?I[e]:I[m];if(l=0,k&&!a){var b=f.get(v);if(a=I[b],g&&g.length){var c=J(g,b);l=0===c?1:0,J(g,e)<0&&g.push(e)}}return a}();if(p){var q=function(){j||(m=i),ca(a,b,c,h,m).then(o.resolve,o.reject)};q.displayName="promiseResolved",p["finally"](q,o.reject)}else ca(a,b,c,h,m).then(o.resolve,o.reject);return o.promise},S=function(a){return q&&(a=[q,a].join(" ")),r&&(a=[a,r].join(" ")),a},T=function(a){i=a,k&&f.put(R.storageKey(),i),c.$emit("$translateChangeSuccess",{language:a}),E.setLocale(i);var b=function(a,b){H[b].setLocale(i)};b.displayName="eachInterpolatorLocaleSetter",angular.forEach(H,b),c.$emit("$translateChangeEnd",{language:a})},U=function(a){if(!a)throw"No language key specified for loading.";var e=d.defer();c.$emit("$translateLoadingStart",{language:a}),F=!0;var f=s;"string"==typeof f&&(f=b.get(f));var g=angular.extend({},p,{key:a,$http:angular.extend({},{cache:f},p.$http)}),h=function(b){var d={};c.$emit("$translateLoadingSuccess",{language:a}),angular.isArray(b)?angular.forEach(b,function(a){angular.extend(d,N(a))}):angular.extend(d,N(b)),F=!1,e.resolve({key:a,table:d}),c.$emit("$translateLoadingEnd",{language:a})};h.displayName="onLoaderSuccess";var i=function(a){c.$emit("$translateLoadingError",{language:a}),e.reject(a),c.$emit("$translateLoadingEnd",{language:a})};return i.displayName="onLoaderError",b.get(o)(g).then(h,i),e.promise};if(k&&(f=b.get(k),!f.get||!f.put))throw new Error("Couldn't use storage '"+k+"', missing get() or put() method!");if(w.length){var V=function(a){var c=b.get(a);c.setLocale(e||i),H[c.getInterpolationIdentifier()]=c};V.displayName="interpolationFactoryAdder",angular.forEach(w,V)}var W=function(a){var b=d.defer();if(Object.prototype.hasOwnProperty.call(t,a))b.resolve(t[a]);else if(I[a]){var c=function(a){M(a.key,a.table),b.resolve(a.table)};c.displayName="translationTableResolver",I[a].then(c,b.reject)}else b.reject();return b.promise},X=function(a,b,c,e){var f=d.defer(),g=function(d){if(Object.prototype.hasOwnProperty.call(d,b)){e.setLocale(a);var g=d[b];"@:"===g.substr(0,2)?X(a,g.substr(2),c,e).then(f.resolve,f.reject):f.resolve(e.interpolate(d[b],c)),e.setLocale(i)}else f.reject()};return g.displayName="fallbackTranslationResolver",W(a).then(g,f.reject),f.promise},Y=function(a,b,c,d){var e,f=t[a];if(f&&Object.prototype.hasOwnProperty.call(f,b)){if(d.setLocale(a),e=d.interpolate(f[b],c),"@:"===e.substr(0,2))return Y(a,e.substr(2),c,d);d.setLocale(i)}return e},Z=function(a,c){if(m){var d=b.get(m)(a,i,c);return void 0!==d?d:a}return a},$=function(a,b,c,e,f){var h=d.defer();if(a<g.length){var i=g[a];X(i,b,c,e).then(h.resolve,function(){$(a+1,b,c,e,f).then(h.resolve)})}else f?h.resolve(f):h.resolve(Z(b,c));return h.promise},_=function(a,b,c,d){var e;if(a<g.length){var f=g[a];e=Y(f,b,c,d),e||(e=_(a+1,b,c,d))}return e},aa=function(a,b,c,d){return $(u>0?u:l,a,b,c,d)},ba=function(a,b,c){return _(u>0?u:l,a,b,c)},ca=function(a,b,c,e,f){var h=d.defer(),i=f?t[f]:t,j=c?H[c]:E;if(i&&Object.prototype.hasOwnProperty.call(i,a)){var k=i[a];"@:"===k.substr(0,2)?R(k.substr(2),b,c,e,f).then(h.resolve,h.reject):h.resolve(j.interpolate(k,b))}else{var l;m&&!F&&(l=Z(a,b)),f&&g&&g.length?aa(a,b,j,e).then(function(a){h.resolve(a)},function(a){h.reject(S(a))}):m&&!F&&l?e?h.resolve(e):h.resolve(l):e?h.resolve(e):h.reject(S(a))}return h.promise},da=function(a,b,c,d){var e,f=d?t[d]:t,h=E;if(H&&Object.prototype.hasOwnProperty.call(H,c)&&(h=H[c]),f&&Object.prototype.hasOwnProperty.call(f,a)){var i=f[a];e="@:"===i.substr(0,2)?da(i.substr(2),b,c,d):h.interpolate(i,b)}else{var j;m&&!F&&(j=Z(a,b)),d&&g&&g.length?(l=0,e=ba(a,b,h)):e=m&&!F&&j?j:S(a)}return e},ea=function(a){j===a&&(j=void 0),I[a]=void 0};R.preferredLanguage=function(a){return a&&O(a),e},R.cloakClassName=function(){return x},R.nestedObjectDelimeter=function(){return A},R.fallbackLanguage=function(a){if(void 0!==a&&null!==a){if(P(a),o&&g&&g.length)for(var b=0,c=g.length;c>b;b++)I[g[b]]||(I[g[b]]=U(g[b]));R.use(R.use())}return h?g[0]:g},R.useFallbackLanguage=function(a){if(void 0!==a&&null!==a)if(a){var b=J(g,a);b>-1&&(u=b)}else u=0},R.proposedLanguage=function(){return j},R.storage=function(){return f},R.negotiateLocale=L,R.use=function(a){if(!a)return i;var b=d.defer();c.$emit("$translateChangeStart",{language:a});var e=L(a);return e&&(a=e),!z&&t[a]||!o||I[a]?j===a&&I[a]?I[a].then(function(a){return b.resolve(a.key),a},function(a){return b.reject(a),d.reject(a)}):(b.resolve(a),T(a)):(j=a,I[a]=U(a).then(function(c){return M(c.key,c.table),b.resolve(c.key),j===a&&T(c.key),c},function(a){return c.$emit("$translateChangeError",{language:a}),b.reject(a),c.$emit("$translateChangeEnd",{language:a}),d.reject(a)}),I[a]["finally"](function(){ea(a)})),b.promise},R.storageKey=function(){return Q()},R.isPostCompilingEnabled=function(){return y},R.isForceAsyncReloadEnabled=function(){return z},R.refresh=function(a){function b(){f.resolve(),c.$emit("$translateRefreshEnd",{language:a})}function e(){f.reject(),c.$emit("$translateRefreshEnd",{language:a})}if(!o)throw new Error("Couldn't refresh translation table, no loader registered!");var f=d.defer();if(c.$emit("$translateRefreshStart",{language:a}),a)if(t[a]){var h=function(c){M(c.key,c.table),a===i&&T(i),b()};h.displayName="refreshPostProcessor",U(a).then(h,e)}else e();else{var j=[],k={};if(g&&g.length)for(var l=0,m=g.length;m>l;l++)j.push(U(g[l])),k[g[l]]=!0;i&&!k[i]&&j.push(U(i));var n=function(a){t={},angular.forEach(a,function(a){M(a.key,a.table)}),i&&T(i),b()};n.displayName="refreshPostProcessor",d.all(j).then(n,e)}return f.promise},R.instant=function(a,b,c,d){var f=d&&d!==i?L(d)||d:i;if(null===a||angular.isUndefined(a))return a;if(angular.isArray(a)){for(var h={},j=0,k=a.length;k>j;j++)h[a[j]]=R.instant(a[j],b,c,d);return h}if(angular.isString(a)&&a.length<1)return a;a&&(a=K.apply(a));var l,n=[];e&&n.push(e),f&&n.push(f),g&&g.length&&(n=n.concat(g));for(var o=0,p=n.length;p>o;o++){var s=n[o];if(t[s]&&"undefined"!=typeof t[s][a]&&(l=da(a,b,c,f)),"undefined"!=typeof l)break}return l||""===l||(q||r?l=S(a):(l=E.interpolate(a,b),m&&!F&&(l=Z(a,b)))),l},R.versionInfo=function(){return G},R.loaderCache=function(){return s},R.directivePriority=function(){return C},R.statefulFilter=function(){return D},R.isReady=function(){return B};var fa=d.defer();fa.promise.then(function(){B=!0}),R.onReady=function(a){var b=d.defer();return angular.isFunction(a)&&b.promise.then(a),B?b.resolve():fa.promise.then(b.resolve),b.promise};var ga=c.$on("$translateReady",function(){fa.resolve(),ga(),ga=null}),ha=c.$on("$translateChangeEnd",function(){fa.resolve(),ha(),ha=null});if(o){if(angular.equals(t,{})&&R.use()&&R.use(R.use()),g&&g.length)for(var ia=function(a){return M(a.key,a.table),c.$emit("$translateChangeEnd",{language:a.key}),a},ja=0,ka=g.length;ka>ja;ja++){var la=g[ja];(z||!t[la])&&(I[la]=U(la).then(ia))}}else c.$emit("$translateReady",{language:R.use()});return R}]}function d(a,b){"use strict";var c,d={},e="default";return d.setLocale=function(a){c=a},d.getInterpolationIdentifier=function(){return e},d.useSanitizeValueStrategy=function(a){return b.useStrategy(a),this},d.interpolate=function(c,d){d=d||{},d=b.sanitize(d,"params");var e=a(c)(d);return e=b.sanitize(e,"text")},d}function e(a,b,c,d,e,g){"use strict";var h=function(){return this.toString().replace(/^\s+|\s+$/g,"")};return{restrict:"AE",scope:!0,priority:a.directivePriority(),compile:function(b,i){var j=i.translateValues?i.translateValues:void 0,k=i.translateInterpolation?i.translateInterpolation:void 0,l=b[0].outerHTML.match(/translate-value-+/i),m="^(.*)("+c.startSymbol()+".*"+c.endSymbol()+")(.*)",n="^(.*)"+c.startSymbol()+"(.*)"+c.endSymbol()+"(.*)";return function(b,o,p){b.interpolateParams={},b.preText="",b.postText="",b.translateNamespace=f(b);var q={},r=function(a,c,d){if(c.translateValues&&angular.extend(a,e(c.translateValues)(b.$parent)),l)for(var f in d)if(Object.prototype.hasOwnProperty.call(c,f)&&"translateValue"===f.substr(0,14)&&"translateValues"!==f){var g=angular.lowercase(f.substr(14,1))+f.substr(15);a[g]=d[f]}},s=function(a){if(angular.isFunction(s._unwatchOld)&&(s._unwatchOld(),s._unwatchOld=void 0),angular.equals(a,"")||!angular.isDefined(a)){var d=h.apply(o.text()),e=d.match(m);if(angular.isArray(e)){b.preText=e[1],b.postText=e[3],q.translate=c(e[2])(b.$parent);var f=d.match(n);angular.isArray(f)&&f[2]&&f[2].length&&(s._unwatchOld=b.$watch(f[2],function(a){q.translate=a,y()}))}else q.translate=d?d:void 0}else q.translate=a;y()},t=function(a){p.$observe(a,function(b){q[a]=b,y()})};r(b.interpolateParams,p,i);var u=!0;p.$observe("translate",function(a){"undefined"==typeof a?s(""):""===a&&u||(q.translate=a,y()),u=!1});for(var v in p)p.hasOwnProperty(v)&&"translateAttr"===v.substr(0,13)&&t(v);if(p.$observe("translateDefault",function(a){b.defaultText=a,y()}),j&&p.$observe("translateValues",function(a){a&&b.$parent.$watch(function(){angular.extend(b.interpolateParams,e(a)(b.$parent))})}),l){var w=function(a){p.$observe(a,function(c){var d=angular.lowercase(a.substr(14,1))+a.substr(15);b.interpolateParams[d]=c})};for(var x in p)Object.prototype.hasOwnProperty.call(p,x)&&"translateValue"===x.substr(0,14)&&"translateValues"!==x&&w(x)}var y=function(){for(var a in q)q.hasOwnProperty(a)&&void 0!==q[a]&&z(a,q[a],b,b.interpolateParams,b.defaultText,b.translateNamespace)},z=function(b,c,d,e,f,g){c?(g&&"."===c.charAt(0)&&(c=g+c),a(c,e,k,f,d.translateLanguage).then(function(a){A(a,d,!0,b)},function(a){A(a,d,!1,b)})):A(c,d,!1,b)},A=function(b,c,e,f){if("translate"===f){e||"undefined"==typeof c.defaultText||(b=c.defaultText),o.empty().append(c.preText+b+c.postText);var g=a.isPostCompilingEnabled(),h="undefined"!=typeof i.translateCompile,j=h&&"false"!==i.translateCompile;(g&&!h||j)&&d(o.contents())(c)}else{e||"undefined"==typeof c.defaultText||(b=c.defaultText);var k=p.$attr[f];"data-"===k.substr(0,5)&&(k=k.substr(5)),k=k.substr(15),o.attr(k,b)}};(j||l||p.translateDefault)&&b.$watch("interpolateParams",y,!0),b.$watch("translateLanguage",y);var B=g.$on("$translateChangeSuccess",y);o.text().length?s(p.translate?p.translate:""):p.translate&&s(p.translate),y(),b.$on("$destroy",B)}}}}function f(a){"use strict";return a.translateNamespace?a.translateNamespace:a.$parent?f(a.$parent):void 0}function g(a,b){"use strict";return{compile:function(c){var d=function(){c.addClass(a.cloakClassName())},e=function(){c.removeClass(a.cloakClassName())};return a.onReady(function(){e()}),d(),function(c,f,g){g.translateCloak&&g.translateCloak.length&&(g.$observe("translateCloak",function(b){a(b).then(e,d)}),b.$on("$translateChangeSuccess",function(){a(g.translateCloak).then(e,d)}))}}}}function h(){"use strict";return{restrict:"A",scope:!0,compile:function(){return{pre:function(a,b,c){a.translateNamespace=f(a),a.translateNamespace&&"."===c.translateNamespace.charAt(0)?a.translateNamespace+=c.translateNamespace:a.translateNamespace=c.translateNamespace}}}}}function f(a){"use strict";return a.translateNamespace?a.translateNamespace:a.$parent?f(a.$parent):void 0}function i(){"use strict";return{restrict:"A",scope:!0,compile:function(){return function(a,b,c){c.$observe("translateLanguage",function(b){a.translateLanguage=b})}}}}function j(a,b){"use strict";var c=function(c,d,e,f){return angular.isObject(d)||(d=a(d)(this)),b.instant(c,d,e,f)};return b.statefulFilter()&&(c.$stateful=!0),c}function k(a){"use strict";return a("translations")}return angular.module("pascalprecht.translate",["ng"]).run(a),a.$inject=["$translate"],a.displayName="runTranslate",angular.module("pascalprecht.translate").provider("$translateSanitization",b),angular.module("pascalprecht.translate").constant("pascalprechtTranslateOverrider",{}).provider("$translate",c),c.$inject=["$STORAGE_KEY","$windowProvider","$translateSanitizationProvider","pascalprechtTranslateOverrider"],c.displayName="displayName",angular.module("pascalprecht.translate").factory("$translateDefaultInterpolation",d),d.$inject=["$interpolate","$translateSanitization"],d.displayName="$translateDefaultInterpolation",angular.module("pascalprecht.translate").constant("$STORAGE_KEY","NG_TRANSLATE_LANG_KEY"),angular.module("pascalprecht.translate").directive("translate",e),e.$inject=["$translate","$q","$interpolate","$compile","$parse","$rootScope"],e.displayName="translateDirective",angular.module("pascalprecht.translate").directive("translateCloak",g),g.$inject=["$translate","$rootScope"],g.displayName="translateCloakDirective",angular.module("pascalprecht.translate").directive("translateNamespace",h),h.displayName="translateNamespaceDirective",angular.module("pascalprecht.translate").directive("translateLanguage",i),i.displayName="translateLanguageDirective",angular.module("pascalprecht.translate").filter("translate",j),j.$inject=["$parse","$translate"],j.displayName="translateFilterFactory",angular.module("pascalprecht.translate").factory("$translationCache",k),k.$inject=["$cacheFactory"],k.displayName="$translationCache","pascalprecht.translate"}),!function(){function a(a,b){window.XMLHttpRequest.prototype[a]=b(window.XMLHttpRequest.prototype[a])}function b(a,b,c){try{Object.defineProperty(a,b,{get:c})}catch(d){}}if(window.FileAPI||(window.FileAPI={}),!window.XMLHttpRequest)throw"AJAX is not supported. XMLHttpRequest is not defined.";if(FileAPI.shouldLoad=!window.FormData||FileAPI.forceLoad,FileAPI.shouldLoad){var c=function(a){if(!a.__listeners){a.upload||(a.upload={}),a.__listeners=[];
var b=a.upload.addEventListener;a.upload.addEventListener=function(c,d){a.__listeners[c]=d,b&&b.apply(this,arguments)}}};a("open",function(a){return function(b,d,e){c(this),this.__url=d;try{a.apply(this,[b,d,e])}catch(f){f.message.indexOf("Access is denied")>-1&&(this.__origError=f,a.apply(this,[b,"_fix_for_ie_crossdomain__",e]))}}}),a("getResponseHeader",function(a){return function(b){return this.__fileApiXHR&&this.__fileApiXHR.getResponseHeader?this.__fileApiXHR.getResponseHeader(b):null==a?null:a.apply(this,[b])}}),a("getAllResponseHeaders",function(a){return function(){return this.__fileApiXHR&&this.__fileApiXHR.getAllResponseHeaders?this.__fileApiXHR.getAllResponseHeaders():null==a?null:a.apply(this)}}),a("abort",function(a){return function(){return this.__fileApiXHR&&this.__fileApiXHR.abort?this.__fileApiXHR.abort():null==a?null:a.apply(this)}}),a("setRequestHeader",function(a){return function(b,d){if("__setXHR_"===b){c(this);var e=d(this);e instanceof Function&&e(this)}else this.__requestHeaders=this.__requestHeaders||{},this.__requestHeaders[b]=d,a.apply(this,arguments)}}),a("send",function(a){return function(){var c=this;if(arguments[0]&&arguments[0].__isFileAPIShim){var d=arguments[0],e={url:c.__url,jsonp:!1,cache:!0,complete:function(a,d){a&&angular.isString(a)&&-1!==a.indexOf("#2174")&&(a=null),c.__completed=!0,!a&&c.__listeners.load&&c.__listeners.load({type:"load",loaded:c.__loaded,total:c.__total,target:c,lengthComputable:!0}),!a&&c.__listeners.loadend&&c.__listeners.loadend({type:"loadend",loaded:c.__loaded,total:c.__total,target:c,lengthComputable:!0}),"abort"===a&&c.__listeners.abort&&c.__listeners.abort({type:"abort",loaded:c.__loaded,total:c.__total,target:c,lengthComputable:!0}),void 0!==d.status&&b(c,"status",function(){return 0===d.status&&a&&"abort"!==a?500:d.status}),void 0!==d.statusText&&b(c,"statusText",function(){return d.statusText}),b(c,"readyState",function(){return 4}),void 0!==d.response&&b(c,"response",function(){return d.response});var e=d.responseText||(a&&0===d.status&&"abort"!==a?a:void 0);b(c,"responseText",function(){return e}),b(c,"response",function(){return e}),a&&b(c,"err",function(){return a}),c.__fileApiXHR=d,c.onreadystatechange&&c.onreadystatechange(),c.onload&&c.onload()},progress:function(a){if(a.target=c,c.__listeners.progress&&c.__listeners.progress(a),c.__total=a.total,c.__loaded=a.loaded,a.total===a.loaded){var b=this;setTimeout(function(){c.__completed||(c.getAllResponseHeaders=function(){},b.complete(null,{status:204,statusText:"No Content"}))},FileAPI.noContentTimeout||1e4)}},headers:c.__requestHeaders};e.data={},e.files={};for(var f=0;f<d.data.length;f++){var g=d.data[f];null!=g.val&&null!=g.val.name&&null!=g.val.size&&null!=g.val.type?e.files[g.key]=g.val:e.data[g.key]=g.val}setTimeout(function(){if(!FileAPI.hasFlash)throw'Adode Flash Player need to be installed. To check ahead use "FileAPI.hasFlash"';c.__fileApiXHR=FileAPI.upload(e)},1)}else{if(this.__origError)throw this.__origError;a.apply(c,arguments)}}}),window.XMLHttpRequest.__isFileAPIShim=!0,window.FormData=FormData=function(){return{append:function(a,b,c){b.__isFileAPIBlobShim&&(b=b.data[0]),this.data.push({key:a,val:b,name:c})},data:[],__isFileAPIShim:!0}},window.Blob=Blob=function(a){return{data:a,__isFileAPIBlobShim:!0}}}}(),function(){function a(a){return"input"===a[0].tagName.toLowerCase()&&a.attr("type")&&"file"===a.attr("type").toLowerCase()}function b(){try{var a=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(a)return!0}catch(b){if(void 0!==navigator.mimeTypes["application/x-shockwave-flash"])return!0}return!1}function c(a){var b=0,c=0;if(window.jQuery)return jQuery(a).offset();if(a.offsetParent)do b+=a.offsetLeft-a.scrollLeft,c+=a.offsetTop-a.scrollTop,a=a.offsetParent;while(a);return{left:b,top:c}}if(FileAPI.shouldLoad){if(FileAPI.hasFlash=b(),FileAPI.forceLoad&&(FileAPI.html5=!1),!FileAPI.upload){var d,e,f,g,h,i=document.createElement("script"),j=document.getElementsByTagName("script");if(window.FileAPI.jsUrl)d=window.FileAPI.jsUrl;else if(window.FileAPI.jsPath)e=window.FileAPI.jsPath;else for(f=0;f<j.length;f++)if(h=j[f].src,g=h.search(/\/ng\-file\-upload[\-a-zA-z0-9\.]*\.js/),g>-1){e=h.substring(0,g+1);break}null==FileAPI.staticPath&&(FileAPI.staticPath=e),i.setAttribute("src",d||e+"FileAPI.js"),document.getElementsByTagName("head")[0].appendChild(i)}FileAPI.ngfFixIE=function(d,e,f){if(!b())throw'Adode Flash Player need to be installed. To check ahead use "FileAPI.hasFlash"';var g=function(){d.attr("disabled")?e&&e.removeClass("js-fileapi-wrapper"):(e.attr("__ngf_flash_")||(e.unbind("change"),e.unbind("click"),e.bind("change",function(a){h.apply(this,[a]),f.apply(this,[a])}),e.attr("__ngf_flash_","true")),e.addClass("js-fileapi-wrapper"),a(d)||e.css("position","absolute").css("top",c(d[0]).top+"px").css("left",c(d[0]).left+"px").css("width",d[0].offsetWidth+"px").css("height",d[0].offsetHeight+"px").css("filter","alpha(opacity=0)").css("display",d.css("display")).css("overflow","hidden").css("z-index","900000").css("visibility","visible"))};d.bind("mouseenter",g);var h=function(a){for(var b=FileAPI.getFiles(a),c=0;c<b.length;c++)void 0===b[c].size&&(b[c].size=0),void 0===b[c].name&&(b[c].name="file"),void 0===b[c].type&&(b[c].type="undefined");a.target||(a.target={}),a.target.files=b,a.target.files!==b&&(a.__files_=b),(a.__files_||a.target.files).item=function(b){return(a.__files_||a.target.files)[b]||null}}},FileAPI.disableFileInput=function(a,b){b?a.removeClass("js-fileapi-wrapper"):a.addClass("js-fileapi-wrapper")}}}(),window.FileReader||(window.FileReader=function(){var a=this,b=!1;this.listeners={},this.addEventListener=function(b,c){a.listeners[b]=a.listeners[b]||[],a.listeners[b].push(c)},this.removeEventListener=function(b,c){a.listeners[b]&&a.listeners[b].splice(a.listeners[b].indexOf(c),1)},this.dispatchEvent=function(b){var c=a.listeners[b.type];if(c)for(var d=0;d<c.length;d++)c[d].call(a,b)},this.onabort=this.onerror=this.onload=this.onloadstart=this.onloadend=this.onprogress=null;var c=function(b,c){var d={type:b,target:a,loaded:c.loaded,total:c.total,error:c.error};return null!=c.result&&(d.target.result=c.result),d},d=function(d){b||(b=!0,a.onloadstart&&a.onloadstart(c("loadstart",d)));var e;"load"===d.type?(a.onloadend&&a.onloadend(c("loadend",d)),e=c("load",d),a.onload&&a.onload(e),a.dispatchEvent(e)):"progress"===d.type?(e=c("progress",d),a.onprogress&&a.onprogress(e),a.dispatchEvent(e)):(e=c("error",d),a.onerror&&a.onerror(e),a.dispatchEvent(e))};this.readAsDataURL=function(a){FileAPI.readAsDataURL(a,d)},this.readAsText=function(a){FileAPI.readAsText(a,d)}}),!window.XMLHttpRequest||window.FileAPI&&FileAPI.shouldLoad||(window.XMLHttpRequest.prototype.setRequestHeader=function(a){return function(b,c){if("__setXHR_"===b){var d=c(this);d instanceof Function&&d(this)}else a.apply(this,arguments)}}(window.XMLHttpRequest.prototype.setRequestHeader));var ngFileUpload=angular.module("ngFileUpload",[]);ngFileUpload.version="10.0.2",ngFileUpload.service("UploadBase",["$http","$q","$timeout",function(a,b,c){function d(d){function g(a){j.notify&&j.notify(a),k.progressFunc&&c(function(){k.progressFunc(a)})}function h(a){return null!=d._start&&f?{loaded:a.loaded+d._start,total:d._file.size,type:a.type,config:d,lengthComputable:!0,target:a.target}:a}function i(){a(d).then(function(a){f&&d._chunkSize&&!d._finished?(g({loaded:d._end,total:d._file.size,config:d,type:"progress"}),e.upload(d)):(d._finished&&delete d._finished,j.resolve(a))},function(a){j.reject(a)},function(a){j.notify(a)})}d.method=d.method||"POST",d.headers=d.headers||{};var j=d._deferred=d._deferred||b.defer(),k=j.promise;return d.disableProgress||(d.headers.__setXHR_=function(){return function(a){a&&a instanceof XMLHttpRequest&&(d.__XHR=a,d.xhrFn&&d.xhrFn(a),a.upload.addEventListener("progress",function(a){a.config=d,g(h(a))},!1),a.upload.addEventListener("load",function(a){a.lengthComputable&&(a.config=d,g(h(a)))},!1))}}),f?d._chunkSize&&d._end&&!d._finished?(d._start=d._end,d._end+=d._chunkSize,i()):d.resumeSizeUrl?a.get(d.resumeSizeUrl).then(function(a){d._start=d.resumeSizeResponseReader?d.resumeSizeResponseReader(a.data):parseInt((null==a.data.size?a.data:a.data.size).toString()),d._chunkSize&&(d._end=d._start+d._chunkSize),i()},function(a){throw a}):d.resumeSize?d.resumeSize().then(function(a){d._start=a,i()},function(a){throw a}):i():i(),k.success=function(a){return k.then(function(b){a(b.data,b.status,b.headers,d)}),k},k.error=function(a){return k.then(null,function(b){a(b.data,b.status,b.headers,d)}),k},k.progress=function(a){return k.progressFunc=a,k.then(null,null,function(b){a(b)}),k},k.abort=k.pause=function(){return d.__XHR&&c(function(){d.__XHR.abort()}),k},k.xhr=function(a){return d.xhrFn=function(b){return function(){b&&b.apply(k,arguments),a.apply(k,arguments)}}(d.xhrFn),k},k}var e=this;this.isResumeSupported=function(){return window.Blob&&Blob instanceof Function&&(new Blob).slice};var f=this.isResumeSupported();this.rename=function(a,b){return a.ngfName=b,a},this.jsonBlob=function(a){null==a||angular.isString(a)||(a=JSON.stringify(a));var b=new Blob([a],{type:"application/json"});return b._ngfBlob=!0,b},this.json=function(a){return angular.toJson(a)},this.upload=function(a){function b(a){return null!=a&&(a instanceof Blob||a.flashId&&a.name&&a.size)}function c(b,c){if(b._ngfBlob)return b;if(a._file=a._file||b,null!=a._start&&f){a._end&&a._end>=b.size&&(a._finished=!0,a._end=b.size);var d=b.slice(a._start,a._end||b.size);return d.name=b.name,d.ngfName=b.ngfName,a._chunkSize&&(c.append("_chunkSize",a._end-a._start),c.append("_chunkNumber",Math.floor(a._start/a._chunkSize)),c.append("_totalSize",a._file.size)),d}return b}function g(d,e,f){if(void 0!==e)if(angular.isDate(e)&&(e=e.toISOString()),angular.isString(e))d.append(f,e);else if(b(e)){var h=c(e,d),i=f.split(",");i[1]&&(h.ngfName=i[1].replace(/^\s+|\s+$/g,""),f=i[0]),a._fileKey=a._fileKey||f,d.append(f,h,h.ngfName||h.name)}else if(angular.isObject(e)){if(e.$$ngfCircularDetection)throw"ngFileUpload: Circular reference in config.data. Make sure specified data for Upload.upload() has no circular reference: "+f;e.$$ngfCircularDetection=!0;try{for(var j in e)if(e.hasOwnProperty(j)&&"$$ngfCircularDetection"!==j){var k=null==a.objectKey?"[i]":a.objectKey;e.length&&parseInt(j)>-1&&(k=null==a.arrayKey?k:a.arrayKey),g(d,e[j],f+k.replace(/[ik]/g,j))}}finally{delete e.$$ngfCircularDetection}}else d.append(f,e)}function h(){a._chunkSize=e.translateScalars(a.resumeChunkSize),a._chunkSize=a._chunkSize?parseInt(a._chunkSize.toString()):null,a.headers=a.headers||{},a.headers["Content-Type"]=void 0,a.transformRequest=a.transformRequest?angular.isArray(a.transformRequest)?a.transformRequest:[a.transformRequest]:[],a.transformRequest.push(function(b){var c,d=new FormData;b=b||a.fields||{},a.file&&(b.file=a.file);for(c in b)if(b.hasOwnProperty(c)){var e=b[c];a.formDataAppender?a.formDataAppender(d,c,e):g(d,e,c)}return d})}return a._isDigested||(a._isDigested=!0,h()),d(a)},this.http=function(b){return b.transformRequest=b.transformRequest||function(b){return window.ArrayBuffer&&b instanceof window.ArrayBuffer||b instanceof Blob?b:a.defaults.transformRequest[0].apply(this,arguments)},b._chunkSize=e.translateScalars(b.resumeChunkSize),b._chunkSize=b._chunkSize?parseInt(b._chunkSize.toString()):null,d(b)},this.translateScalars=function(a){if(angular.isString(a)){if(a.search(/kb/i)===a.length-2)return parseFloat(1e3*a.substring(0,a.length-2));if(a.search(/mb/i)===a.length-2)return parseFloat(1e6*a.substring(0,a.length-2));if(a.search(/gb/i)===a.length-2)return parseFloat(1e9*a.substring(0,a.length-2));if(a.search(/b/i)===a.length-1)return parseFloat(a.substring(0,a.length-1));if(a.search(/s/i)===a.length-1)return parseFloat(a.substring(0,a.length-1));if(a.search(/m/i)===a.length-1)return parseFloat(60*a.substring(0,a.length-1));if(a.search(/h/i)===a.length-1)return parseFloat(3600*a.substring(0,a.length-1))}return a},this.setDefaults=function(a){this.defaults=a||{}},this.defaults={},this.version=ngFileUpload.version}]),ngFileUpload.service("Upload",["$parse","$timeout","$compile","$q","UploadExif",function(a,b,c,d,e){function f(a,b,c){var e=[i.emptyPromise()];return angular.forEach(a,function(d,f){0===d.type.indexOf("image/jpeg")&&i.attrGetter("ngfFixOrientation",b,c,{$file:d})&&e.push(i.happyPromise(i.applyExifRotation(d),d).then(function(b){a.splice(f,1,b)}))}),d.all(e)}function g(a,b,c){var e=i.attrGetter("ngfResize",b,c);if(!e||!i.isResizeSupported()||!a.length)return i.emptyPromise();var f=[i.emptyPromise()];return angular.forEach(a,function(b,c){if(0===b.type.indexOf("image")){var d=i.resize(b,e.width,e.height,e.quality,e.type);f.push(d),d.then(function(b){a.splice(c,1,b)},function(a){b.$error="resize",b.$errorParam=(a?(a.message?a.message:a)+": ":"")+(b&&b.name)})}}),d.all(f)}function h(a,b,c,d){var e=[],f=i.attrGetter("ngfKeep",c,d);if(f){var g=!1;if("distinct"===f||i.attrGetter("ngfKeepDistinct",c,d)===!0){var h=b.length;if(a)for(var j=0;j<a.length;j++){for(var k=0;h>k;k++)if(a[j].name===b[k].name){e.push(a[j]);break}k===h&&(b.push(a[j]),g=!0)}a=b}else a=b.concat(a||[])}return{files:a,dupFiles:e,keep:f}}var i=e;return i.getAttrWithDefaults=function(a,b){if(null!=a[b])return a[b];var c=i.defaults[b];return null==c?c:angular.isString(c)?c:JSON.stringify(c)},i.attrGetter=function(b,c,d,e){var f=this.getAttrWithDefaults(c,b);if(!d)return f;try{return e?a(f)(d,e):a(f)(d)}catch(g){if(b.search(/min|max|pattern/i))return f;throw g}},i.shouldUpdateOn=function(a,b,c){var d=i.attrGetter("ngModelOptions",b,c);return d&&d.updateOn?d.updateOn.split(" ").indexOf(a)>-1:!0},i.emptyPromise=function(){var a=d.defer(),c=arguments;return b(function(){a.resolve.apply(a,c)}),a.promise},i.happyPromise=function(a,c){var e=d.defer();return a.then(function(a){e.resolve(a)},function(a){b(function(){throw a}),e.resolve(c)}),e.promise},i.updateModel=function(c,d,e,j,k,l,m){function n(f,g,h,k,m){var n=f&&f.length?f[0]:null;c&&(i.applyModelValidation(c,f),c.$ngfModelChange=!0,c.$setViewValue(m?n:f)),j&&a(j)(e,{$files:f,$file:n,$newFiles:h,$duplicateFiles:k,$invalidFiles:g,$event:l});var o=i.attrGetter("ngfModelInvalid",d);o&&b(function(){a(o).assign(e,g)}),b(function(){})}var o=k,p=(c&&c.$modelValue||d.$$ngfPrevFiles||[]).slice(0),q=h(k,p,d,e);k=q.files;var r=q.dupFiles,s=!i.attrGetter("ngfMultiple",d,e)&&!i.attrGetter("multiple",d)&&!q.keep;if(d.$$ngfPrevFiles=k,!q.keep||o&&o.length){i.validate(o,c,d,e).then(function(){if(m)n(k,[],o,r,s);else{var a=i.attrGetter("ngModelOptions",d,e);if(!a||!a.allowInvalid){var c=[],h=[];angular.forEach(k,function(a){a.$error?h.push(a):c.push(a)}),k=c}var j=i.emptyPromise(k);i.attrGetter("ngfFixOrientation",d,e)&&i.isExifSupported()&&(j=f(k,d,e)),j.then(function(){g(k,d,e).then(function(){b(function(){n(k,h,o,r,s)},a&&a.debounce?a.debounce.change||a.debounce:0)},function(a){throw"Could not resize files "+a})})}});for(var t=p.length;t--;){var u=p[t];window.URL&&u.blobUrl&&(URL.revokeObjectURL(u.blobUrl),delete u.blobUrl)}}},i}]),ngFileUpload.directive("ngfSelect",["$parse","$timeout","$compile","Upload",function(a,b,c,d){function e(a){var b=a.match(/Android[^\d]*(\d+)\.(\d+)/);if(b&&b.length>2){var c=d.defaults.androidFixMinorVersion||4;return parseInt(b[1])<4||parseInt(b[1])===c&&parseInt(b[2])<c}return-1===a.indexOf("Chrome")&&/.*Windows.*Safari.*/.test(a)}function f(a,b,c,d,f,h,i,j){function k(){return"input"===b[0].tagName.toLowerCase()&&c.type&&"file"===c.type.toLowerCase()}function l(){return t("ngfChange")||t("ngfSelect")}function m(b){if(j.shouldUpdateOn("change",c,a)){for(var e=b.__files_||b.target&&b.target.files,f=[],g=0;g<e.length;g++)f.push(e[g]);j.updateModel(d,c,a,l(),f.length?f:null,b)}}function n(a){if(b!==a)for(var c=0;c<b[0].attributes.length;c++){var d=b[0].attributes[c];"type"!==d.name&&"class"!==d.name&&"id"!==d.name&&"style"!==d.name&&((null==d.value||""===d.value)&&("required"===d.name&&(d.value="required"),"multiple"===d.name&&(d.value="multiple")),a.attr(d.name,d.value))}}function o(){if(k())return b;var a=angular.element('<input type="file">');return n(a),a.css("visibility","hidden").css("position","absolute").css("overflow","hidden").css("width","0px").css("height","0px").css("border","none").css("margin","0px").css("padding","0px").attr("tabindex","-1"),g.push({el:b,ref:a}),document.body.appendChild(a[0]),a}function p(c){if(b.attr("disabled")||t("ngfSelectDisabled",a))return!1;var d=q(c);if(null!=d)return d;r(c);try{k()||document.body.contains(w[0])||(g.push({el:b,ref:w}),document.body.appendChild(w[0]),w.bind("change",m))}catch(f){}return e(navigator.userAgent)?setTimeout(function(){w[0].click()},0):w[0].click(),!1}function q(a){var b=a.changedTouches||a.originalEvent&&a.originalEvent.changedTouches;if("touchstart"===a.type)return v=b?b[0].clientY:0,!0;if(a.stopPropagation(),a.preventDefault(),"touchend"===a.type){var c=b?b[0].clientY:0;if(Math.abs(c-v)>20)return!1}}function r(b){j.shouldUpdateOn("click",c,a)&&w.val()&&(w.val(null),j.updateModel(d,c,a,l(),null,b,!0))}function s(a){if(w&&!w.attr("__ngf_ie10_Fix_")){if(!w[0].parentNode)return void(w=null);a.preventDefault(),a.stopPropagation(),w.unbind("click");var b=w.clone();return w.replaceWith(b),w=b,w.attr("__ngf_ie10_Fix_","true"),w.bind("change",m),w.bind("click",s),w[0].click(),!1}w.removeAttr("__ngf_ie10_Fix_")}var t=function(a,b){return j.attrGetter(a,c,b)};j.registerModelChangeValidator(d,c,a);var u=[];u.push(a.$watch(t("ngfMultiple"),function(){w.attr("multiple",t("ngfMultiple",a))})),u.push(a.$watch(t("ngfCapture"),function(){w.attr("capture",t("ngfCapture",a))})),c.$observe("accept",function(){w.attr("accept",t("accept"))}),u.push(function(){c.$$observers&&delete c.$$observers.accept});var v=0,w=b;k()||(w=o()),w.bind("change",m),k()?b.bind("click",r):b.bind("click touchstart touchend",p),-1!==navigator.appVersion.indexOf("MSIE 10")&&w.bind("click",s),d&&d.$formatters.push(function(a){return(null==a||0===a.length)&&w.val()&&w.val(null),a}),a.$on("$destroy",function(){k()||w.remove(),angular.forEach(u,function(a){a()})}),h(function(){for(var a=0;a<g.length;a++){var b=g[a];document.body.contains(b.el[0])||(g.splice(a,1),b.ref.remove())}}),window.FileAPI&&window.FileAPI.ngfFixIE&&window.FileAPI.ngfFixIE(b,w,m)}var g=[];return{restrict:"AEC",require:"?ngModel",link:function(e,g,h,i){f(e,g,h,i,a,b,c,d)}}}]),function(){function a(a){return"img"===a.tagName.toLowerCase()?"image":"audio"===a.tagName.toLowerCase()?"audio":"video"===a.tagName.toLowerCase()?"video":/./}function b(b,c,d,e,f,g,h,i){function j(a){var g=b.attrGetter("ngfNoObjectUrl",f,d);b.dataUrl(a,g)["finally"](function(){c(function(){var b=(g?a.$ngfDataUrl:a.$ngfBlobUrl)||a.$ngfDataUrl;i?e.css("background-image","url('"+(b||"")+"')"):e.attr("src",b),b?e.removeClass("ng-hide"):e.addClass("ng-hide")})})}c(function(){var c=d.$watch(f[g],function(c){var d=h;if("ngfThumbnail"===g&&(d||(d={width:e[0].clientWidth,height:e[0].clientHeight}),0===d.width&&window.getComputedStyle)){var f=getComputedStyle(e[0]);d={width:parseInt(f.width.slice(0,-2)),height:parseInt(f.height.slice(0,-2))}}return angular.isString(c)?(e.removeClass("ng-hide"),i?e.css("background-image","url('"+c+"')"):e.attr("src",c)):void(!c||!c.type||0!==c.type.search(a(e[0]))||i&&0!==c.type.indexOf("image")?e.addClass("ng-hide"):d&&b.isResizeSupported()?b.resize(c,d.width,d.height,d.quality).then(function(a){j(a)},function(a){throw a}):j(c))});d.$on("$destroy",function(){c()})})}ngFileUpload.service("UploadDataUrl",["UploadBase","$timeout","$q",function(a,b,c){var d=a;return d.base64DataUrl=function(a){if(angular.isArray(a)){var b=c.defer(),e=0;return angular.forEach(a,function(c){d.dataUrl(c,!0)["finally"](function(){if(e++,e===a.length){var c=[];angular.forEach(a,function(a){c.push(a.$ngfDataUrl)}),b.resolve(c,a)}})}),b.promise}return d.dataUrl(a,!0)},d.dataUrl=function(a,e){if(!a)return d.emptyPromise(a,a);if(e&&null!=a.$ngfDataUrl||!e&&null!=a.$ngfBlobUrl)return d.emptyPromise(e?a.$ngfDataUrl:a.$ngfBlobUrl,a);var f=e?a.$$ngfDataUrlPromise:a.$$ngfBlobUrlPromise;if(f)return f;var g=c.defer();return b(function(){if(window.FileReader&&a&&(!window.FileAPI||-1===navigator.userAgent.indexOf("MSIE 8")||a.size<2e4)&&(!window.FileAPI||-1===navigator.userAgent.indexOf("MSIE 9")||a.size<4e6)){var c=window.URL||window.webkitURL;if(c&&c.createObjectURL&&!e){var d;try{d=c.createObjectURL(a)}catch(f){return void b(function(){a.$ngfBlobUrl="",g.reject()})}b(function(){a.$ngfBlobUrl=d,d&&g.resolve(d,a)})}else{var h=new FileReader;h.onload=function(c){b(function(){a.$ngfDataUrl=c.target.result,g.resolve(c.target.result,a)})},h.onerror=function(){b(function(){a.$ngfDataUrl="",g.reject()})},h.readAsDataURL(a)}}else b(function(){a[e?"dataUrl":"blobUrl"]="",g.reject()})}),f=e?a.$$ngfDataUrlPromise=g.promise:a.$$ngfBlobUrlPromise=g.promise,f["finally"](function(){delete a[e?"$$ngfDataUrlPromise":"$$ngfBlobUrlPromise"]}),f},d}]),ngFileUpload.directive("ngfSrc",["Upload","$timeout",function(a,c){return{restrict:"AE",link:function(d,e,f){b(a,c,d,e,f,"ngfSrc",a.attrGetter("ngfResize",f,d),!1)}}}]),ngFileUpload.directive("ngfBackground",["Upload","$timeout",function(a,c){return{restrict:"AE",link:function(d,e,f){b(a,c,d,e,f,"ngfBackground",a.attrGetter("ngfResize",f,d),!0)}}}]),ngFileUpload.directive("ngfThumbnail",["Upload","$timeout",function(a,c){return{restrict:"AE",link:function(d,e,f){var g=a.attrGetter("ngfSize",f,d);b(a,c,d,e,f,"ngfThumbnail",g,a.attrGetter("ngfAsBackground",f,d))}}}]),ngFileUpload.config(["$compileProvider",function(a){a.imgSrcSanitizationWhitelist&&a.imgSrcSanitizationWhitelist(/^\s*(https?|ftp|mailto|tel|local|file|data|blob):/),a.aHrefSanitizationWhitelist&&a.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|tel|local|file|data|blob):/)}]),ngFileUpload.filter("ngfDataUrl",["UploadDataUrl","$sce",function(a,b){return function(c,d,e){if(angular.isString(c))return b.trustAsResourceUrl(c);var f=c&&((d?c.$ngfDataUrl:c.$ngfBlobUrl)||c.$ngfDataUrl);return c&&!f?(!c.$ngfDataUrlFilterInProgress&&angular.isObject(c)&&(c.$ngfDataUrlFilterInProgress=!0,a.dataUrl(c,d)),""):(c&&delete c.$ngfDataUrlFilterInProgress,(c&&f?e?b.trustAsResourceUrl(f):f:c)||"")}}])}(),ngFileUpload.service("UploadValidate",["UploadDataUrl","$q","$timeout",function(a,b,c){function d(a){var b="",c=[];if(a.length>2&&"/"===a[0]&&"/"===a[a.length-1])b=a.substring(1,a.length-1);else{var e=a.split(",");if(e.length>1)for(var f=0;f<e.length;f++){var g=d(e[f]);g.regexp?(b+="("+g.regexp+")",f<e.length-1&&(b+="|")):c=c.concat(g.excludes)}else 0===a.indexOf("!")?c.push("^((?!"+d(a.substring(1)).regexp+").)*$"):(0===a.indexOf(".")&&(a="*"+a),b="^"+a.replace(new RegExp("[.\\\\+*?\\[\\^\\]$(){}=!<>|:\\-]","g"),"\\$&")+"$",b=b.replace(/\\\*/g,".*").replace(/\\\?/g,"."))}return{regexp:b,excludes:c}}function e(a,b){null==b||a.$dirty||(a.$setDirty?a.$setDirty():a.$dirty=!0)}var f=a;return f.validatePattern=function(a,b){if(!b)return!0;var c=d(b),e=!0;if(c.regexp&&c.regexp.length){var f=new RegExp(c.regexp,"i");e=null!=a.type&&f.test(a.type)||null!=a.name&&f.test(a.name)}for(var g=c.excludes.length;g--;){var h=new RegExp(c.excludes[g],"i");e=e&&(null==a.type||h.test(a.type))&&(null==a.name||h.test(a.name))}return e},f.registerModelChangeValidator=function(a,b,c){a&&a.$formatters.push(function(d){a.$ngfModelChange?a.$ngfModelChange=!1:f.validate(d,a,b,c,function(){f.applyModelValidation(a,d)})})},f.applyModelValidation=function(a,b){e(a,b),angular.forEach(a.$ngfValidations,function(b){a.$setValidity(b.name,b.valid)})},f.validate=function(a,c,d,e){function g(b,d,e){if(a){for(var f="ngf"+b[0].toUpperCase()+b.substr(1),g=a.length,h=null;g--;){var j=a[g];if(j){var k=i(f,{$file:j});null==k&&(k=d(i("ngfValidate")||{}),h=null==h?!0:h),null!=k&&(e(j,k)||(j.$error=b,j.$errorParam=k,a.splice(g,1),h=!1))}}null!==h&&c.$ngfValidations.push({name:b,valid:h})}}function h(d,e,g,h,j){var k=[f.emptyPromise()];if(a){var l="ngf"+d[0].toUpperCase()+d.substr(1);return a=void 0===a.length?[a]:a,angular.forEach(a,function(a){var c=b.defer();if(k.push(c.promise),g&&(null==a.type||0!==a.type.search(g)))return void c.resolve();var f=i(l,{$file:a})||e(i("ngfValidate",{$file:a})||{});f?h(a,f).then(function(b){j(b,f)?c.resolve():(a.$error=d,a.$errorParam=f,c.reject())},function(){i("ngfValidateForce",{$file:a})?(a.$error=d,a.$errorParam=f,c.reject()):c.resolve()}):c.resolve()}),b.all(k).then(function(){c.$ngfValidations.push({name:d,valid:!0})},function(){c.$ngfValidations.push({name:d,valid:!1})})}}c=c||{},c.$ngfValidations=c.$ngfValidations||[],angular.forEach(c.$ngfValidations,function(a){a.valid=!0});var i=function(a,b){return f.attrGetter(a,d,e,b)};if(null==a||0===a.length)return f.emptyPromise(c);a=void 0===a.length?[a]:a.slice(0),g("pattern",function(a){return a.pattern},f.validatePattern),g("minSize",function(a){return a.size&&a.size.min},function(a,b){return a.size>=f.translateScalars(b)}),g("maxSize",function(a){return a.size&&a.size.max},function(a,b){return a.size<=f.translateScalars(b)});var j=0;if(g("maxTotalSize",function(a){return a.maxTotalSize&&a.maxTotalSize},function(b,c){return j+=b.size,j>f.translateScalars(c)?(a.splice(0,a.length),!1):!0}),g("validateFn",function(){return null},function(a,b){return b===!0||null===b||""===b}),!a.length)return f.emptyPromise(c,c.$ngfValidations);var k=b.defer(),l=[];return l.push(f.happyPromise(h("maxHeight",function(a){return a.height&&a.height.max},/image/,this.imageDimensions,function(a,b){return a.height<=b}))),l.push(f.happyPromise(h("minHeight",function(a){return a.height&&a.height.min},/image/,this.imageDimensions,function(a,b){return a.height>=b}))),l.push(f.happyPromise(h("maxWidth",function(a){return a.width&&a.width.max},/image/,this.imageDimensions,function(a,b){return a.width<=b}))),l.push(f.happyPromise(h("minWidth",function(a){return a.width&&a.width.min},/image/,this.imageDimensions,function(a,b){return a.width>=b}))),l.push(f.happyPromise(h("ratio",function(a){return a.ratio},/image/,this.imageDimensions,function(a,b){for(var c=b.toString().split(","),d=!1,e=0;e<c.length;e++){var f=c[e],g=f.search(/x/i);f=g>-1?parseFloat(f.substring(0,g))/parseFloat(f.substring(g+1)):parseFloat(f),Math.abs(a.width/a.height-f)<1e-4&&(d=!0)}return d}))),l.push(f.happyPromise(h("maxDuration",function(a){return a.duration&&a.duration.max},/audio|video/,this.mediaDuration,function(a,b){return a<=f.translateScalars(b)}))),l.push(f.happyPromise(h("minDuration",function(a){return a.duration&&a.duration.min},/audio|video/,this.mediaDuration,function(a,b){return a>=f.translateScalars(b)}))),l.push(f.happyPromise(h("validateAsyncFn",function(){return null},null,function(a,b){return b},function(a){return a===!0||null===a||""===a}))),b.all(l).then(function(){k.resolve(c,c.$ngfValidations)})},f.imageDimensions=function(a){if(a.$ngfWidth&&a.$ngfHeight){var d=b.defer();return c(function(){d.resolve({width:a.$ngfWidth,height:a.$ngfHeight})}),d.promise}if(a.$ngfDimensionPromise)return a.$ngfDimensionPromise;var e=b.defer();return c(function(){return 0!==a.type.indexOf("image")?void e.reject("not image"):void f.dataUrl(a).then(function(b){function d(){var b=h[0].clientWidth,c=h[0].clientHeight;h.remove(),a.$ngfWidth=b,a.$ngfHeight=c,e.resolve({width:b,height:c})}function f(){h.remove(),e.reject("load error")}function g(){c(function(){h[0].parentNode&&(h[0].clientWidth?d():i>10?f():g())},1e3)}var h=angular.element("<img>").attr("src",b).css("visibility","hidden").css("position","fixed");h.on("load",d),h.on("error",f);var i=0;g(),angular.element(document.getElementsByTagName("body")[0]).append(h)},function(){e.reject("load error")})}),a.$ngfDimensionPromise=e.promise,a.$ngfDimensionPromise["finally"](function(){delete a.$ngfDimensionPromise}),a.$ngfDimensionPromise},f.mediaDuration=function(a){if(a.$ngfDuration){var d=b.defer();return c(function(){d.resolve(a.$ngfDuration)}),d.promise}if(a.$ngfDurationPromise)return a.$ngfDurationPromise;var e=b.defer();return c(function(){return 0!==a.type.indexOf("audio")&&0!==a.type.indexOf("video")?void e.reject("not media"):void f.dataUrl(a).then(function(b){function d(){var b=h[0].duration;a.$ngfDuration=b,h.remove(),e.resolve(b)}function f(){h.remove(),e.reject("load error")}function g(){c(function(){h[0].parentNode&&(h[0].duration?d():i>10?f():g())},1e3)}var h=angular.element(0===a.type.indexOf("audio")?"<audio>":"<video>").attr("src",b).css("visibility","none").css("position","fixed");h.on("loadedmetadata",d),h.on("error",f);var i=0;g(),angular.element(document.body).append(h)},function(){e.reject("load error")})}),a.$ngfDurationPromise=e.promise,a.$ngfDurationPromise["finally"](function(){delete a.$ngfDurationPromise}),a.$ngfDurationPromise},f}]),ngFileUpload.service("UploadResize",["UploadValidate","$q",function(a,b){var c=a,d=function(a,b,c,d){var e=Math.min(c/a,d/b);return{width:a*e,height:b*e}},e=function(a,c,e,f,g){var h=b.defer(),i=document.createElement("canvas"),j=document.createElement("img");return j.onload=function(){try{c||(c=j.width),e||(e=j.height);var a=d(j.width,j.height,c,e);i.width=a.width,i.height=a.height;var b=i.getContext("2d");b.drawImage(j,0,0,a.width,a.height),h.resolve(i.toDataURL(g||"image/WebP",f||1))}catch(k){h.reject(k)}},j.onerror=function(){h.reject()},j.src=a,h.promise};return c.dataUrltoBlob=function(a,b){for(var c=a.split(","),d=c[0].match(/:(.*?);/)[1],e=atob(c[1]),f=e.length,g=new Uint8Array(f);f--;)g[f]=e.charCodeAt(f);var h=new Blob([g],{type:d});return h.name=b,h},c.isResizeSupported=function(){var a=document.createElement("canvas");return window.atob&&a.getContext&&a.getContext("2d")},c.isResizeSupported()&&Object.defineProperty(Blob.prototype,"name",{get:function(){return this.$ngfName},set:function(a){this.$ngfName=a},configurable:!0}),c.resize=function(a,d,f,g,h){if(0!==a.type.indexOf("image"))return c.emptyPromise(a);var i=b.defer();return c.dataUrl(a,!0).then(function(b){e(b,d,f,g,h||a.type).then(function(b){i.resolve(c.dataUrltoBlob(b,a.name))},function(){i.reject()})},function(){i.reject()}),i.promise},c}]),function(){function a(a,c,d,e,f,g,h,i,j){function k(){return c.attr("disabled")||o("ngfDropDisabled",a)}function l(a,b,c,d){var e=o("ngfDragOverClass",a,{$event:c}),f="dragover";if(angular.isString(e))f=e;else if(e&&(e.delay&&(s=e.delay),e.accept||e.reject)){var g=c.dataTransfer.items;if(null!=g&&g.length)for(var h=e.pattern||o("ngfPattern",a,{$event:c}),j=g.length;j--;){if(!i.validatePattern(g[j],h)){f=e.reject;break}f=e.accept}else f=e.accept}d(f)}function m(a,b,c,d){function e(a,b,c){if(null!=b)if(b.isDirectory){var d=(c||"")+b.name;a.push({name:b.name,type:"directory",path:d});var f=b.createReader(),g=[];i++;var h=function(){f.readEntries(function(d){try{if(d.length)g=g.concat(Array.prototype.slice.call(d||[],0)),h();else{for(var f=0;f<g.length;f++)e(a,g[f],(c?c:"")+b.name+"/");i--}}catch(j){i--,console.error(j)}},function(){i--})};h()}else i++,b.file(function(b){try{i--,b.path=(c?c:"")+b.name,a.push(b)}catch(d){i--,console.error(d)}},function(){i--})}var f=[],i=0,j=a.dataTransfer.items;if(j&&j.length>0&&"file"!==h.protocol())for(var k=0;k<j.length;k++){if(j[k].webkitGetAsEntry&&j[k].webkitGetAsEntry()&&j[k].webkitGetAsEntry().isDirectory){var l=j[k].webkitGetAsEntry();if(l.isDirectory&&!c)continue;null!=l&&e(f,l)}else{var m=j[k].getAsFile();null!=m&&f.push(m)}if(!d&&f.length>0)break}else{var n=a.dataTransfer.files;if(null!=n)for(var o=0;o<n.length&&(f.push(n.item(o)),d||!(f.length>0));o++);}var p=0;!function q(a){g(function(){if(i)10*p++<2e4&&q(10);else{if(!d&&f.length>1){for(k=0;"directory"===f[k].type;)k++;f=[f[k]]}b(f)}},a||0)}()}var n=b(),o=function(a,b,c){return i.attrGetter(a,d,b,c)};if(o("dropAvailable")&&g(function(){a[o("dropAvailable")]?a[o("dropAvailable")].value=n:a[o("dropAvailable")]=n}),!n)return void(o("ngfHideOnDropNotAvailable",a)===!0&&c.css("display","none"));null==o("ngfSelect")&&i.registerModelChangeValidator(e,d,a);var p,q=null,r=f(o("ngfStopPropagation")),s=1;
c[0].addEventListener("dragover",function(b){if(!k()){if(b.preventDefault(),r(a)&&b.stopPropagation(),navigator.userAgent.indexOf("Chrome")>-1){var e=b.dataTransfer.effectAllowed;b.dataTransfer.dropEffect="move"===e||"linkMove"===e?"move":"copy"}g.cancel(q),p||(p="C",l(a,d,b,function(d){p=d,c.addClass(p),o("ngfDrag",a,{$isDragging:!0,$class:p,$event:b})}))}},!1),c[0].addEventListener("dragenter",function(b){k()||(b.preventDefault(),r(a)&&b.stopPropagation())},!1),c[0].addEventListener("dragleave",function(b){k()||(b.preventDefault(),r(a)&&b.stopPropagation(),q=g(function(){p&&c.removeClass(p),p=null,o("ngfDrag",a,{$isDragging:!1,$event:b})},s||100))},!1),c[0].addEventListener("drop",function(b){if(!k()&&i.shouldUpdateOn("drop",d,a)){b.preventDefault(),r(a)&&b.stopPropagation(),p&&c.removeClass(p),p=null;var f;try{f=b.dataTransfer&&b.dataTransfer.getData&&b.dataTransfer.getData("text/html")}catch(g){}if(f){var h;f.replace(/<img .*src *=\"([^\"]*)\"/,function(a,b){h=b}),h&&j({url:h,method:"get",responseType:"arraybuffer"}).then(function(c){var f=new Uint8Array(c.data),g=c.headers("content-type")||"image/WebP",h=new Blob([f],{type:g});i.updateModel(e,d,a,o("ngfChange")||o("ngfDrop"),[h],b)})}else m(b,function(c){i.updateModel(e,d,a,o("ngfChange")||o("ngfDrop"),c,b)},o("ngfAllowDir",a)!==!1,o("multiple")||o("ngfMultiple",a))}},!1),c[0].addEventListener("paste",function(b){if(!k()&&i.shouldUpdateOn("paste",d,a)){var c=[],f=b.clipboardData||b.originalEvent.clipboardData;if(f&&f.items){for(var g=0;g<f.items.length;g++)-1!==f.items[g].type.indexOf("image")&&c.push(f.items[g].getAsFile());i.updateModel(e,d,a,o("ngfChange")||o("ngfDrop"),c,b)}}},!1)}function b(){var a=document.createElement("div");return"draggable"in a&&"ondrop"in a&&!/Edge\/12./i.test(navigator.userAgent)}ngFileUpload.directive("ngfDrop",["$parse","$timeout","$location","Upload","$http",function(b,c,d,e,f){return{restrict:"AEC",require:"?ngModel",link:function(g,h,i,j){a(g,h,i,j,b,c,d,e,f)}}}]),ngFileUpload.directive("ngfNoFileDrop",function(){return function(a,c){b()&&c.css("display","none")}}),ngFileUpload.directive("ngfDropAvailable",["$parse","$timeout","Upload",function(a,c,d){return function(e,f,g){if(b()){var h=a(d.attrGetter("ngfDropAvailable",g));c(function(){h(e),h.assign&&h.assign(e,!0)})}}}])}(),ngFileUpload.service("UploadExif",["UploadResize","$q",function(a,b){function c(a){var b=new DataView(a);if(255!==b.getUint8(0)||216!==b.getUint8(1))return"Not a valid JPEG";for(var c,d=2,e=a.byteLength;e>d;){if(255!==b.getUint8(d))return"Not a valid marker at offset "+d+", found: "+b.getUint8(d);if(c=b.getUint8(d+1),225===c)return g(b,d+4,b.getUint16(d+2)-2);d+=2+b.getUint16(d+2)}}function d(a,b,c,d){var f,g,h=a.getUint16(c,!d);for(g=0;h>g;g++){f=c+12*g+2;var i=a.getUint16(f,!d);if(274===i)return e(a,f,b,d)}return null}function e(a,b,c,d){var e,f,g,h=a.getUint32(b+4,!d),i=a.getUint32(b+8,!d)+c;if(1===h)return a.getUint16(b+8,!d);for(e=h>2?i:b+8,f=[],g=0;h>g;g++)f[g]=a.getUint16(e+2*g,!d);return f}function f(a,b,c){for(var d="",e=b;b+c>e;e++)d+=String.fromCharCode(a.getUint8(e));return d}function g(a,b){if("Exif"!==f(a,b,4))return"Not valid EXIF data! "+f(a,b,4);var c,e=b+6;if(18761===a.getUint16(e))c=!1;else{if(19789!==a.getUint16(e))return"Not valid TIFF data! (no 0x4949 or 0x4D4D)";c=!0}if(42!==a.getUint16(e+2,!c))return"Not valid TIFF data! (no 0x002A)";var g=a.getUint32(e+4,!c);return 8>g?a.getUint32(e+4,!c):d(a,e,e+g,c)}function h(a,b,c,d){switch(b){case 2:return a.transform(-1,0,0,1,c,0);case 3:return a.transform(-1,0,0,-1,c,d);case 4:return a.transform(1,0,0,-1,0,d);case 5:return a.transform(0,1,1,0,0,0);case 6:return a.transform(0,1,-1,0,d,0);case 7:return a.transform(0,-1,-1,0,d,c);case 8:return a.transform(0,-1,1,0,0,c)}}var i=a;return i.isExifSupported=function(){return window.FileReader&&(new FileReader).readAsArrayBuffer&&i.isResizeSupported()},i.orientation=function(a){if(null!=a.$ngfOrientation)return i.emptyPromise(a.$ngfOrientation);var d=b.defer(),e=new FileReader;return e.onload=function(b){var e;try{e=c(b.target.result)}catch(b){return void d.reject(b)}angular.isString(e)?d.reject(e):(a.$ngfOrientation=e,d.resolve(e))},e.onerror=function(a){d.reject(a)},e.readAsArrayBuffer(a),d.promise},i.applyExifRotation=function(a){if(0!==a.type.indexOf("image/jpeg"))return i.emptyPromise(a);var c=b.defer();return i.orientation(a).then(function(b){(!b||2>b||b>8)&&c.resolve(a),i.dataUrl(a,!0).then(function(d){var e=document.createElement("canvas"),f=document.createElement("img");f.onload=function(){try{e.width=b>4?f.height:f.width,e.height=b>4?f.width:f.height;var d=e.getContext("2d");h(d,b,f.width,f.height),d.drawImage(f,0,0);var g=e.toDataURL(a.type||"image/WebP",1),j=i.dataUrltoBlob(g,a.name);c.resolve(j)}catch(k){c.reject(k)}},f.onerror=function(){c.reject()},f.src=d},function(a){c.reject(a)})},function(a){c.reject(a)}),c.promise},i}]),!function(){"use strict";var a={backspace:8,tab:9,enter:13,escape:27,space:32,up:38,down:40,left:37,right:39,"delete":46,comma:188},b=9007199254740991,c=["text","email","url"],d=angular.module("ngTagsInput",[]);d.directive("tagsInput",["$timeout","$document","$window","tagsInputConfig","tiUtil",function(d,e,f,g,h){function i(a,b,c,d){var e,f,g,i={};return e=function(b){return h.safeToString(b[a.displayProperty])},f=function(b,c){b[a.displayProperty]=c},g=function(b){var d=e(b);return d&&d.length>=a.minLength&&d.length<=a.maxLength&&a.allowedTagsPattern.test(d)&&!h.findInObjectArray(i.items,b,a.keyProperty||a.displayProperty)&&c({$tag:b})},i.items=[],i.addText=function(a){var b={};return f(b,a),i.add(b)},i.add=function(c){var d=e(c);return a.replaceSpacesWithDashes&&(d=h.replaceSpacesWithDashes(d)),f(c,d),g(c)?(i.items.push(c),b.trigger("tag-added",{$tag:c})):d&&b.trigger("invalid-tag",{$tag:c}),c},i.remove=function(a){var c=i.items[a];return d({$tag:c})?(i.items.splice(a,1),i.clearSelection(),b.trigger("tag-removed",{$tag:c}),c):void 0},i.select=function(a){0>a?a=i.items.length-1:a>=i.items.length&&(a=0),i.index=a,i.selected=i.items[a]},i.selectPrior=function(){i.select(--i.index)},i.selectNext=function(){i.select(++i.index)},i.removeSelected=function(){return i.remove(i.index)},i.clearSelection=function(){i.selected=null,i.index=-1},i.clearSelection(),i}function j(a){return-1!==c.indexOf(a)}return{restrict:"E",require:"ngModel",scope:{tags:"=ngModel",text:"=?",onTagAdding:"&",onTagAdded:"&",onInvalidTag:"&",onTagRemoving:"&",onTagRemoved:"&",onTagClicked:"&"},replace:!1,transclude:!0,templateUrl:"ngTagsInput/tags-input.html",controller:["$scope","$attrs","$element",function(a,c,d){a.events=h.simplePubSub(),g.load("tagsInput",a,c,{template:[String,"ngTagsInput/tag-item.html"],type:[String,"text",j],placeholder:[String,"Add a tag"],tabindex:[Number,null],removeTagSymbol:[String,String.fromCharCode(215)],replaceSpacesWithDashes:[Boolean,!0],minLength:[Number,3],maxLength:[Number,b],addOnEnter:[Boolean,!0],addOnSpace:[Boolean,!1],addOnComma:[Boolean,!0],addOnBlur:[Boolean,!0],addOnPaste:[Boolean,!1],pasteSplitPattern:[RegExp,/,/],allowedTagsPattern:[RegExp,/.+/],enableEditingLastTag:[Boolean,!1],minTags:[Number,0],maxTags:[Number,b],displayProperty:[String,"text"],keyProperty:[String,""],allowLeftoverText:[Boolean,!1],addFromAutocompleteOnly:[Boolean,!1],spellcheck:[Boolean,!0]}),a.tagList=new i(a.options,a.events,h.handleUndefinedResult(a.onTagAdding,!0),h.handleUndefinedResult(a.onTagRemoving,!0)),this.registerAutocomplete=function(){var b=d.find("input");return{addTag:function(b){return a.tagList.add(b)},focusInput:function(){b[0].focus()},getTags:function(){return a.tagList.items},getCurrentTagText:function(){return a.newTag.text()},getOptions:function(){return a.options},on:function(b,c){return a.events.on(b,c),this}}},this.registerTagItem=function(){return{getOptions:function(){return a.options},removeTag:function(b){a.disabled||a.tagList.remove(b)}}}}],link:function(b,c,g,i){var j,k=[a.enter,a.comma,a.space,a.backspace,a["delete"],a.left,a.right],l=b.tagList,m=b.events,n=b.options,o=c.find("input"),p=["minTags","maxTags","allowLeftoverText"];j=function(){i.$setValidity("maxTags",l.items.length<=n.maxTags),i.$setValidity("minTags",l.items.length>=n.minTags),i.$setValidity("leftoverText",b.hasFocus||n.allowLeftoverText?!0:!b.newTag.text())},i.$isEmpty=function(a){return!a||!a.length},b.newTag={text:function(a){return angular.isDefined(a)?(b.text=a,void m.trigger("input-change",a)):b.text||""},invalid:null},b.track=function(a){return a[n.keyProperty||n.displayProperty]},b.$watch("tags",function(a){a?(l.items=h.makeObjectArray(a,n.displayProperty),b.tags=l.items):l.items=[]}),b.$watch("tags.length",function(){j(),i.$validate()}),g.$observe("disabled",function(a){b.disabled=a}),b.eventHandlers={input:{keydown:function(a){m.trigger("input-keydown",a)},focus:function(){b.hasFocus||(b.hasFocus=!0,m.trigger("input-focus"))},blur:function(){d(function(){var a=e.prop("activeElement"),d=a===o[0],f=c[0].contains(a);(d||!f)&&(b.hasFocus=!1,m.trigger("input-blur"))})},paste:function(a){a.getTextData=function(){var b=a.clipboardData||a.originalEvent&&a.originalEvent.clipboardData;return b?b.getData("text/plain"):f.clipboardData.getData("Text")},m.trigger("input-paste",a)}},host:{click:function(){b.disabled||o[0].focus()}},tag:{click:function(a){m.trigger("tag-clicked",{$tag:a})}}},m.on("tag-added",b.onTagAdded).on("invalid-tag",b.onInvalidTag).on("tag-removed",b.onTagRemoved).on("tag-clicked",b.onTagClicked).on("tag-added",function(){b.newTag.text("")}).on("tag-added tag-removed",function(){b.tags=l.items,i.$setDirty()}).on("invalid-tag",function(){b.newTag.invalid=!0}).on("option-change",function(a){-1!==p.indexOf(a.name)&&j()}).on("input-change",function(){l.clearSelection(),b.newTag.invalid=null}).on("input-focus",function(){c.triggerHandler("focus"),i.$setValidity("leftoverText",!0)}).on("input-blur",function(){n.addOnBlur&&!n.addFromAutocompleteOnly&&l.addText(b.newTag.text()),c.triggerHandler("blur"),j()}).on("input-keydown",function(c){var d,e,f,g,i=c.keyCode,j={};if(!h.isModifierOn(c)&&-1!==k.indexOf(i)){if(j[a.enter]=n.addOnEnter,j[a.comma]=n.addOnComma,j[a.space]=n.addOnSpace,d=!n.addFromAutocompleteOnly&&j[i],e=(i===a.backspace||i===a["delete"])&&l.selected,g=i===a.backspace&&0===b.newTag.text().length&&n.enableEditingLastTag,f=(i===a.backspace||i===a.left||i===a.right)&&0===b.newTag.text().length&&!n.enableEditingLastTag,d)l.addText(b.newTag.text());else if(g){var m;l.selectPrior(),m=l.removeSelected(),m&&b.newTag.text(m[n.displayProperty])}else e?l.removeSelected():f&&(i===a.left||i===a.backspace?l.selectPrior():i===a.right&&l.selectNext());(d||f||e||g)&&c.preventDefault()}}).on("input-paste",function(a){if(n.addOnPaste){var b=a.getTextData(),c=b.split(n.pasteSplitPattern);c.length>1&&(c.forEach(function(a){l.addText(a)}),a.preventDefault())}})}}}]),d.directive("tiTagItem",["tiUtil",function(a){return{restrict:"E",require:"^tagsInput",template:'<ng-include src="$$template"></ng-include>',scope:{data:"="},link:function(b,c,d,e){var f=e.registerTagItem(),g=f.getOptions();b.$$template=g.template,b.$$removeTagSymbol=g.removeTagSymbol,b.$getDisplayText=function(){return a.safeToString(b.data[g.displayProperty])},b.$removeTag=function(){f.removeTag(b.$index)},b.$watch("$parent.$index",function(a){b.$index=a})}}}]),d.directive("autoComplete",["$document","$timeout","$sce","$q","tagsInputConfig","tiUtil",function(b,c,d,e,f,g){function h(a,b,c){var d,f,h,i={};return h=function(){return b.tagsInput.keyProperty||b.tagsInput.displayProperty},d=function(a,c){return a.filter(function(a){return!g.findInObjectArray(c,a,h(),function(a,c){return b.tagsInput.replaceSpacesWithDashes&&(a=g.replaceSpacesWithDashes(a),c=g.replaceSpacesWithDashes(c)),g.defaultComparer(a,c)})})},i.reset=function(){f=null,i.items=[],i.visible=!1,i.index=-1,i.selected=null,i.query=null},i.show=function(){b.selectFirstMatch?i.select(0):i.selected=null,i.visible=!0},i.load=g.debounce(function(c,j){i.query=c;var k=e.when(a({$query:c}));f=k,k.then(function(a){k===f&&(a=g.makeObjectArray(a.data||a,h()),a=d(a,j),i.items=a.slice(0,b.maxResultsToShow),i.items.length>0?i.show():i.reset())})},b.debounceDelay),i.selectNext=function(){i.select(++i.index)},i.selectPrior=function(){i.select(--i.index)},i.select=function(a){0>a?a=i.items.length-1:a>=i.items.length&&(a=0),i.index=a,i.selected=i.items[a],c.trigger("suggestion-selected",a)},i.reset(),i}function i(a,b){var c=a.find("li").eq(b),d=c.parent(),e=c.prop("offsetTop"),f=c.prop("offsetHeight"),g=d.prop("clientHeight"),h=d.prop("scrollTop");h>e?d.prop("scrollTop",e):e+f>g+h&&d.prop("scrollTop",e+f-g)}return{restrict:"E",require:"^tagsInput",scope:{source:"&"},templateUrl:"ngTagsInput/auto-complete.html",controller:["$scope","$element","$attrs",function(a,b,c){a.events=g.simplePubSub(),f.load("autoComplete",a,c,{template:[String,"ngTagsInput/auto-complete-match.html"],debounceDelay:[Number,100],minLength:[Number,3],highlightMatchedText:[Boolean,!0],maxResultsToShow:[Number,10],loadOnDownArrow:[Boolean,!1],loadOnEmpty:[Boolean,!1],loadOnFocus:[Boolean,!1],selectFirstMatch:[Boolean,!0],displayProperty:[String,""]}),a.suggestionList=new h(a.source,a.options,a.events),this.registerAutocompleteMatch=function(){return{getOptions:function(){return a.options},getQuery:function(){return a.suggestionList.query}}}}],link:function(b,c,d,e){var f,h=[a.enter,a.tab,a.escape,a.up,a.down],j=b.suggestionList,k=e.registerAutocomplete(),l=b.options,m=b.events;l.tagsInput=k.getOptions(),f=function(a){return a&&a.length>=l.minLength||!a&&l.loadOnEmpty},b.addSuggestionByIndex=function(a){j.select(a),b.addSuggestion()},b.addSuggestion=function(){var a=!1;return j.selected&&(k.addTag(angular.copy(j.selected)),j.reset(),k.focusInput(),a=!0),a},b.track=function(a){return a[l.tagsInput.keyProperty||l.tagsInput.displayProperty]},k.on("tag-added tag-removed invalid-tag input-blur",function(){j.reset()}).on("input-change",function(a){f(a)?j.load(a,k.getTags()):j.reset()}).on("input-focus",function(){var a=k.getCurrentTagText();l.loadOnFocus&&f(a)&&j.load(a,k.getTags())}).on("input-keydown",function(c){var d=c.keyCode,e=!1;return g.isModifierOn(c)||-1===h.indexOf(d)?void 0:(j.visible?d===a.down?(j.selectNext(),e=!0):d===a.up?(j.selectPrior(),e=!0):d===a.escape?(j.reset(),e=!0):(d===a.enter||d===a.tab)&&(e=b.addSuggestion()):d===a.down&&b.options.loadOnDownArrow&&(j.load(k.getCurrentTagText(),k.getTags()),e=!0),e?(c.preventDefault(),c.stopImmediatePropagation(),!1):void 0)}),m.on("suggestion-selected",function(a){i(c,a)})}}}]),d.directive("tiAutocompleteMatch",["$sce","tiUtil",function(a,b){return{restrict:"E",require:"^autoComplete",template:'<ng-include src="$$template"></ng-include>',scope:{data:"="},link:function(c,d,e,f){var g=f.registerAutocompleteMatch(),h=g.getOptions();c.$$template=h.template,c.$index=c.$parent.$index,c.$highlight=function(c){return h.highlightMatchedText&&(c=b.safeHighlight(c,g.getQuery())),a.trustAsHtml(c)},c.$getDisplayText=function(){return b.safeToString(c.data[h.displayProperty||h.tagsInput.displayProperty])}}}}]),d.directive("tiTranscludeAppend",function(){return function(a,b,c,d,e){e(function(a){b.append(a)})}}),d.directive("tiAutosize",["tagsInputConfig",function(a){return{restrict:"A",require:"ngModel",link:function(b,c,d,e){var f,g,h=a.getTextAutosizeThreshold();f=angular.element('<span class="input"></span>'),f.css("display","none").css("visibility","hidden").css("width","auto").css("white-space","pre"),c.parent().append(f),g=function(a){var b,e=a;return angular.isString(e)&&0===e.length&&(e=d.placeholder),e&&(f.text(e),f.css("display",""),b=f.prop("offsetWidth"),f.css("display","none")),c.css("width",b?b+h+"px":""),a},e.$parsers.unshift(g),e.$formatters.unshift(g),d.$observe("placeholder",function(a){e.$modelValue||g(a)})}}}]),d.directive("tiBindAttrs",function(){return function(a,b,c){a.$watch(c.tiBindAttrs,function(a){angular.forEach(a,function(a,b){c.$set(b,a)})},!0)}}),d.provider("tagsInputConfig",function(){var a={},b={},c=3;this.setDefaults=function(b,c){return a[b]=c,this},this.setActiveInterpolation=function(a,c){return b[a]=c,this},this.setTextAutosizeThreshold=function(a){return c=a,this},this.$get=["$interpolate",function(d){var e={};return e[String]=function(a){return a},e[Number]=function(a){return parseInt(a,10)},e[Boolean]=function(a){return"true"===a.toLowerCase()},e[RegExp]=function(a){return new RegExp(a)},{load:function(c,f,g,h){var i=function(){return!0};f.options={},angular.forEach(h,function(h,j){var k,l,m,n,o,p;k=h[0],l=h[1],m=h[2]||i,n=e[k],o=function(){var b=a[c]&&a[c][j];return angular.isDefined(b)?b:l},p=function(a){f.options[j]=a&&m(a)?n(a):o()},b[c]&&b[c][j]?g.$observe(j,function(a){p(a),f.events.trigger("option-change",{name:j,newValue:a})}):p(g[j]&&d(g[j])(f.$parent))})},getTextAutosizeThreshold:function(){return c}}}]}),d.factory("tiUtil",["$timeout",function(a){var b={};return b.debounce=function(b,c){var d;return function(){var e=arguments;a.cancel(d),d=a(function(){b.apply(null,e)},c)}},b.makeObjectArray=function(a,b){if(!angular.isArray(a)||0===a.length||angular.isObject(a[0]))return a;var c=[];return a.forEach(function(a){var d={};d[b]=a,c.push(d)}),c},b.findInObjectArray=function(a,c,d,e){var f=null;return e=e||b.defaultComparer,a.some(function(a){return e(a[d],c[d])?(f=a,!0):void 0}),f},b.defaultComparer=function(a,c){return b.safeToString(a).toLowerCase()===b.safeToString(c).toLowerCase()},b.safeHighlight=function(a,c){function d(a){return a.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}if(!c)return a;a=b.encodeHTML(a),c=b.encodeHTML(c);var e=new RegExp("&[^;]+;|"+d(c),"gi");return a.replace(e,function(a){return a.toLowerCase()===c.toLowerCase()?"<em>"+a+"</em>":a})},b.safeToString=function(a){return angular.isUndefined(a)||null==a?"":a.toString().trim()},b.encodeHTML=function(a){return b.safeToString(a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},b.handleUndefinedResult=function(a,b){return function(){var c=a.apply(null,arguments);return angular.isUndefined(c)?b:c}},b.replaceSpacesWithDashes=function(a){return b.safeToString(a).replace(/\s/g,"-")},b.isModifierOn=function(a){return a.shiftKey||a.ctrlKey||a.altKey||a.metaKey},b.simplePubSub=function(){var a={};return{on:function(b,c){return b.split(" ").forEach(function(b){a[b]||(a[b]=[]),a[b].push(c)}),this},trigger:function(c,d){var e=a[c]||[];return e.every(function(a){return b.handleUndefinedResult(a,!0)(d)}),this}}},b}]),d.run(["$templateCache",function(a){a.put("ngTagsInput/tags-input.html",'<div class="host" tabindex="-1" ng-click="eventHandlers.host.click()" ti-transclude-append><div class="tags" ng-class="{focused: hasFocus}"><ul class="tag-list"><li class="tag-item" ng-repeat="tag in tagList.items track by track(tag)" ng-class="{ selected: tag == tagList.selected }" ng-click="eventHandlers.tag.click(tag)"><ti-tag-item data="::tag"></ti-tag-item></li></ul><input class="input" autocomplete="off" ng-model="newTag.text" ng-model-options="{getterSetter: true}" ng-keydown="eventHandlers.input.keydown($event)" ng-focus="eventHandlers.input.focus($event)" ng-blur="eventHandlers.input.blur($event)" ng-paste="eventHandlers.input.paste($event)" ng-trim="false" ng-class="{\'invalid-tag\': newTag.invalid}" ng-disabled="disabled" ti-bind-attrs="{type: options.type, placeholder: options.placeholder, tabindex: options.tabindex, spellcheck: options.spellcheck}" ti-autosize></div></div>'),a.put("ngTagsInput/tag-item.html",'<span ng-bind="$getDisplayText()"></span> <a class="remove-button" ng-click="$removeTag()" ng-bind="::$$removeTagSymbol"></a>'),a.put("ngTagsInput/auto-complete.html",'<div class="autocomplete" ng-if="suggestionList.visible"><ul class="suggestion-list"><li class="suggestion-item" ng-repeat="item in suggestionList.items track by track(item)" ng-class="{selected: item == suggestionList.selected}" ng-click="addSuggestionByIndex($index)" ng-mouseenter="suggestionList.select($index)"><ti-autocomplete-match data="::item"></ti-autocomplete-match></li></ul></div>'),a.put("ngTagsInput/auto-complete-match.html",'<span ng-bind-html="$highlight($getDisplayText())"></span>')}])}(),!function(){"use strict";angular.module("ui.validate",[]).directive("uiValidate",["$$uiValidateApplyWatch","$$uiValidateApplyWatchCollection",function(a,b){return{restrict:"A",require:"ngModel",link:function(c,d,e,f){var g,h=c.$eval(e.uiValidate);h&&(angular.isString(h)&&(h={validator:h}),angular.forEach(h,function(a,b){g=function(d,e){var g=c.$eval(a,{$value:d,$modelValue:d,$viewValue:e,$name:f.$name});return angular.isObject(g)&&angular.isFunction(g.then)?(g.then(function(){f.$setValidity(b,!0)},function(){f.$setValidity(b,!1)}),!0):g},f.$validators[b]=g}),e.uiValidateWatch&&a(c,f,c.$eval(e.uiValidateWatch),e.uiValidateWatchObjectEquality),e.uiValidateWatchCollection&&b(c,f,c.$eval(e.uiValidateWatchCollection)))}}}]).directive("uiValidateAsync",["$$uiValidateApplyWatch","$$uiValidateApplyWatchCollection","$timeout","$q",function(a,b,c,d){return{restrict:"A",require:"ngModel",link:function(c,e,f,g){var h,i=c.$eval(f.uiValidateAsync);i&&(angular.isString(i)&&(i={validatorAsync:i}),angular.forEach(i,function(a,b){h=function(b,e){var f=c.$eval(a,{$value:b,$modelValue:b,$viewValue:e,$name:g.$name});return angular.isObject(f)&&angular.isFunction(f.then)?f:d(function(a,b){setTimeout(function(){f?a():b()},0)})},g.$asyncValidators[b]=h}),f.uiValidateWatch&&a(c,g,c.$eval(f.uiValidateWatch),f.uiValidateWatchObjectEquality),f.uiValidateWatchCollection&&b(c,g,c.$eval(f.uiValidateWatchCollection)))}}}]).service("$$uiValidateApplyWatch",function(){return function(a,b,c,d){var e=function(){b.$validate()};angular.isString(c)?a.$watch(c,e,d):angular.isArray(c)?angular.forEach(c,function(b){a.$watch(b,e,d)}):angular.isObject(c)&&angular.forEach(c,function(b){angular.isString(b)&&a.$watch(b,e,d),angular.isArray(b)&&angular.forEach(b,function(b){a.$watch(b,e,d)})})}}).service("$$uiValidateApplyWatchCollection",function(){return function(a,b,c){var d=function(){b.$validate()};angular.isString(c)?a.$watchCollection(c,d):angular.isArray(c)?angular.forEach(c,function(b){a.$watchCollection(b,d)}):angular.isObject(c)&&angular.forEach(c,function(b){angular.isString(b)&&a.$watchCollection(b,d),angular.isArray(b)&&angular.forEach(b,function(b){a.$watchCollection(b,d)})})}})}(),function(){"use strict";function a(a,b,c){function d(){a.$watch("loggedInUser",function(a){void 0!=a&&b.path("/books")}),c.setShowPreviousButton(!1)}function e(){b.path("/create-user")}var f=this;f.goToCreateUser=e,d()}angular.module("com.bendani.bibliomania.login.controller",["com.bendani.bibliomania.title.panel"]).controller("LoginController",["$rootScope","$location","TitlePanelService",a])}(),angular.module("com.bendani.bibliomania.add.oeuvre.items.modal.service",["com.bendani.bibliomania.oeuvre.model","angular-growl"]).provider("AddOeuvreItemsModalService",function(){function a(a){var b={show:function(b,c){var d=a.open({templateUrl:"../BiblioMania/views/partials/oeuvre/add-oeuvre-items-modal.html",controller:"AddOeuvreItemsController",resolve:{authorId:function(){return b}}});d.result.then(c)}};return b}this.$get=["$uibModal",function(b){return new a(b)}]}).controller("AddOeuvreItemsController",["$scope","Oeuvre","authorId","ErrorContainer","growl",function(a,b,c,d,e){a.addOeuvreItems=function(){var f=[];if(a.validateOeuvreList(a.oeuvreItemsToAdd))for(var g=a.oeuvreItemsToAdd.split("\n"),h=0;h<g.length;h++){var i=g[h],j=i.split(" - "),k=j[0],l=j[1];f.push({publicationYear:k,title:l,authorId:c})}b.createItems(f,function(){e.addSuccessMessage("Oeuvre items toegevoegd"),a.$close()},d.handleRestError)},a.validateOeuvreList=function(a){if(null!==a&&void 0!==a&&""!==a)for(var b=a.split("\n"),c=0;c<b.length;c++){var d=b[c],e=d.split(" - ");if(e.length<2)return!1;var f=e[0],g=e[1];if(!g)return!1;if(f.length>4)return!1}return!0}}]),angular.module("com.bendani.bibliomania.edit.oeuvre.ui",["com.bendani.bibliomania.oeuvre.model","com.bendani.bibliomania.author.model","com.bendani.bibliomania.book.selection.modal.service","com.bendani.bibliomania.confirmation.modal.service","com.bendani.bibliomania.title.panel","angular-growl","com.bendani.bibliomania.image.fallback"]).config(["$routeProvider",function(a){a.when("/edit-oeuvre-item/:id",{templateUrl:"../BiblioMania/views/partials/oeuvre/edit-oeuvre-item.html",controller:"EditOeuvreItemController"})}]).controller("EditOeuvreItemController",["$scope","Oeuvre","Author","ErrorContainer","growl","$routeParams","BookSelectionModalService","ConfirmationModalService","TitlePanelService","$location",function(a,b,c,d,e,f,g,h,i,j){i.setTitle("Oeuvre"),a.books=b.books({id:f.id},function(){},d.handleRestError),a.model=b.get({id:f.id},function(b){a.$parent.title=b.title,a.author=c.get({id:b.authorId},function(){},d.handleRestError)},d.handleRestError),a.submitForm=function(){b.update(a.model,function(){e.addSuccessMessage("Oeuvre aangepast"),i.goToPreviousUrl()},d.handleRestError)},a.showSelectBookDialog=function(){g.show([{id:"book-author",value:[{value:a.model.authorId}]}],function(c){b.linkBook({id:f.id},{bookId:c.id},function(){a.books=b.books({id:f.id},function(){},d.handleRestError),e.addSuccessMessage("Boek gelinked")},d.handleRestError)})},a.deleteBookFromOeuvreItem=function(c){h.show('Wilt u de link met het boek "'+c.title+'" verwijderen?',function(){b.unlinkBook({id:f.id},{bookId:c.id},function(){a.books=b.books({id:f.id},function(){},d.handleRestError),e.addSuccessMessage("Boek link verwijderd")},d.handleRestError)})},a.goToBookDetails=function(a){j.path("/book-details/"+a.id)}}]),angular.module("com.bendani.bibliomania.oeuvre.item.selection.modal.service",["com.bendani.bibliomania.author.model"]).provider("OeuvreItemSelectionModalService",function(){function a(a){var b={show:function(b,c){var d=a.open({templateUrl:"../BiblioMania/views/partials/oeuvre/select-oeuvre-item-modal.html",controller:"OeuvreItemSelectionController",windowClass:"select-oeuvre-item-dialog",resolve:{authors:function(){return b}}});d.result.then(c)}};return b}this.$get=["$uibModal",function(b){return new a(b)}]}).controller("OeuvreItemSelectionController",["$scope","Author","ErrorContainer","authors",function(a,b,c,d){function e(){a.oeuvre=b.oeuvre({id:a.selectedAuthor.id},function(){},c.handleRestError)}a.authors=d,a.selectedAuthor=d[0],a.searchOeuvreItemQuery="",e(),a.selectAuthor=function(b){a.selectedAuthor=b,e()},a.selectOeuvreItem=function(b){a.$close(b)},a.search=function(b){return-1!==b.title.toLowerCase().indexOf(a.searchOeuvreItemQuery)?!0:!1}}]),angular.module("com.bendani.bibliomania.oeuvre.model",["ngResource"]).factory("Oeuvre",["$resource",function(a){return a("../BiblioMania/oeuvre/:id",{},{update:{method:"PUT"},createItems:{method:"POST",url:"../BiblioMania/oeuvre/create-items"},books:{method:"GET",url:"../BiblioMania/oeuvre/:id/books",isArray:!0},linkBook:{method:"POST",url:"../BiblioMania/oeuvre/:id/books"},unlinkBook:{method:"PUT",url:"../BiblioMania/oeuvre/:id/unlink-book"}})}]),angular.module("com.bendani.bibliomania.edit.personal.book.info.ui",["angular-growl","com.bendani.bibliomania.personal.book.info.model","com.bendani.bibliomania.country.model","com.bendani.bibliomania.book.model","com.bendani.bibliomania.shop.model","com.bendani.bibliomania.title.panel","com.bendani.bibliomania.price.formatter"]).config(["$routeProvider",function(a){a.when("/edit-personal-book-info/:id",{templateUrl:"../BiblioMania/views/partials/personalbookinfo/edit-personal-book-info.html",controller:"PersonalBookInfoController",resolve:{personalBookInfoModel:["PersonalBookInfo","$route","ErrorContainer","Book","InfoContainer",function(a,b,c,d,e){return a.get({id:b.current.params.id},function(a){d.get({id:a.bookId},function(a){e.setInfoCode("Deze persoonlijke informatie is voor het boek: "+a.title)},c.handleRestError)},c.handleRestError)}],onSave:["PersonalBookInfo","$route","ErrorContainer","growl","$location",function(a,b,c,d,e){return function(b){a.update(b,function(){e.path("/book-details/"+b.bookId),d.addSuccessMessage("Persoonlijke informatie opgeslagen")},c.handleRestError)}}],initFunction:function(){return function(){}}}}),a.when("/create-personal-book-info/:bookId",{templateUrl:"../BiblioMania/views/partials/personalbookinfo/edit-personal-book-info.html",controller:"PersonalBookInfoController",resolve:{personalBookInfoModel:function(){return{acquirement:"BUY",inCollection:!0,buyInfo:{},reasonNotInCollection:"BORROWED"}},onSave:["PersonalBookInfo","$route","ErrorContainer","growl","$location",function(a,b,c,d,e){return function(f){f.bookId=b.current.params.bookId,a.save(f,function(){e.path("/book-details/"+b.current.params.bookId),d.addSuccessMessage("Persoonlijke informatie opgeslagen")},c.handleRestError)}}],initFunction:["Book","InfoContainer","$route","ErrorContainer",function(a,b,c,d){return function(){a.get({id:c.current.params.bookId},function(a){b.setInfoCode("Deze persoonlijke informatie is voor het boek: "+a.title)},d.handleRestError)}}]}})}]).controller("PersonalBookInfoController",["$scope","ErrorContainer","TitlePanelService","personalBookInfoModel","onSave","Country","Shop","initFunction",function(a,b,c,d,e,f,g,h){function i(){c.setTitle("Persoonlijke informatie"),a.model=d,a.data={},a.data.countries=f.query(function(){},b.handleRestError),a.data.shops=g.query(function(){},b.handleRestError),a.data.currencies=[{name:"",value:"EUR"},{name:"$",value:"USD"},{name:"",value:"PND"}],a.submitForm=function(a){a.inCollection?"BUY"===a.acquirement?a.giftInfo=void 0:a.buyInfo=void 0:(a.giftInfo=void 0,a.buyInfo=void 0),e(a)},a.datepicker={opened:!1}}a.openDatePicker=function(){a.datepicker.opened=!0},h(),i()}]),angular.module("com.bendani.bibliomania.personal.book.info.detail.directive",["com.bendani.bibliomania.currency"]).directive("personalBookInfoDetail",function(){return{scope:{personalBookInfo:"="},restrict:"E",templateUrl:"../BiblioMania/views/partials/personalbookinfo/personal-book-info-detail-directive.html",controller:["$scope","DateService","CurrencyService",function(a,b,c){a.dateToString=b.dateToString,a.getCurrencyViewValue=c.getCurrencyViewValue}]}}),angular.module("com.bendani.bibliomania.personal.book.info.model",["ngResource"]).factory("PersonalBookInfo",["$resource",function(a){return a("../BiblioMania/personalbookinfos/:id",{},{update:{method:"PUT",url:"../BiblioMania/personalbookinfos/:id"},readingDates:{method:"GET",url:"../BiblioMania/personalbookinfos/:id/readingdates",isArray:!0}})}]),function(){function a(a,b,c,d,e){function f(){a.datepicker={opened:!1},a.ratingInvalid=!1,a.model=e,a.model||(a.model={})}a.submitForm=function(){a.model.personalBookInfoId=d.personalBookInfoId,void 0===a.model.rating?a.ratingInvalid=!0:(a.ratingInvalid=!1,a.model.id?b.update(a.model,function(){a.$close(a.model)},c.handleRestError):b.save(a.model,function(b){a.model.id=b.id,a.$close(a.model)},c.handleRestError))},a.openDatePicker=function(){a.datepicker.opened=!0},f()}angular.module("com.bendani.bibliomania.reading.date.modal.service",["com.bendani.bibliomania.reading.date.model","com.bendani.bibliomania.personal.book.info.model"]).provider("ReadingDateModalService",function(){function a(a){var b={show:function(b,c,d){var e=a.open({templateUrl:"../BiblioMania/views/partials/personalbookinfo/edit-reading-date-modal.html",controller:"ReadingDateModalController",resolve:{personalBookInfo:{personalBookInfoId:b},readingDateModel:d}});e.result.then(c)}};return b}this.$get=["$uibModal",function(b){return new a(b)}]}).controller("ReadingDateModalController",["$scope","ReadingDate","ErrorContainer","personalBookInfo","readingDateModel",a])}(),angular.module("com.bendani.bibliomania.reading.date.model",["ngResource"]).factory("ReadingDate",["$resource",function(a){return a("../BiblioMania/reading-dates/:id",{},{update:{method:"PUT",url:"../BiblioMania/reading-dates"}})}]),angular.module("com.bendani.bibliomania.shop.model",["ngResource"]).factory("Shop",["$resource",function(a){
return a("../BiblioMania/shops",{})}]),angular.module("com.bendani.bibliomania.publisher.model",["ngResource"]).factory("Publisher",["$resource",function(a){return a("../BiblioMania/publishers/:id",{},{"delete":{method:"DELETE"}})}]),function(){"use strict";function a(a,b,c,d){function e(){c.setTitle("translation.publishers"),c.setShowPreviousButton(!1),j.searchSeriesQuery="",j.predicate="name",j.reverseOrder=!1,j.orderValues=[{key:"Naam",predicate:"name",width:"50"}],i()}function f(a){return j.searchPublisherQuery?-1!==a.name.toLowerCase().indexOf(j.searchPublisherQuery.toLowerCase()):!0}function g(a){j.listView=a}function h(c){d.show("Bent u zeker dat u deze uitgever wilt verwijderen?",function(){a["delete"]({id:c.id},function(){var a=j.publishers.indexOf(c);a>-1&&j.publishers.splice(a,1)},b.handleRestError)})}function i(){j.loading=!0,j.publishers=a.query(function(){j.loading=!1},b.handleRestError)}var j=this;j.search=f,j.setListView=g,j.deletePublisher=h,e()}angular.module("com.bendani.bibliomania.publisher.overview.ui",["com.bendani.bibliomania.publisher.model","com.bendani.bibliomania.title.panel","com.bendani.bibliomania.confirmation.modal.service"]).config(["$routeProvider",function(a){a.when("/publishers",{templateUrl:"../BiblioMania/views/partials/publisher/publishers-overview.html",controller:"PublishersOverviewController",controllerAs:"vm"})}]).controller("PublishersOverviewController",["Publisher","ErrorContainer","TitlePanelService","ConfirmationModalService",a])}(),angular.module("com.bendani.bibliomania.publisher.serie.model",["ngResource"]).factory("PublisherSerie",["$resource",function(a){return a("../BiblioMania/publisher-series/:id",{},{update:{method:"PUT"},"delete":{method:"DELETE"},addBook:{method:"POST",url:"../BiblioMania/publisher-series/:id/books"},removeBook:{method:"PUT",url:"../BiblioMania/publisher-series/:id/remove-book"}})}]),angular.module("com.bendani.bibliomania.serie.model",["ngResource"]).factory("Serie",["$resource",function(a){return a("../BiblioMania/series/:id",{},{update:{method:"PUT"},"delete":{method:"DELETE"},addBook:{method:"POST",url:"../BiblioMania/series/:id/books"},removeBook:{method:"PUT",url:"../BiblioMania/series/:id/remove-book"}})}]),function(){"use strict";function a(a,b,c,d,e,f,g,h,i){function j(){b.setTitle(g),b.setShowPreviousButton(!1),q.searchSeriesQuery="",q.predicate="name",q.reverseOrder=!1,q.orderValues=[{key:"Naam",predicate:"name",width:"50"}],p()}function k(a){return-1!==a.name.toLowerCase().indexOf(q.searchSeriesQuery)}function l(a){c.selectBook(a)}function m(a){var b="PUBLISHER"===i?[{id:"book-publisher",value:[{value:a.publisherId}]}]:[];e.show(a,b,h,function(){})}function n(b){f.show("Bent u zeker dat u deze serie wilt verwijderen?",function(){h["delete"]({id:b.id},function(){var a=q.series.indexOf(b);a>-1&&q.series.splice(a,1)},a.handleRestError)})}function o(a){d.path("/book-details/"+a.id)}function p(){q.loading=!0,q.series=h.query(function(){q.loading=!1},a.handleRestError)}var q=this;q.search=k,q.onImageClickBook=l,q.editSerie=m,q.onEditBook=o,q.deleteSerie=n,j()}angular.module("com.bendani.bibliomania.series.overview.ui",["com.bendani.bibliomania.serie.model","com.bendani.bibliomania.publisher.serie.model","com.bendani.bibliomania.book.model","com.bendani.bibliomania.book.overview.service","com.bendani.bibliomania.edit.serie.modal.service","com.bendani.bibliomania.confirmation.modal.service","com.bendani.bibliomania.title.panel"]).config(["$routeProvider",function(a){a.when("/series",{templateUrl:"../BiblioMania/views/partials/book/series-overview.html",controller:"SeriesOverviewController",controllerAs:"vm",resolve:{title:function(){return"Boeken reeksen"},client:["Serie",function(a){return a}],type:function(){return"BOOK"}}}),a.when("/publisherseries",{templateUrl:"../BiblioMania/views/partials/book/series-overview.html",controller:"SeriesOverviewController",controllerAs:"vm",resolve:{title:function(){return"Uitgever reeksen"},client:["PublisherSerie",function(a){return a}],type:function(){return"PUBLISHER"}}})}]).controller("SeriesOverviewController",["ErrorContainer","TitlePanelService","BookOverviewService","$location","EditSerieModalService","ConfirmationModalService","title","client","type",a])}(),angular.module("com.bendani.bibliomania.chart.configuration.model",["ngResource"]).factory("ChartConfiguration",["$resource",function(a){return a("../BiblioMania/chart-configurations/:id",{},{update:{method:"PUT",url:"../BiblioMania/chart-configurations"},xproperties:{method:"GET",url:"../BiblioMania/chart-configurations/xproperties",isArray:!0}})}]),angular.module("com.bendani.bibliomania.chart.data.model",["ngResource"]).factory("ChartData",["$resource",function(a){return a("../BiblioMania/chart-data/:id",{},{get:{method:"GET",url:"../BiblioMania/chart-data/:id",isArray:!1}})}]),angular.module("com.bendani.bibliomania.chart.directive",["com.bendani.bibliomania.chart.data.model","com.bendani.bibliomania.confirmation.modal.service","com.bendani.bibliomania.chart.configuration.model"]).directive("chart",function(){return{scope:{chartConfigurationId:"=",onDelete:"&"},restrict:"E",templateUrl:"../BiblioMania/views/partials/statistics/chart.html",controller:["$scope","$location","ChartData","ErrorContainer","ConfirmationModalService","ChartConfiguration","growl",function(a,b,c,d,e,f,g){function h(){a.chartData=c.get({id:a.chartConfigurationId},function(){a.series=[a.chartData.xLabel]},d.handleRestError)}a.editChart=function(){b.path("/edit-chart/"+a.chartConfigurationId)},a.deleteChart=function(){e.show("Bent je zeker dat je dit diagram wilt verwijderen?",function(){f["delete"]({id:a.chartConfigurationId},function(){g.addSuccessMessage("Diagram verwijdert"),a.onDelete()},d.handleRestError)})},a.getColumnClass=function(){return a.chartData.labels.length<=16?"col-md-6":"col-md-12"},h()}]}}),angular.module("com.bendani.bibliomania.create.chart.ui",["com.bendani.php.common.filterservice","com.bendani.bibliomania.chart.filter.model"]).config(["$routeProvider",function(a){a.when("/create-chart",{templateUrl:"../BiblioMania/views/partials/statistics/create-chart.html",controller:"CreateChartController",resolve:{chartModel:function(){return{}},onSave:["ChartConfiguration","FilterService","$route","ErrorContainer","growl","$location",function(a,b,c,d,e,f){return function(c,g){c.filters=b.convertFiltersToJson(g),a.save(c,function(){e.addSuccessMessage("Configuratie opgeslagen"),f.path("/statistics")},d.handleRestError)}}]}}),a.when("/edit-chart/:id",{templateUrl:"../BiblioMania/views/partials/statistics/create-chart.html",controller:"CreateChartController",resolve:{chartModel:["ChartConfiguration","$route","ErrorContainer",function(a,b,c){return a.get({id:b.current.params.id},function(){},c.handleRestError)}],onSave:["ChartConfiguration","FilterService","$route","ErrorContainer","growl","$location",function(a,b,c,d,e,f){return function(c,g){c.filters=b.convertFiltersToJson(g),a.update(c,function(){e.addSuccessMessage("Configuratie opgeslagen"),f.path("/statistics")},d.handleRestError)}}]}})}]).controller("CreateChartController",["$scope","$location","ChartConfiguration","ErrorContainer","growl","FilterService","ChartFilter","onSave","chartModel",function(a,b,c,d,e,f,g,h,i){function j(){g.query(function(b){for(var c=0;c<b.length;c++){var d=b[c];d.supportedOperators&&(d.selectedOperator=d.supportedOperators[0]),d.value=""}f.setAllFilters(a.filterServiceId,b),a.model.filters&&f.setFilterValues(a.filterServiceId,a.model.filters)},d.handleRestError)}a.filterServiceId="chartFilters",f.registerFilterService(a.filterServiceId),a.submitAttempted=!1,a.model=i,a.data={},a.data.showFilterRefreshButton=!1,a.data.xproperties=c.xproperties(function(){},d.handleRestError),j(),a.createChart=function(b){a.submitAttempted=!0,b&&h(a.model,a.filterServiceId)}}]),angular.module("com.bendani.bibliomania.statistics.ui",["com.bendani.bibliomania.title.panel","com.bendani.bibliomania.chart.directive","com.bendani.bibliomania.chart.configuration.model"]).config(["$routeProvider",function(a){a.when("/statistics",{templateUrl:"../BiblioMania/views/partials/statistics/statistics.html",controller:"StatisticsController"})}]).controller("StatisticsController",["$scope","ErrorContainer","TitlePanelService","ChartData","ChartConfiguration","$location",function(a,b,c,d,e,f){function g(){c.setTitle("Statistieken"),c.setShowPreviousButton(!1)}a.goToCreateChart=function(){f.path("/create-chart")},a.chartConfigurations=e.query(function(){},b.handleRestError),a.onDeleteChart=function(){a.chartConfigurations=e.query(function(){},b.handleRestError)},g()}]),angular.module("com.bendani.bibliomania.tag.model",["ngResource"]).factory("Tag",["$resource",function(a){return a("../BiblioMania/tags",{})}]),angular.module("com.bendani.bibliomania.log.out.model",["ngResource"]).factory("LogOut",["$resource",function(a){return a("../BiblioMania/logOut",{},{logOut:{method:"GET",url:"../BiblioMania/logOut"}})}]),angular.module("com.bendani.bibliomania.user.model",["ngResource"]).factory("User",["$resource",function(a){return a("../BiblioMania/users/:id",{},{loggedInUser:{method:"GET",url:"../BiblioMania/loggedInUser"}})}]),angular.module("com.bendani.bibliomania.wishlist.model",["ngResource"]).factory("Wishlist",["$resource",function(a){return a("../BiblioMania/wishlist",{},{addBook:{method:"POST"},removeBook:{method:"PUT",url:"../BiblioMania/wishlist/remove-book"}})}]);